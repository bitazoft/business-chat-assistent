CREATE DATABASE assistant;

CREATE TABLE sellers (
    id SERIAL PRIMARY KEY,
    name VARCHAR NOT NULL,
    email VARCHAR UNIQUE NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE products (
    id SERIAL PRIMARY KEY,
    seller_id INTEGER NOT NULL REFERENCES sellers(id),
    name VARCHAR NOT NULL,
    description VARCHAR,
    price FLOAT NOT NULL,
    stock INTEGER NOT NULL
);

CREATE TABLE users (
    id VARCHAR PRIMARY KEY,
    name VARCHAR NOT NULL,
    email VARCHAR UNIQUE NOT NULL,
    address VARCHAR,
    number VARCHAR NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE orders (
    id SERIAL PRIMARY KEY,
    seller_id INTEGER NOT NULL REFERENCES sellers(id),
    user_id VARCHAR NOT NULL REFERENCES users(id),
    status VARCHAR NOT NULL,
    total_amount FLOAT NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE order_items (
    id SERIAL PRIMARY KEY,
    order_id INTEGER NOT NULL REFERENCES orders(id),
    product_id INTEGER NOT NULL REFERENCES products(id),
    price FLOAT NOT NULL,
    quantity INTEGER NOT NULL
);

CREATE TABLE chat_logs (
    id SERIAL PRIMARY KEY,
    seller_id INTEGER NOT NULL REFERENCES sellers(id),
    user_id VARCHAR NOT NULL REFERENCES users(id),
    user_query VARCHAR NOT NULL,
    intent VARCHAR,
    entities VARCHAR,
    response VARCHAR NOT NULL,
    timestamp TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);


-- Sellers
INSERT INTO sellers (name, email) VALUES
('TechStore', 'tech@store.com'),
('FashionMart', 'info@fashionmart.com');

-- Products
INSERT INTO products (seller_id, name, description, price, stock) VALUES
(1, 'Wireless Mouse', 'Ergonomic wireless mouse', 19.99, 100),
(1, 'Mechanical Keyboard', 'Backlit mechanical keyboard', 49.99, 50),
(2, 'Cotton T-Shirt', '100% cotton, size M', 14.99, 200),
(2, 'Jeans', 'Slim fit denim jeans', 39.99, 150);

-- Users
INSERT INTO users (id, name, email, address, number) VALUES
('user1', 'Alice Johnson', 'alice@example.com', '123 Main St', '0712345678'),
('user2', 'Bob Smith', 'bob@example.com', '456 Park Ave', '0723456789');

-- Orders
INSERT INTO orders (seller_id, user_id, status, total_amount) VALUES
(1, 'user1', 'pending', 69.98),
(2, 'user2', 'shipped', 54.98);

-- Order Items
INSERT INTO order_items (order_id, product_id, price, quantity) VALUES
(1, 1, 19.99, 1),
(1, 2, 49.99, 1),
(2, 3, 14.99, 1),
(2, 4, 39.99, 1);

-- Chat Logs
INSERT INTO chat_logs (seller_id, user_id, user_query, intent, entities, response) VALUES
(1, 'user1', 'Do you have a wireless mouse?', 'product_query', 'mouse', 'Yes, we have Wireless Mouse in stock.'),
(2, 'user2', 'Where is my order?', 'order_tracking', 'order', 'Your order has been shipped and is on its way.');
