2025-07-04 12:33:09,439 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-04 12:33:09,489 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-04 12:33:09,851 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-04 12:33:09,862 - faiss - INFO - [__init__.py:205] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-04 16:09:32,410 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-04 16:09:32,455 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-04 16:09:32,503 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-04 16:09:32,520 - faiss - INFO - [__init__.py:205] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-04 16:10:22,332 - services.chat - INFO - [chat.py:23] - [Chat API] Received chat request - seller_id: 1, user_id: user1, session_id: session_12345
2025-07-04 16:10:22,333 - services.chat - INFO - [chat.py:29] - [Chat API] Validating seller_id
2025-07-04 16:10:22,333 - services.chat - INFO - [chat.py:36] - [Chat API] Validating user_id
2025-07-04 16:10:22,334 - services.chat - INFO - [chat.py:43] - [Chat API] Checking if user exists
2025-07-04 16:12:02,188 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-04 16:12:02,206 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-04 16:12:02,228 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-04 16:12:02,236 - faiss - INFO - [__init__.py:205] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-04 16:12:08,585 - services.chat - INFO - [chat.py:23] - [Chat API] Received chat request - seller_id: 1, user_id: user1, session_id: session_12345
2025-07-04 16:12:08,585 - services.chat - INFO - [chat.py:29] - [Chat API] Validating seller_id
2025-07-04 16:12:08,585 - services.chat - INFO - [chat.py:36] - [Chat API] Validating user_id
2025-07-04 16:12:08,586 - services.chat - INFO - [chat.py:43] - [Chat API] Checking if user exists
2025-07-04 16:12:08,586 - services.chat - INFO - [chat.py:58] - [Chat API] Formatting chat history
2025-07-04 16:12:08,586 - services.chat - INFO - [chat.py:66] - [Chat API] Creating multi-agent system
2025-07-04 16:12:08,586 - agent.agent - INFO - [agent.py:446] - [Multi-Agent System] Creating multi-agent system for seller_id: 1, user_id: user1
2025-07-04 16:12:08,587 - agent.agent - INFO - [agent.py:157] - [Intent Agent] Creating intent agent for seller_id: 1
2025-07-04 16:12:08,587 - agent.agent - INFO - [agent.py:577] - [Function Agent] Creating function agent for seller_id: 1, user_id: user1
2025-07-04 16:12:08,636 - agent.agent - INFO - [agent.py:605] - [Function Agent] Function agent created successfully
2025-07-04 16:12:08,636 - agent.agent - INFO - [agent.py:609] - [User Management Agent] Creating user management agent for seller_id: 1, user_id: user1
2025-07-04 16:12:08,660 - agent.agent - ERROR - [agent.py:471] - [Multi-Agent System] Error creating agents: Prompt missing required variables: {'agent_scratchpad'}
2025-07-04 16:12:08,661 - services.chat - ERROR - [chat.py:88] - [Chat API] ValueError: Prompt missing required variables: {'agent_scratchpad'}
2025-07-04 16:16:13,788 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-04 16:16:13,802 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-04 16:16:13,821 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-04 16:16:13,828 - faiss - INFO - [__init__.py:205] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-04 16:16:48,831 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-04 16:16:48,847 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-04 16:16:48,868 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-04 16:16:48,876 - faiss - INFO - [__init__.py:205] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-04 16:17:55,328 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-04 16:17:55,343 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-04 16:17:55,366 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-04 16:17:55,376 - faiss - INFO - [__init__.py:205] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-04 16:18:29,236 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-04 16:18:29,250 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-04 16:18:29,268 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-04 16:18:29,274 - faiss - INFO - [__init__.py:205] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-04 16:18:29,908 - services.chat - INFO - [chat.py:23] - [Chat API] Received chat request - seller_id: 1, user_id: user1, session_id: session_12345
2025-07-04 16:18:29,909 - services.chat - INFO - [chat.py:29] - [Chat API] Validating seller_id
2025-07-04 16:18:29,909 - services.chat - INFO - [chat.py:36] - [Chat API] Validating user_id
2025-07-04 16:18:29,909 - services.chat - INFO - [chat.py:43] - [Chat API] Checking if user exists
2025-07-04 16:18:29,910 - services.chat - INFO - [chat.py:58] - [Chat API] Formatting chat history
2025-07-04 16:18:29,911 - services.chat - INFO - [chat.py:66] - [Chat API] Creating multi-agent system
2025-07-04 16:18:29,911 - agent.agent - INFO - [agent.py:446] - [Multi-Agent System] Creating multi-agent system for seller_id: 1, user_id: user1
2025-07-04 16:18:29,911 - agent.agent - INFO - [agent.py:157] - [Intent Agent] Creating intent agent for seller_id: 1
2025-07-04 16:18:29,911 - agent.agent - INFO - [agent.py:577] - [Function Agent] Creating function agent for seller_id: 1, user_id: user1
2025-07-04 16:18:29,957 - agent.agent - INFO - [agent.py:605] - [Function Agent] Function agent created successfully
2025-07-04 16:18:29,980 - agent.agent - ERROR - [agent.py:471] - [Multi-Agent System] Error creating agents: Prompt missing required variables: {'agent_scratchpad'}
2025-07-04 16:18:29,981 - services.chat - ERROR - [chat.py:88] - [Chat API] ValueError: Prompt missing required variables: {'agent_scratchpad'}
2025-07-04 16:19:24,391 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-04 16:19:24,407 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-04 16:19:24,428 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-04 16:19:24,436 - faiss - INFO - [__init__.py:205] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-04 16:19:51,268 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-04 16:19:51,281 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-04 16:19:51,301 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-04 16:19:51,309 - faiss - INFO - [__init__.py:205] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-04 16:27:27,680 - services.chat - INFO - [chat.py:23] - [Chat API] Received chat request - seller_id: 1, user_id: user1, session_id: session_12345
2025-07-04 16:27:27,680 - services.chat - INFO - [chat.py:29] - [Chat API] Validating seller_id
2025-07-04 16:27:27,680 - services.chat - INFO - [chat.py:36] - [Chat API] Validating user_id
2025-07-04 16:27:27,680 - services.chat - INFO - [chat.py:43] - [Chat API] Checking if user exists
2025-07-04 16:27:27,681 - services.chat - INFO - [chat.py:58] - [Chat API] Formatting chat history
2025-07-04 16:27:27,681 - services.chat - INFO - [chat.py:66] - [Chat API] Creating multi-agent system
2025-07-04 16:27:27,681 - agent.agent - INFO - [agent.py:446] - [Multi-Agent System] Creating multi-agent system for seller_id: 1, user_id: user1
2025-07-04 16:27:27,681 - agent.agent - INFO - [agent.py:157] - [Intent Agent] Creating intent agent for seller_id: 1
2025-07-04 16:27:27,682 - agent.agent - INFO - [agent.py:577] - [Function Agent] Creating function agent for seller_id: 1, user_id: user1
2025-07-04 16:27:27,730 - agent.agent - INFO - [agent.py:605] - [Function Agent] Function agent created successfully
2025-07-04 16:27:27,757 - agent.agent - INFO - [agent.py:275] - [Response Agent] Creating response agent for seller_id: 1
2025-07-04 16:27:27,757 - agent.agent - ERROR - [agent.py:471] - [Multi-Agent System] Error creating agents: 'intent'
2025-07-04 16:27:27,757 - services.chat - ERROR - [chat.py:94] - [Chat API] Unexpected error: 'intent'
2025-07-04 16:27:27,758 - services.chat - ERROR - [chat.py:95] - [Chat API] Exception details:
Traceback (most recent call last):
  File "D:\Project\business-chat-assistent\chatbot\services\chat.py", line 67, in chat
    agent_system = create_multi_agent_system(request.seller_id, user_id)
  File "D:\Project\business-chat-assistent\chatbot\agent\agent.py", line 452, in create_multi_agent_system
    response_agent = create_response_agent(seller_id)
  File "D:\Project\business-chat-assistent\chatbot\agent\agent.py", line 279, in create_response_agent
    ("system", """
KeyError: 'intent'
2025-07-04 16:30:17,155 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-04 16:30:17,170 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-04 16:30:17,191 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-04 16:30:17,198 - faiss - INFO - [__init__.py:205] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-04 16:30:35,911 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-04 16:30:35,930 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-04 16:30:35,952 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-04 16:30:35,961 - faiss - INFO - [__init__.py:205] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-04 16:32:00,602 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-04 16:32:00,618 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-04 16:32:00,640 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-04 16:32:00,649 - faiss - INFO - [__init__.py:205] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-04 16:32:04,609 - services.chat - INFO - [chat.py:23] - [Chat API] Received chat request - seller_id: 1, user_id: user1, session_id: session_12345
2025-07-04 16:32:04,610 - services.chat - INFO - [chat.py:29] - [Chat API] Validating seller_id
2025-07-04 16:32:04,610 - services.chat - INFO - [chat.py:36] - [Chat API] Validating user_id
2025-07-04 16:32:04,610 - services.chat - INFO - [chat.py:43] - [Chat API] Checking if user exists
2025-07-04 16:32:04,610 - services.chat - INFO - [chat.py:58] - [Chat API] Formatting chat history
2025-07-04 16:32:04,610 - services.chat - INFO - [chat.py:66] - [Chat API] Creating multi-agent system
2025-07-04 16:32:04,611 - agent.agent - INFO - [agent.py:446] - [Multi-Agent System] Creating multi-agent system for seller_id: 1, user_id: user1
2025-07-04 16:32:04,611 - agent.agent - INFO - [agent.py:157] - [Intent Agent] Creating intent agent for seller_id: 1
2025-07-04 16:32:04,612 - agent.agent - INFO - [agent.py:577] - [Function Agent] Creating function agent for seller_id: 1, user_id: user1
2025-07-04 16:32:04,660 - agent.agent - INFO - [agent.py:605] - [Function Agent] Function agent created successfully
2025-07-04 16:32:04,685 - agent.agent - INFO - [agent.py:275] - [Response Agent] Creating response agent for seller_id: 1
2025-07-04 16:32:04,686 - agent.agent - INFO - [agent.py:368] - [Response Agent] Response agent created successfully
2025-07-04 16:32:04,686 - agent.agent - INFO - [agent.py:372] - [Clarification Agent] Creating clarification agent for seller_id: 1
2025-07-04 16:32:04,687 - agent.agent - INFO - [agent.py:441] - [Clarification Agent] Clarification agent created successfully
2025-07-04 16:32:04,687 - agent.agent - INFO - [agent.py:455] - [Multi-Agent System] All agents created successfully
2025-07-04 16:32:04,687 - agent.agent - INFO - [agent.py:469] - [Multi-Agent System] Function mapping created with 8 functions
2025-07-04 16:32:04,687 - services.chat - INFO - [chat.py:68] - [Chat API] Agent system created successfully for seller_id: 1, user_id: user1
2025-07-04 16:32:04,687 - services.chat - INFO - [chat.py:71] - [Chat API] Getting process_input function from agent system
2025-07-04 16:32:04,688 - services.chat - INFO - [chat.py:75] - [Chat API] Processing user input through multi-agent system
2025-07-04 16:32:04,688 - agent.agent - INFO - [agent.py:475] - [Multi-Agent System] Starting processing for seller_id: 1, user_id: user1
2025-07-04 16:32:04,688 - agent.agent - INFO - [agent.py:480] - [Multi-Agent System] Processing user input: hi
2025-07-04 16:32:04,688 - agent.agent - INFO - [agent.py:483] - [Multi-Agent System] Step 1: Checking for clarification needs
2025-07-04 16:32:04,688 - agent.agent - INFO - [agent.py:406] - [Clarification Agent] Processing input for seller_id: 1
2025-07-04 16:32:04,688 - agent.agent - INFO - [agent.py:411] - [Clarification Agent] Step 1: Analyzing ambiguity
2025-07-04 16:32:04,707 - agent.agent - ERROR - [agent.py:438] - [Clarification Agent] Error in clarification processing: 'Input to ChatPromptTemplate is missing variables {\'"is_ambiguous"\'}.  Expected: [\'"is_ambiguous"\', \'input\', \'intents\'] Received: [\'input\', \'intents\']\nNote: if you intended {"is_ambiguous"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{"is_ambiguous"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-07-04 16:32:04,707 - agent.agent - ERROR - [agent.py:570] - [Multi-Agent System] Error processing request: 'Input to ChatPromptTemplate is missing variables {\'"is_ambiguous"\'}.  Expected: [\'"is_ambiguous"\', \'input\', \'intents\'] Received: [\'input\', \'intents\']\nNote: if you intended {"is_ambiguous"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{"is_ambiguous"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-07-04 16:32:04,707 - agent.agent - ERROR - [agent.py:571] - [Multi-Agent System] Exception details:
Traceback (most recent call last):
  File "D:\Project\business-chat-assistent\chatbot\agent\agent.py", line 484, in process_input
    clarification_result = clarification_agent(user_input)
  File "D:\Project\business-chat-assistent\chatbot\agent\agent.py", line 412, in clarification_chain
    ambiguity_analysis = (
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\base.py", line 3047, in invoke
    input_ = context.run(step.invoke, input_, config)
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\prompts\base.py", line 216, in invoke
    return self._call_with_config(
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\base.py", line 1940, in _call_with_config
    context.run(
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\config.py", line 428, in call_func_with_variable_args
    return func(input, **kwargs)  # type: ignore[call-arg]
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\prompts\base.py", line 189, in _format_prompt_with_error_handling
    _inner_input = self._validate_input(inner_input)
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\prompts\base.py", line 183, in _validate_input
    raise KeyError(
KeyError: 'Input to ChatPromptTemplate is missing variables {\'"is_ambiguous"\'}.  Expected: [\'"is_ambiguous"\', \'input\', \'intents\'] Received: [\'input\', \'intents\']\nNote: if you intended {"is_ambiguous"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{"is_ambiguous"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-07-04 16:32:04,723 - services.chat - INFO - [chat.py:82] - [Chat API] Successfully processed user input
2025-07-04 16:39:05,841 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-04 16:39:05,867 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-04 16:39:05,897 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-04 16:39:05,909 - faiss - INFO - [__init__.py:205] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-04 16:39:26,286 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-04 16:39:26,310 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-04 16:39:26,337 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-04 16:39:26,349 - faiss - INFO - [__init__.py:205] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-04 16:40:01,990 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-04 16:40:02,015 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-04 16:40:02,045 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-04 16:40:02,056 - faiss - INFO - [__init__.py:205] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-04 16:40:20,803 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-04 16:40:20,824 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-04 16:40:20,853 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-04 16:40:20,864 - faiss - INFO - [__init__.py:205] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-04 16:40:36,997 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-04 16:40:37,021 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-04 16:40:37,064 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-04 16:40:37,073 - faiss - INFO - [__init__.py:205] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-04 16:41:22,994 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-04 16:41:23,018 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-04 16:41:23,052 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-04 16:41:23,084 - faiss - INFO - [__init__.py:205] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-04 17:01:09,973 - services.chat - INFO - [chat.py:23] - [Chat API] Received chat request - seller_id: 1, user_id: user1, session_id: session_12345
2025-07-04 17:01:09,974 - services.chat - INFO - [chat.py:29] - [Chat API] Validating seller_id
2025-07-04 17:01:09,974 - services.chat - INFO - [chat.py:36] - [Chat API] Validating user_id
2025-07-04 17:01:09,974 - services.chat - INFO - [chat.py:43] - [Chat API] Checking if user exists
2025-07-04 17:01:09,975 - services.chat - INFO - [chat.py:58] - [Chat API] Formatting chat history
2025-07-04 17:01:09,975 - services.chat - INFO - [chat.py:66] - [Chat API] Creating multi-agent system
2025-07-04 17:01:09,975 - agent.agent - INFO - [agent.py:392] - [Multi-Agent System] Creating multi-agent system for seller_id: 1, user_id: user1
2025-07-04 17:01:09,975 - agent.agent - INFO - [agent.py:157] - [Intent Agent] Creating intent agent for seller_id: 1
2025-07-04 17:01:09,977 - agent.agent - INFO - [agent.py:511] - [Function Agent] Creating function agent for seller_id: 1, user_id: user1
2025-07-04 17:01:10,060 - agent.agent - INFO - [agent.py:539] - [Function Agent] Function agent created successfully
2025-07-04 17:01:10,106 - agent.agent - INFO - [agent.py:275] - [Response Agent] Creating response agent for seller_id: 1
2025-07-04 17:01:10,106 - agent.agent - INFO - [agent.py:385] - [Response Agent] Response agent created successfully
2025-07-04 17:01:10,107 - agent.agent - INFO - [agent.py:400] - [Multi-Agent System] All agents created successfully
2025-07-04 17:01:10,107 - agent.agent - INFO - [agent.py:414] - [Multi-Agent System] Function mapping created with 8 functions
2025-07-04 17:01:10,107 - services.chat - INFO - [chat.py:68] - [Chat API] Agent system created successfully for seller_id: 1, user_id: user1
2025-07-04 17:01:10,108 - services.chat - INFO - [chat.py:71] - [Chat API] Getting process_input function from agent system
2025-07-04 17:01:10,108 - services.chat - INFO - [chat.py:75] - [Chat API] Processing user input through multi-agent system
2025-07-04 17:01:10,108 - agent.agent - INFO - [agent.py:420] - [Multi-Agent System] Starting processing for seller_id: 1, user_id: user1
2025-07-04 17:01:10,108 - agent.agent - INFO - [agent.py:425] - [Multi-Agent System] Processing user input: hi
2025-07-04 17:01:10,109 - agent.agent - INFO - [agent.py:428] - [Multi-Agent System] Step 1: Detecting intent
2025-07-04 17:01:10,109 - agent.agent - INFO - [agent.py:191] - [Intent Agent] Processing input for seller_id: 1
2025-07-04 17:01:10,109 - agent.agent - INFO - [agent.py:196] - [Intent Agent] Step 1: Extracting entities
2025-07-04 17:01:10,132 - agent.agent - ERROR - [agent.py:221] - [Intent Agent] Error in intent processing: string indices must be integers
2025-07-04 17:01:10,133 - agent.agent - ERROR - [agent.py:504] - [Multi-Agent System] Error processing request: string indices must be integers
2025-07-04 17:01:10,134 - agent.agent - ERROR - [agent.py:505] - [Multi-Agent System] Exception details:
Traceback (most recent call last):
  File "D:\Project\business-chat-assistent\chatbot\agent\agent.py", line 429, in process_input
    intent_result = intent_agent(user_input)
  File "D:\Project\business-chat-assistent\chatbot\agent\agent.py", line 197, in intent_chain
    entity_result = (
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\base.py", line 3045, in invoke
    input_ = context.run(step.invoke, input_, config, **kwargs)
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\base.py", line 3774, in invoke
    output = {key: future.result() for key, future in zip(steps, futures)}
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\base.py", line 3774, in <dictcomp>
    output = {key: future.result() for key, future in zip(steps, futures)}
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\concurrent\futures\_base.py", line 440, in result
    return self.__get_result()
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\concurrent\futures\_base.py", line 389, in __get_result
    raise self._exception
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\concurrent\futures\thread.py", line 52, in run
    result = self.fn(*self.args, **self.kwargs)
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\base.py", line 3758, in _invoke_step
    return context.run(
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\base.py", line 4772, in invoke
    return self._call_with_config(
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\base.py", line 1940, in _call_with_config
    context.run(
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\config.py", line 428, in call_func_with_variable_args
    return func(input, **kwargs)  # type: ignore[call-arg]
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\base.py", line 4630, in _invoke
    output = call_func_with_variable_args(
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\config.py", line 428, in call_func_with_variable_args
    return func(input, **kwargs)  # type: ignore[call-arg]
  File "D:\Project\business-chat-assistent\chatbot\agent\agent.py", line 198, in <lambda>
    {"input": RunnablePassthrough(), "examples": lambda x: get_rag_examples(x["input"], seller_id)}
TypeError: string indices must be integers
2025-07-04 17:01:10,182 - services.chat - INFO - [chat.py:82] - [Chat API] Successfully processed user input
2025-07-04 17:06:03,021 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-04 17:06:03,046 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-04 17:06:03,074 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-04 17:06:03,085 - faiss - INFO - [__init__.py:205] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-04 17:06:22,495 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-04 17:06:22,519 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-04 17:06:22,549 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-04 17:06:22,562 - faiss - INFO - [__init__.py:205] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-04 17:06:43,638 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-04 17:06:43,661 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-04 17:06:43,690 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-04 17:06:43,701 - faiss - INFO - [__init__.py:205] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-04 17:06:54,899 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-04 17:06:54,922 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-04 17:06:54,949 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-04 17:06:54,959 - faiss - INFO - [__init__.py:205] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-04 17:07:31,523 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-04 17:07:31,547 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-04 17:07:31,574 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-04 17:07:31,585 - faiss - INFO - [__init__.py:205] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-04 17:14:43,429 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-04 17:14:43,456 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-04 17:14:43,500 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-04 17:14:43,512 - faiss - INFO - [__init__.py:205] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-04 17:22:43,335 - services.chat - INFO - [chat.py:23] - [Chat API] Received chat request - seller_id: 1, user_id: user1, session_id: session_12345
2025-07-04 17:22:43,335 - services.chat - INFO - [chat.py:29] - [Chat API] Validating seller_id
2025-07-04 17:22:43,335 - services.chat - INFO - [chat.py:36] - [Chat API] Validating user_id
2025-07-04 17:22:43,336 - services.chat - INFO - [chat.py:43] - [Chat API] Checking if user exists
2025-07-04 17:22:43,336 - services.chat - INFO - [chat.py:58] - [Chat API] Formatting chat history
2025-07-04 17:22:43,336 - services.chat - INFO - [chat.py:66] - [Chat API] Creating multi-agent system
2025-07-04 17:22:43,337 - agent.agent - INFO - [agent.py:392] - [Multi-Agent System] Creating multi-agent system for seller_id: 1, user_id: user1
2025-07-04 17:22:43,337 - agent.agent - INFO - [agent.py:157] - [Intent Agent] Creating intent agent for seller_id: 1
2025-07-04 17:22:43,337 - agent.agent - INFO - [agent.py:511] - [Function Agent] Creating function agent for seller_id: 1, user_id: user1
2025-07-04 17:22:43,386 - agent.agent - INFO - [agent.py:539] - [Function Agent] Function agent created successfully
2025-07-04 17:22:43,413 - agent.agent - INFO - [agent.py:275] - [Response Agent] Creating response agent for seller_id: 1
2025-07-04 17:22:43,413 - agent.agent - INFO - [agent.py:385] - [Response Agent] Response agent created successfully
2025-07-04 17:22:43,413 - agent.agent - INFO - [agent.py:400] - [Multi-Agent System] All agents created successfully
2025-07-04 17:22:43,413 - agent.agent - INFO - [agent.py:414] - [Multi-Agent System] Function mapping created with 8 functions
2025-07-04 17:22:43,414 - services.chat - INFO - [chat.py:68] - [Chat API] Agent system created successfully for seller_id: 1, user_id: user1
2025-07-04 17:22:43,414 - services.chat - INFO - [chat.py:71] - [Chat API] Getting process_input function from agent system
2025-07-04 17:22:43,414 - services.chat - INFO - [chat.py:75] - [Chat API] Processing user input through multi-agent system
2025-07-04 17:22:43,414 - agent.agent - INFO - [agent.py:420] - [Multi-Agent System] Starting processing for seller_id: 1, user_id: user1
2025-07-04 17:22:43,415 - agent.agent - INFO - [agent.py:425] - [Multi-Agent System] Processing user input: hi
2025-07-04 17:22:43,415 - agent.agent - INFO - [agent.py:428] - [Multi-Agent System] Step 1: Detecting intent
2025-07-04 17:22:43,415 - agent.agent - INFO - [agent.py:191] - [Intent Agent] Processing input for seller_id: 1
2025-07-04 17:22:43,415 - agent.agent - INFO - [agent.py:196] - [Intent Agent] Step 1: Extracting entities
2025-07-04 17:22:43,431 - agent.agent - ERROR - [agent.py:149] - [RAG Helper] Error getting RAG examples: 'VectorStore' object has no attribute 'similarity_search'
2025-07-04 17:22:43,432 - agent.agent - ERROR - [agent.py:221] - [Intent Agent] Error in intent processing: 'Input to ChatPromptTemplate is missing variables {\'"entities"\'}.  Expected: [\'"entities"\', \'examples\', \'input\'] Received: [\'input\', \'examples\']\nNote: if you intended {"entities"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{"entities"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-07-04 17:22:43,433 - agent.agent - ERROR - [agent.py:504] - [Multi-Agent System] Error processing request: 'Input to ChatPromptTemplate is missing variables {\'"entities"\'}.  Expected: [\'"entities"\', \'examples\', \'input\'] Received: [\'input\', \'examples\']\nNote: if you intended {"entities"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{"entities"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-07-04 17:22:43,433 - agent.agent - ERROR - [agent.py:505] - [Multi-Agent System] Exception details:
Traceback (most recent call last):
  File "D:\Project\business-chat-assistent\chatbot\agent\agent.py", line 429, in process_input
    intent_result = intent_agent(user_input)
  File "D:\Project\business-chat-assistent\chatbot\agent\agent.py", line 197, in intent_chain
    entity_result = (
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\base.py", line 3047, in invoke
    input_ = context.run(step.invoke, input_, config)
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\prompts\base.py", line 216, in invoke
    return self._call_with_config(
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\base.py", line 1940, in _call_with_config
    context.run(
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\config.py", line 428, in call_func_with_variable_args
    return func(input, **kwargs)  # type: ignore[call-arg]
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\prompts\base.py", line 189, in _format_prompt_with_error_handling
    _inner_input = self._validate_input(inner_input)
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\prompts\base.py", line 183, in _validate_input
    raise KeyError(
KeyError: 'Input to ChatPromptTemplate is missing variables {\'"entities"\'}.  Expected: [\'"entities"\', \'examples\', \'input\'] Received: [\'input\', \'examples\']\nNote: if you intended {"entities"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{"entities"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-07-04 17:22:43,438 - services.chat - INFO - [chat.py:82] - [Chat API] Successfully processed user input
2025-07-04 17:30:31,571 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-04 17:30:31,585 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-04 17:30:31,605 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-04 17:30:31,613 - faiss - INFO - [__init__.py:205] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-04 17:30:58,238 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-04 17:30:58,254 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-04 17:30:58,282 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-04 17:30:58,292 - faiss - INFO - [__init__.py:205] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-04 17:31:05,947 - services.chat - INFO - [chat.py:23] - [Chat API] Received chat request - seller_id: 1, user_id: user1, session_id: session_12345
2025-07-04 17:31:05,947 - services.chat - INFO - [chat.py:29] - [Chat API] Validating seller_id
2025-07-04 17:31:05,947 - services.chat - INFO - [chat.py:36] - [Chat API] Validating user_id
2025-07-04 17:31:05,947 - services.chat - INFO - [chat.py:43] - [Chat API] Checking if user exists
2025-07-04 17:31:05,947 - services.chat - INFO - [chat.py:58] - [Chat API] Formatting chat history
2025-07-04 17:31:05,947 - services.chat - INFO - [chat.py:66] - [Chat API] Creating multi-agent system
2025-07-04 17:31:05,948 - agent.agent - INFO - [agent.py:392] - [Multi-Agent System] Creating multi-agent system for seller_id: 1, user_id: user1
2025-07-04 17:31:05,948 - agent.agent - INFO - [agent.py:157] - [Intent Agent] Creating intent agent for seller_id: 1
2025-07-04 17:31:05,948 - agent.agent - ERROR - [agent.py:416] - [Multi-Agent System] Error creating agents: unhashable type: 'dict'
2025-07-04 17:31:05,948 - services.chat - ERROR - [chat.py:94] - [Chat API] Unexpected error: unhashable type: 'dict'
2025-07-04 17:31:05,948 - services.chat - ERROR - [chat.py:95] - [Chat API] Exception details:
Traceback (most recent call last):
  File "D:\Project\business-chat-assistent\chatbot\services\chat.py", line 67, in chat
    agent_system = create_multi_agent_system(request.seller_id, user_id)
  File "D:\Project\business-chat-assistent\chatbot\agent\agent.py", line 395, in create_multi_agent_system
    intent_agent = create_intent_agent(seller_id)
  File "D:\Project\business-chat-assistent\chatbot\agent\agent.py", line 167, in create_intent_agent
    Respond with JSON: {{{"entities": {{"products": [], "order_ids": [], "user_info": {{}}, "other": []}}, "context": "<summary>"}}}
TypeError: unhashable type: 'dict'
2025-07-04 17:31:50,488 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-04 17:31:50,504 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-04 17:31:50,524 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-04 17:31:50,533 - faiss - INFO - [__init__.py:205] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-04 17:33:54,752 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-04 17:33:54,861 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-04 17:33:54,902 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-04 17:33:54,917 - faiss - INFO - [__init__.py:205] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-04 17:33:55,752 - services.chat - INFO - [chat.py:23] - [Chat API] Received chat request - seller_id: 1, user_id: user1, session_id: session_12345
2025-07-04 17:33:55,754 - services.chat - INFO - [chat.py:29] - [Chat API] Validating seller_id
2025-07-04 17:33:55,754 - services.chat - INFO - [chat.py:36] - [Chat API] Validating user_id
2025-07-04 17:33:55,755 - services.chat - INFO - [chat.py:43] - [Chat API] Checking if user exists
2025-07-04 17:33:55,755 - services.chat - INFO - [chat.py:58] - [Chat API] Formatting chat history
2025-07-04 17:33:55,758 - services.chat - INFO - [chat.py:66] - [Chat API] Creating multi-agent system
2025-07-04 17:33:55,759 - agent.agent - INFO - [agent.py:392] - [Multi-Agent System] Creating multi-agent system for seller_id: 1, user_id: user1
2025-07-04 17:33:55,759 - agent.agent - INFO - [agent.py:157] - [Intent Agent] Creating intent agent for seller_id: 1
2025-07-04 17:33:55,760 - agent.agent - INFO - [agent.py:511] - [Function Agent] Creating function agent for seller_id: 1, user_id: user1
2025-07-04 17:33:55,845 - agent.agent - INFO - [agent.py:539] - [Function Agent] Function agent created successfully
2025-07-04 17:33:55,894 - agent.agent - INFO - [agent.py:275] - [Response Agent] Creating response agent for seller_id: 1
2025-07-04 17:33:55,894 - agent.agent - INFO - [agent.py:385] - [Response Agent] Response agent created successfully
2025-07-04 17:33:55,895 - agent.agent - INFO - [agent.py:400] - [Multi-Agent System] All agents created successfully
2025-07-04 17:33:55,895 - agent.agent - INFO - [agent.py:414] - [Multi-Agent System] Function mapping created with 8 functions
2025-07-04 17:33:55,895 - services.chat - INFO - [chat.py:68] - [Chat API] Agent system created successfully for seller_id: 1, user_id: user1
2025-07-04 17:33:55,895 - services.chat - INFO - [chat.py:71] - [Chat API] Getting process_input function from agent system
2025-07-04 17:33:55,896 - services.chat - INFO - [chat.py:75] - [Chat API] Processing user input through multi-agent system
2025-07-04 17:33:55,896 - agent.agent - INFO - [agent.py:420] - [Multi-Agent System] Starting processing for seller_id: 1, user_id: user1
2025-07-04 17:33:55,896 - agent.agent - INFO - [agent.py:425] - [Multi-Agent System] Processing user input: hi
2025-07-04 17:33:55,896 - agent.agent - INFO - [agent.py:428] - [Multi-Agent System] Step 1: Detecting intent
2025-07-04 17:33:55,896 - agent.agent - INFO - [agent.py:191] - [Intent Agent] Processing input for seller_id: 1
2025-07-04 17:33:55,897 - agent.agent - INFO - [agent.py:196] - [Intent Agent] Step 1: Extracting entities
2025-07-04 17:33:55,922 - agent.agent - ERROR - [agent.py:149] - [RAG Helper] Error getting RAG examples: 'VectorStore' object has no attribute 'similarity_search'
2025-07-04 17:33:55,923 - agent.agent - ERROR - [agent.py:221] - [Intent Agent] Error in intent processing: 'Input to ChatPromptTemplate is missing variables {\'"entities"\'}.  Expected: [\'"entities"\', \'examples\', \'input\'] Received: [\'input\', \'examples\']\nNote: if you intended {"entities"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{"entities"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-07-04 17:33:55,924 - agent.agent - ERROR - [agent.py:504] - [Multi-Agent System] Error processing request: 'Input to ChatPromptTemplate is missing variables {\'"entities"\'}.  Expected: [\'"entities"\', \'examples\', \'input\'] Received: [\'input\', \'examples\']\nNote: if you intended {"entities"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{"entities"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-07-04 17:33:55,924 - agent.agent - ERROR - [agent.py:505] - [Multi-Agent System] Exception details:
Traceback (most recent call last):
  File "D:\Project\business-chat-assistent\chatbot\agent\agent.py", line 429, in process_input
    intent_result = intent_agent(user_input)
  File "D:\Project\business-chat-assistent\chatbot\agent\agent.py", line 197, in intent_chain
    entity_result = (
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\base.py", line 3047, in invoke
    input_ = context.run(step.invoke, input_, config)
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\prompts\base.py", line 216, in invoke
    return self._call_with_config(
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\base.py", line 1940, in _call_with_config
    context.run(
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\config.py", line 428, in call_func_with_variable_args
    return func(input, **kwargs)  # type: ignore[call-arg]
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\prompts\base.py", line 189, in _format_prompt_with_error_handling
    _inner_input = self._validate_input(inner_input)
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\prompts\base.py", line 183, in _validate_input
    raise KeyError(
KeyError: 'Input to ChatPromptTemplate is missing variables {\'"entities"\'}.  Expected: [\'"entities"\', \'examples\', \'input\'] Received: [\'input\', \'examples\']\nNote: if you intended {"entities"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{"entities"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-07-04 17:33:55,928 - services.chat - INFO - [chat.py:82] - [Chat API] Successfully processed user input
2025-07-04 18:32:36,269 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-04 18:32:36,311 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-04 18:32:36,338 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-04 18:32:36,350 - faiss - INFO - [__init__.py:205] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-04 18:35:08,062 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-04 18:35:08,079 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-04 18:35:08,100 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-04 18:35:08,107 - faiss - INFO - [__init__.py:205] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-04 18:35:35,625 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-04 18:35:35,640 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-04 18:35:35,661 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-04 18:35:35,669 - faiss - INFO - [__init__.py:205] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-04 18:35:39,027 - services.chat - INFO - [chat.py:23] - [Chat API] Received chat request - seller_id: 1, user_id: user1, session_id: session_12345
2025-07-04 18:35:39,028 - services.chat - INFO - [chat.py:29] - [Chat API] Validating seller_id
2025-07-04 18:35:39,028 - services.chat - INFO - [chat.py:36] - [Chat API] Validating user_id
2025-07-04 18:35:39,028 - services.chat - INFO - [chat.py:43] - [Chat API] Checking if user exists
2025-07-04 18:35:39,029 - services.chat - INFO - [chat.py:58] - [Chat API] Formatting chat history
2025-07-04 18:35:39,029 - services.chat - INFO - [chat.py:66] - [Chat API] Creating multi-agent system
2025-07-04 18:35:39,029 - agent.agent - INFO - [agent.py:392] - [Multi-Agent System] Creating multi-agent system for seller_id: 1, user_id: user1
2025-07-04 18:35:39,029 - agent.agent - INFO - [agent.py:157] - [Intent Agent] Creating intent agent for seller_id: 1
2025-07-04 18:35:39,030 - agent.agent - INFO - [agent.py:511] - [Function Agent] Creating function agent for seller_id: 1, user_id: user1
2025-07-04 18:35:39,074 - agent.agent - INFO - [agent.py:539] - [Function Agent] Function agent created successfully
2025-07-04 18:35:39,097 - agent.agent - INFO - [agent.py:275] - [Response Agent] Creating response agent for seller_id: 1
2025-07-04 18:35:39,098 - agent.agent - INFO - [agent.py:385] - [Response Agent] Response agent created successfully
2025-07-04 18:35:39,098 - agent.agent - INFO - [agent.py:400] - [Multi-Agent System] All agents created successfully
2025-07-04 18:35:39,098 - agent.agent - INFO - [agent.py:414] - [Multi-Agent System] Function mapping created with 8 functions
2025-07-04 18:35:39,098 - services.chat - INFO - [chat.py:68] - [Chat API] Agent system created successfully for seller_id: 1, user_id: user1
2025-07-04 18:35:39,098 - services.chat - INFO - [chat.py:71] - [Chat API] Getting process_input function from agent system
2025-07-04 18:35:39,099 - services.chat - INFO - [chat.py:75] - [Chat API] Processing user input through multi-agent system
2025-07-04 18:35:39,099 - agent.agent - INFO - [agent.py:420] - [Multi-Agent System] Starting processing for seller_id: 1, user_id: user1
2025-07-04 18:35:39,099 - agent.agent - INFO - [agent.py:425] - [Multi-Agent System] Processing user input: hi
2025-07-04 18:35:39,099 - agent.agent - INFO - [agent.py:428] - [Multi-Agent System] Step 1: Detecting intent
2025-07-04 18:35:39,100 - agent.agent - INFO - [agent.py:191] - [Intent Agent] Processing input for seller_id: 1
2025-07-04 18:35:39,100 - agent.agent - INFO - [agent.py:196] - [Intent Agent] Step 1: Extracting entities
2025-07-04 18:35:39,118 - agent.agent - ERROR - [agent.py:149] - [RAG Helper] Error getting RAG examples: 'VectorStore' object has no attribute 'similarity_search'
2025-07-04 18:35:39,119 - agent.agent - ERROR - [agent.py:221] - [Intent Agent] Error in intent processing: 'Input to ChatPromptTemplate is missing variables {\'"entities"\'}.  Expected: [\'"entities"\', \'examples\', \'input\'] Received: [\'input\', \'examples\']\nNote: if you intended {"entities"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{"entities"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-07-04 18:35:39,120 - agent.agent - ERROR - [agent.py:504] - [Multi-Agent System] Error processing request: 'Input to ChatPromptTemplate is missing variables {\'"entities"\'}.  Expected: [\'"entities"\', \'examples\', \'input\'] Received: [\'input\', \'examples\']\nNote: if you intended {"entities"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{"entities"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-07-04 18:35:39,120 - agent.agent - ERROR - [agent.py:505] - [Multi-Agent System] Exception details:
Traceback (most recent call last):
  File "D:\Project\business-chat-assistent\chatbot\agent\agent.py", line 429, in process_input
    intent_result = intent_agent(user_input)
  File "D:\Project\business-chat-assistent\chatbot\agent\agent.py", line 197, in intent_chain
    entity_result = (
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\base.py", line 3047, in invoke
    input_ = context.run(step.invoke, input_, config)
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\prompts\base.py", line 216, in invoke
    return self._call_with_config(
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\base.py", line 1940, in _call_with_config
    context.run(
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\config.py", line 428, in call_func_with_variable_args
    return func(input, **kwargs)  # type: ignore[call-arg]
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\prompts\base.py", line 189, in _format_prompt_with_error_handling
    _inner_input = self._validate_input(inner_input)
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\prompts\base.py", line 183, in _validate_input
    raise KeyError(
KeyError: 'Input to ChatPromptTemplate is missing variables {\'"entities"\'}.  Expected: [\'"entities"\', \'examples\', \'input\'] Received: [\'input\', \'examples\']\nNote: if you intended {"entities"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{"entities"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-07-04 18:35:39,124 - services.chat - INFO - [chat.py:82] - [Chat API] Successfully processed user input
2025-07-04 18:39:11,389 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-04 18:39:11,558 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-04 18:39:11,577 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-04 18:39:11,584 - faiss - INFO - [__init__.py:205] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-04 18:39:58,190 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-04 18:39:58,207 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-04 18:39:58,225 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-04 18:39:58,234 - faiss - INFO - [__init__.py:205] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-04 18:40:31,108 - services.chat - INFO - [chat.py:23] - [Chat API] Received chat request - seller_id: 1, user_id: user1, session_id: session_12345
2025-07-04 18:40:31,109 - services.chat - INFO - [chat.py:29] - [Chat API] Validating seller_id
2025-07-04 18:40:31,109 - services.chat - INFO - [chat.py:36] - [Chat API] Validating user_id
2025-07-04 18:40:31,109 - services.chat - INFO - [chat.py:43] - [Chat API] Checking if user exists
2025-07-04 18:40:31,109 - services.chat - INFO - [chat.py:58] - [Chat API] Formatting chat history
2025-07-04 18:40:31,110 - services.chat - INFO - [chat.py:66] - [Chat API] Creating multi-agent system
2025-07-04 18:40:31,110 - agent.agent - INFO - [agent.py:392] - [Multi-Agent System] Creating multi-agent system for seller_id: 1, user_id: user1
2025-07-04 18:40:31,110 - agent.agent - INFO - [agent.py:157] - [Intent Agent] Creating intent agent for seller_id: 1
2025-07-04 18:40:31,110 - agent.agent - INFO - [agent.py:511] - [Function Agent] Creating function agent for seller_id: 1, user_id: user1
2025-07-04 18:40:31,156 - agent.agent - INFO - [agent.py:539] - [Function Agent] Function agent created successfully
2025-07-04 18:40:31,182 - agent.agent - INFO - [agent.py:275] - [Response Agent] Creating response agent for seller_id: 1
2025-07-04 18:40:31,182 - agent.agent - INFO - [agent.py:385] - [Response Agent] Response agent created successfully
2025-07-04 18:40:31,183 - agent.agent - INFO - [agent.py:400] - [Multi-Agent System] All agents created successfully
2025-07-04 18:40:31,183 - agent.agent - INFO - [agent.py:414] - [Multi-Agent System] Function mapping created with 8 functions
2025-07-04 18:40:31,183 - services.chat - INFO - [chat.py:68] - [Chat API] Agent system created successfully for seller_id: 1, user_id: user1
2025-07-04 18:40:31,183 - services.chat - INFO - [chat.py:71] - [Chat API] Getting process_input function from agent system
2025-07-04 18:40:31,183 - services.chat - INFO - [chat.py:75] - [Chat API] Processing user input through multi-agent system
2025-07-04 18:40:31,183 - agent.agent - INFO - [agent.py:420] - [Multi-Agent System] Starting processing for seller_id: 1, user_id: user1
2025-07-04 18:40:31,184 - agent.agent - INFO - [agent.py:425] - [Multi-Agent System] Processing user input: hi
2025-07-04 18:40:31,184 - agent.agent - INFO - [agent.py:428] - [Multi-Agent System] Step 1: Detecting intent
2025-07-04 18:40:31,184 - agent.agent - INFO - [agent.py:191] - [Intent Agent] Processing input for seller_id: 1
2025-07-04 18:40:31,184 - agent.agent - INFO - [agent.py:196] - [Intent Agent] Step 1: Extracting entities
2025-07-04 18:40:31,200 - agent.agent - ERROR - [agent.py:221] - [Intent Agent] Error in intent processing: 'Input to ChatPromptTemplate is missing variables {\'"entities"\'}.  Expected: [\'"entities"\', \'examples\', \'input\'] Received: [\'input\', \'examples\']\nNote: if you intended {"entities"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{"entities"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-07-04 18:40:31,200 - agent.agent - ERROR - [agent.py:504] - [Multi-Agent System] Error processing request: 'Input to ChatPromptTemplate is missing variables {\'"entities"\'}.  Expected: [\'"entities"\', \'examples\', \'input\'] Received: [\'input\', \'examples\']\nNote: if you intended {"entities"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{"entities"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-07-04 18:40:31,201 - agent.agent - ERROR - [agent.py:505] - [Multi-Agent System] Exception details:
Traceback (most recent call last):
  File "D:\Project\business-chat-assistent\chatbot\agent\agent.py", line 429, in process_input
    intent_result = intent_agent(user_input)
  File "D:\Project\business-chat-assistent\chatbot\agent\agent.py", line 197, in intent_chain
    entity_result = (
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\base.py", line 3047, in invoke
    input_ = context.run(step.invoke, input_, config)
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\prompts\base.py", line 216, in invoke
    return self._call_with_config(
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\base.py", line 1940, in _call_with_config
    context.run(
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\config.py", line 428, in call_func_with_variable_args
    return func(input, **kwargs)  # type: ignore[call-arg]
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\prompts\base.py", line 189, in _format_prompt_with_error_handling
    _inner_input = self._validate_input(inner_input)
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\prompts\base.py", line 183, in _validate_input
    raise KeyError(
KeyError: 'Input to ChatPromptTemplate is missing variables {\'"entities"\'}.  Expected: [\'"entities"\', \'examples\', \'input\'] Received: [\'input\', \'examples\']\nNote: if you intended {"entities"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{"entities"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-07-04 18:40:31,203 - services.chat - INFO - [chat.py:82] - [Chat API] Successfully processed user input
2025-07-04 19:26:02,473 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-04 19:26:02,489 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-04 19:26:02,508 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-04 19:26:02,515 - faiss - INFO - [__init__.py:205] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-04 19:26:04,434 - services.chat - INFO - [chat.py:23] - [Chat API] Received chat request - seller_id: 1, user_id: user1, session_id: session_12345
2025-07-04 19:26:04,434 - services.chat - INFO - [chat.py:29] - [Chat API] Validating seller_id
2025-07-04 19:26:04,435 - services.chat - INFO - [chat.py:36] - [Chat API] Validating user_id
2025-07-04 19:26:04,435 - services.chat - INFO - [chat.py:43] - [Chat API] Checking if user exists
2025-07-04 19:26:04,435 - services.chat - INFO - [chat.py:58] - [Chat API] Formatting chat history
2025-07-04 19:26:04,435 - services.chat - INFO - [chat.py:66] - [Chat API] Creating multi-agent system
2025-07-04 19:26:04,436 - agent.agent - INFO - [agent.py:392] - [Multi-Agent System] Creating multi-agent system for seller_id: 1, user_id: user1
2025-07-04 19:26:04,436 - agent.agent - INFO - [agent.py:157] - [Intent Agent] Creating intent agent for seller_id: 1
2025-07-04 19:26:04,436 - agent.agent - INFO - [agent.py:511] - [Function Agent] Creating function agent for seller_id: 1, user_id: user1
2025-07-04 19:26:04,487 - agent.agent - INFO - [agent.py:539] - [Function Agent] Function agent created successfully
2025-07-04 19:26:04,515 - agent.agent - INFO - [agent.py:275] - [Response Agent] Creating response agent for seller_id: 1
2025-07-04 19:26:04,515 - agent.agent - INFO - [agent.py:385] - [Response Agent] Response agent created successfully
2025-07-04 19:26:04,515 - agent.agent - INFO - [agent.py:400] - [Multi-Agent System] All agents created successfully
2025-07-04 19:26:04,516 - agent.agent - INFO - [agent.py:414] - [Multi-Agent System] Function mapping created with 8 functions
2025-07-04 19:26:04,516 - services.chat - INFO - [chat.py:68] - [Chat API] Agent system created successfully for seller_id: 1, user_id: user1
2025-07-04 19:26:04,516 - services.chat - INFO - [chat.py:71] - [Chat API] Getting process_input function from agent system
2025-07-04 19:26:04,516 - services.chat - INFO - [chat.py:75] - [Chat API] Processing user input through multi-agent system
2025-07-04 19:26:04,516 - agent.agent - INFO - [agent.py:420] - [Multi-Agent System] Starting processing for seller_id: 1, user_id: user1
2025-07-04 19:26:04,516 - agent.agent - INFO - [agent.py:425] - [Multi-Agent System] Processing user input: hi
2025-07-04 19:26:04,517 - agent.agent - INFO - [agent.py:428] - [Multi-Agent System] Step 1: Detecting intent
2025-07-04 19:26:04,517 - agent.agent - INFO - [agent.py:191] - [Intent Agent] Processing input for seller_id: 1
2025-07-04 19:26:04,517 - agent.agent - INFO - [agent.py:196] - [Intent Agent] Step 1: Extracting entities
2025-07-04 19:26:04,534 - agent.agent - ERROR - [agent.py:221] - [Intent Agent] Error in intent processing: 'Input to ChatPromptTemplate is missing variables {\'"entities"\'}.  Expected: [\'"entities"\', \'examples\', \'input\'] Received: [\'input\', \'examples\']\nNote: if you intended {"entities"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{"entities"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-07-04 19:26:04,535 - agent.agent - ERROR - [agent.py:504] - [Multi-Agent System] Error processing request: 'Input to ChatPromptTemplate is missing variables {\'"entities"\'}.  Expected: [\'"entities"\', \'examples\', \'input\'] Received: [\'input\', \'examples\']\nNote: if you intended {"entities"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{"entities"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-07-04 19:26:04,535 - agent.agent - ERROR - [agent.py:505] - [Multi-Agent System] Exception details:
Traceback (most recent call last):
  File "D:\Project\business-chat-assistent\chatbot\agent\agent.py", line 429, in process_input
    intent_result = intent_agent(user_input)
  File "D:\Project\business-chat-assistent\chatbot\agent\agent.py", line 197, in intent_chain
    entity_result = (
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\base.py", line 3047, in invoke
    input_ = context.run(step.invoke, input_, config)
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\prompts\base.py", line 216, in invoke
    return self._call_with_config(
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\base.py", line 1940, in _call_with_config
    context.run(
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\config.py", line 428, in call_func_with_variable_args
    return func(input, **kwargs)  # type: ignore[call-arg]
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\prompts\base.py", line 189, in _format_prompt_with_error_handling
    _inner_input = self._validate_input(inner_input)
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\prompts\base.py", line 183, in _validate_input
    raise KeyError(
KeyError: 'Input to ChatPromptTemplate is missing variables {\'"entities"\'}.  Expected: [\'"entities"\', \'examples\', \'input\'] Received: [\'input\', \'examples\']\nNote: if you intended {"entities"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{"entities"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-07-04 19:26:04,537 - services.chat - INFO - [chat.py:82] - [Chat API] Successfully processed user input
2025-07-04 19:26:21,564 - services.chat - INFO - [chat.py:23] - [Chat API] Received chat request - seller_id: 1, user_id: user1, session_id: session_12345
2025-07-04 19:26:21,564 - services.chat - INFO - [chat.py:29] - [Chat API] Validating seller_id
2025-07-04 19:26:21,564 - services.chat - INFO - [chat.py:36] - [Chat API] Validating user_id
2025-07-04 19:26:21,564 - services.chat - INFO - [chat.py:43] - [Chat API] Checking if user exists
2025-07-04 19:26:21,564 - services.chat - INFO - [chat.py:58] - [Chat API] Formatting chat history
2025-07-04 19:26:21,565 - services.chat - INFO - [chat.py:66] - [Chat API] Creating multi-agent system
2025-07-04 19:26:21,565 - agent.agent - INFO - [agent.py:392] - [Multi-Agent System] Creating multi-agent system for seller_id: 1, user_id: user1
2025-07-04 19:26:21,565 - agent.agent - INFO - [agent.py:157] - [Intent Agent] Creating intent agent for seller_id: 1
2025-07-04 19:26:21,566 - agent.agent - INFO - [agent.py:511] - [Function Agent] Creating function agent for seller_id: 1, user_id: user1
2025-07-04 19:26:21,612 - agent.agent - INFO - [agent.py:539] - [Function Agent] Function agent created successfully
2025-07-04 19:26:21,639 - agent.agent - INFO - [agent.py:275] - [Response Agent] Creating response agent for seller_id: 1
2025-07-04 19:26:21,640 - agent.agent - INFO - [agent.py:385] - [Response Agent] Response agent created successfully
2025-07-04 19:26:21,640 - agent.agent - INFO - [agent.py:400] - [Multi-Agent System] All agents created successfully
2025-07-04 19:26:21,640 - agent.agent - INFO - [agent.py:414] - [Multi-Agent System] Function mapping created with 8 functions
2025-07-04 19:26:21,640 - services.chat - INFO - [chat.py:68] - [Chat API] Agent system created successfully for seller_id: 1, user_id: user1
2025-07-04 19:26:21,640 - services.chat - INFO - [chat.py:71] - [Chat API] Getting process_input function from agent system
2025-07-04 19:26:21,641 - services.chat - INFO - [chat.py:75] - [Chat API] Processing user input through multi-agent system
2025-07-04 19:26:21,641 - agent.agent - INFO - [agent.py:420] - [Multi-Agent System] Starting processing for seller_id: 1, user_id: user1
2025-07-04 19:26:21,641 - agent.agent - INFO - [agent.py:425] - [Multi-Agent System] Processing user input: hi
2025-07-04 19:26:21,641 - agent.agent - INFO - [agent.py:428] - [Multi-Agent System] Step 1: Detecting intent
2025-07-04 19:26:21,641 - agent.agent - INFO - [agent.py:191] - [Intent Agent] Processing input for seller_id: 1
2025-07-04 19:26:21,641 - agent.agent - INFO - [agent.py:196] - [Intent Agent] Step 1: Extracting entities
2025-07-04 19:26:21,644 - agent.agent - ERROR - [agent.py:221] - [Intent Agent] Error in intent processing: 'Input to ChatPromptTemplate is missing variables {\'"entities"\'}.  Expected: [\'"entities"\', \'examples\', \'input\'] Received: [\'input\', \'examples\']\nNote: if you intended {"entities"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{"entities"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-07-04 19:26:21,644 - agent.agent - ERROR - [agent.py:504] - [Multi-Agent System] Error processing request: 'Input to ChatPromptTemplate is missing variables {\'"entities"\'}.  Expected: [\'"entities"\', \'examples\', \'input\'] Received: [\'input\', \'examples\']\nNote: if you intended {"entities"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{"entities"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-07-04 19:26:21,645 - agent.agent - ERROR - [agent.py:505] - [Multi-Agent System] Exception details:
Traceback (most recent call last):
  File "D:\Project\business-chat-assistent\chatbot\agent\agent.py", line 429, in process_input
    intent_result = intent_agent(user_input)
  File "D:\Project\business-chat-assistent\chatbot\agent\agent.py", line 197, in intent_chain
    entity_result = (
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\base.py", line 3047, in invoke
    input_ = context.run(step.invoke, input_, config)
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\prompts\base.py", line 216, in invoke
    return self._call_with_config(
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\base.py", line 1940, in _call_with_config
    context.run(
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\config.py", line 428, in call_func_with_variable_args
    return func(input, **kwargs)  # type: ignore[call-arg]
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\prompts\base.py", line 189, in _format_prompt_with_error_handling
    _inner_input = self._validate_input(inner_input)
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\prompts\base.py", line 183, in _validate_input
    raise KeyError(
KeyError: 'Input to ChatPromptTemplate is missing variables {\'"entities"\'}.  Expected: [\'"entities"\', \'examples\', \'input\'] Received: [\'input\', \'examples\']\nNote: if you intended {"entities"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{"entities"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-07-04 19:26:21,646 - services.chat - INFO - [chat.py:82] - [Chat API] Successfully processed user input
2025-07-04 19:31:57,356 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-04 19:31:57,374 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-04 19:31:57,394 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-04 19:31:57,402 - faiss - INFO - [__init__.py:205] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-04 19:59:31,886 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-04 19:59:31,901 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-04 19:59:31,921 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-04 19:59:31,929 - faiss - INFO - [__init__.py:205] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-04 19:59:46,835 - services.chat - INFO - [chat.py:23] - [Chat API] Received chat request - seller_id: 1, user_id: user1, session_id: session_12345
2025-07-04 19:59:46,836 - services.chat - INFO - [chat.py:29] - [Chat API] Validating seller_id
2025-07-04 19:59:46,836 - services.chat - INFO - [chat.py:36] - [Chat API] Validating user_id
2025-07-04 19:59:46,836 - services.chat - INFO - [chat.py:43] - [Chat API] Checking if user exists
2025-07-04 19:59:46,836 - services.chat - INFO - [chat.py:58] - [Chat API] Formatting chat history
2025-07-04 19:59:46,837 - services.chat - INFO - [chat.py:66] - [Chat API] Creating multi-agent system
2025-07-04 19:59:46,837 - agent.agent - INFO - [agent.py:401] - [Multi-Agent System] Creating multi-agent system for seller_id: 1, user_id: user1
2025-07-04 19:59:46,837 - agent.agent - INFO - [agent.py:157] - [Intent Agent] Creating intent agent for seller_id: 1
2025-07-04 19:59:46,838 - agent.agent - INFO - [agent.py:520] - [Function Agent] Creating function agent for seller_id: 1, user_id: user1
2025-07-04 19:59:46,886 - agent.agent - INFO - [agent.py:548] - [Function Agent] Function agent created successfully
2025-07-04 19:59:46,914 - agent.agent - INFO - [agent.py:284] - [Response Agent] Creating response agent for seller_id: 1
2025-07-04 19:59:46,914 - agent.agent - INFO - [agent.py:394] - [Response Agent] Response agent created successfully
2025-07-04 19:59:46,914 - agent.agent - INFO - [agent.py:409] - [Multi-Agent System] All agents created successfully
2025-07-04 19:59:46,914 - agent.agent - INFO - [agent.py:423] - [Multi-Agent System] Function mapping created with 8 functions
2025-07-04 19:59:46,915 - services.chat - INFO - [chat.py:68] - [Chat API] Agent system created successfully for seller_id: 1, user_id: user1
2025-07-04 19:59:46,915 - services.chat - INFO - [chat.py:71] - [Chat API] Getting process_input function from agent system
2025-07-04 19:59:46,915 - services.chat - INFO - [chat.py:75] - [Chat API] Processing user input through multi-agent system
2025-07-04 19:59:46,915 - agent.agent - INFO - [agent.py:429] - [Multi-Agent System] Starting processing for seller_id: 1, user_id: user1
2025-07-04 19:59:46,915 - agent.agent - INFO - [agent.py:434] - [Multi-Agent System] Processing user input: hi
2025-07-04 19:59:46,915 - agent.agent - INFO - [agent.py:437] - [Multi-Agent System] Step 1: Detecting intent
2025-07-04 19:59:46,916 - agent.agent - INFO - [agent.py:200] - [Intent Agent] Processing input for seller_id: 1
2025-07-04 19:59:46,916 - agent.agent - INFO - [agent.py:205] - [Intent Agent] Step 1: Extracting entities
2025-07-04 19:59:46,916 - agent.agent - INFO - [agent.py:215] - [Intent Agent] Step 2: Classifying intent
2025-07-04 19:59:46,933 - agent.agent - ERROR - [agent.py:230] - [Intent Agent] Error in intent processing: name 'entity_result' is not defined
2025-07-04 19:59:46,934 - agent.agent - ERROR - [agent.py:513] - [Multi-Agent System] Error processing request: name 'entity_result' is not defined
2025-07-04 19:59:46,934 - agent.agent - ERROR - [agent.py:514] - [Multi-Agent System] Exception details:
Traceback (most recent call last):
  File "D:\Project\business-chat-assistent\chatbot\agent\agent.py", line 438, in process_input
    intent_result = intent_agent(user_input)
  File "D:\Project\business-chat-assistent\chatbot\agent\agent.py", line 216, in intent_chain
    intent_result = (
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\base.py", line 3045, in invoke
    input_ = context.run(step.invoke, input_, config, **kwargs)
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\base.py", line 3774, in invoke
    output = {key: future.result() for key, future in zip(steps, futures)}
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\base.py", line 3774, in <dictcomp>
    output = {key: future.result() for key, future in zip(steps, futures)}
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\concurrent\futures\_base.py", line 433, in result
    return self.__get_result()
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\concurrent\futures\_base.py", line 389, in __get_result
    raise self._exception
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\concurrent\futures\thread.py", line 52, in run
    result = self.fn(*self.args, **self.kwargs)
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\base.py", line 3758, in _invoke_step
    return context.run(
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\base.py", line 4772, in invoke
    return self._call_with_config(
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\base.py", line 1940, in _call_with_config
    context.run(
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\config.py", line 428, in call_func_with_variable_args
    return func(input, **kwargs)  # type: ignore[call-arg]
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\base.py", line 4630, in _invoke
    output = call_func_with_variable_args(
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\config.py", line 428, in call_func_with_variable_args
    return func(input, **kwargs)  # type: ignore[call-arg]
  File "D:\Project\business-chat-assistent\chatbot\agent\agent.py", line 219, in <lambda>
    "entity_analysis": lambda _: entity_result,
NameError: name 'entity_result' is not defined
2025-07-04 19:59:46,938 - services.chat - INFO - [chat.py:82] - [Chat API] Successfully processed user input
2025-07-04 20:00:41,573 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-04 20:00:41,588 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-04 20:00:41,606 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-04 20:00:41,613 - faiss - INFO - [__init__.py:205] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-04 20:00:42,277 - services.chat - INFO - [chat.py:23] - [Chat API] Received chat request - seller_id: 1, user_id: user1, session_id: session_12345
2025-07-04 20:00:42,278 - services.chat - INFO - [chat.py:29] - [Chat API] Validating seller_id
2025-07-04 20:00:42,278 - services.chat - INFO - [chat.py:36] - [Chat API] Validating user_id
2025-07-04 20:00:42,278 - services.chat - INFO - [chat.py:43] - [Chat API] Checking if user exists
2025-07-04 20:00:42,278 - services.chat - INFO - [chat.py:58] - [Chat API] Formatting chat history
2025-07-04 20:00:42,279 - services.chat - INFO - [chat.py:66] - [Chat API] Creating multi-agent system
2025-07-04 20:00:42,279 - agent.agent - INFO - [agent.py:401] - [Multi-Agent System] Creating multi-agent system for seller_id: 1, user_id: user1
2025-07-04 20:00:42,279 - agent.agent - INFO - [agent.py:157] - [Intent Agent] Creating intent agent for seller_id: 1
2025-07-04 20:00:42,280 - agent.agent - INFO - [agent.py:520] - [Function Agent] Creating function agent for seller_id: 1, user_id: user1
2025-07-04 20:00:42,327 - agent.agent - INFO - [agent.py:548] - [Function Agent] Function agent created successfully
2025-07-04 20:00:42,352 - agent.agent - INFO - [agent.py:284] - [Response Agent] Creating response agent for seller_id: 1
2025-07-04 20:00:42,353 - agent.agent - INFO - [agent.py:394] - [Response Agent] Response agent created successfully
2025-07-04 20:00:42,353 - agent.agent - INFO - [agent.py:409] - [Multi-Agent System] All agents created successfully
2025-07-04 20:00:42,354 - agent.agent - INFO - [agent.py:423] - [Multi-Agent System] Function mapping created with 8 functions
2025-07-04 20:00:42,354 - services.chat - INFO - [chat.py:68] - [Chat API] Agent system created successfully for seller_id: 1, user_id: user1
2025-07-04 20:00:42,354 - services.chat - INFO - [chat.py:71] - [Chat API] Getting process_input function from agent system
2025-07-04 20:00:42,354 - services.chat - INFO - [chat.py:75] - [Chat API] Processing user input through multi-agent system
2025-07-04 20:00:42,354 - agent.agent - INFO - [agent.py:429] - [Multi-Agent System] Starting processing for seller_id: 1, user_id: user1
2025-07-04 20:00:42,355 - agent.agent - INFO - [agent.py:434] - [Multi-Agent System] Processing user input: hi
2025-07-04 20:00:42,356 - agent.agent - INFO - [agent.py:437] - [Multi-Agent System] Step 1: Detecting intent
2025-07-04 20:00:42,356 - agent.agent - INFO - [agent.py:200] - [Intent Agent] Processing input for seller_id: 1
2025-07-04 20:00:42,356 - agent.agent - INFO - [agent.py:205] - [Intent Agent] Step 1: Extracting entities
2025-07-04 20:00:42,377 - agent.agent - ERROR - [agent.py:230] - [Intent Agent] Error in intent processing: "Input to ChatPromptTemplate is missing variables {''}.  Expected: ['', 'examples', 'input'] Received: ['input', 'examples']\nNote: if you intended {} to be part of the string and not a variable, please escape it with double curly braces like: '{{}}'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT "
2025-07-04 20:00:42,378 - agent.agent - ERROR - [agent.py:513] - [Multi-Agent System] Error processing request: "Input to ChatPromptTemplate is missing variables {''}.  Expected: ['', 'examples', 'input'] Received: ['input', 'examples']\nNote: if you intended {} to be part of the string and not a variable, please escape it with double curly braces like: '{{}}'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT "
2025-07-04 20:00:42,378 - agent.agent - ERROR - [agent.py:514] - [Multi-Agent System] Exception details:
Traceback (most recent call last):
  File "D:\Project\business-chat-assistent\chatbot\agent\agent.py", line 438, in process_input
    intent_result = intent_agent(user_input)
  File "D:\Project\business-chat-assistent\chatbot\agent\agent.py", line 206, in intent_chain
    entity_result = (
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\base.py", line 3047, in invoke
    input_ = context.run(step.invoke, input_, config)
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\prompts\base.py", line 216, in invoke
    return self._call_with_config(
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\base.py", line 1940, in _call_with_config
    context.run(
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\config.py", line 428, in call_func_with_variable_args
    return func(input, **kwargs)  # type: ignore[call-arg]
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\prompts\base.py", line 189, in _format_prompt_with_error_handling
    _inner_input = self._validate_input(inner_input)
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\prompts\base.py", line 183, in _validate_input
    raise KeyError(
KeyError: "Input to ChatPromptTemplate is missing variables {''}.  Expected: ['', 'examples', 'input'] Received: ['input', 'examples']\nNote: if you intended {} to be part of the string and not a variable, please escape it with double curly braces like: '{{}}'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT "
2025-07-04 20:00:42,382 - services.chat - INFO - [chat.py:82] - [Chat API] Successfully processed user input
2025-07-04 20:03:45,035 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-04 20:03:45,050 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-04 20:03:45,068 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-04 20:03:45,076 - faiss - INFO - [__init__.py:205] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-04 20:03:45,571 - services.chat - INFO - [chat.py:23] - [Chat API] Received chat request - seller_id: 1, user_id: user1, session_id: session_12345
2025-07-04 20:03:45,572 - services.chat - INFO - [chat.py:29] - [Chat API] Validating seller_id
2025-07-04 20:03:45,572 - services.chat - INFO - [chat.py:36] - [Chat API] Validating user_id
2025-07-04 20:03:45,572 - services.chat - INFO - [chat.py:43] - [Chat API] Checking if user exists
2025-07-04 20:03:45,573 - services.chat - INFO - [chat.py:58] - [Chat API] Formatting chat history
2025-07-04 20:03:45,573 - services.chat - INFO - [chat.py:66] - [Chat API] Creating multi-agent system
2025-07-04 20:03:45,573 - agent.agent - INFO - [agent.py:400] - [Multi-Agent System] Creating multi-agent system for seller_id: 1, user_id: user1
2025-07-04 20:03:45,573 - agent.agent - INFO - [agent.py:157] - [Intent Agent] Creating intent agent for seller_id: 1
2025-07-04 20:03:45,574 - agent.agent - INFO - [agent.py:519] - [Function Agent] Creating function agent for seller_id: 1, user_id: user1
2025-07-04 20:03:45,650 - agent.agent - INFO - [agent.py:547] - [Function Agent] Function agent created successfully
2025-07-04 20:03:45,681 - agent.agent - INFO - [agent.py:283] - [Response Agent] Creating response agent for seller_id: 1
2025-07-04 20:03:45,682 - agent.agent - INFO - [agent.py:393] - [Response Agent] Response agent created successfully
2025-07-04 20:03:45,682 - agent.agent - INFO - [agent.py:408] - [Multi-Agent System] All agents created successfully
2025-07-04 20:03:45,682 - agent.agent - INFO - [agent.py:422] - [Multi-Agent System] Function mapping created with 8 functions
2025-07-04 20:03:45,682 - services.chat - INFO - [chat.py:68] - [Chat API] Agent system created successfully for seller_id: 1, user_id: user1
2025-07-04 20:03:45,683 - services.chat - INFO - [chat.py:71] - [Chat API] Getting process_input function from agent system
2025-07-04 20:03:45,683 - services.chat - INFO - [chat.py:75] - [Chat API] Processing user input through multi-agent system
2025-07-04 20:03:45,683 - agent.agent - INFO - [agent.py:428] - [Multi-Agent System] Starting processing for seller_id: 1, user_id: user1
2025-07-04 20:03:45,683 - agent.agent - INFO - [agent.py:433] - [Multi-Agent System] Processing user input: hi
2025-07-04 20:03:45,683 - agent.agent - INFO - [agent.py:436] - [Multi-Agent System] Step 1: Detecting intent
2025-07-04 20:03:45,683 - agent.agent - INFO - [agent.py:199] - [Intent Agent] Processing input for seller_id: 1
2025-07-04 20:03:45,683 - agent.agent - INFO - [agent.py:204] - [Intent Agent] Step 1: Extracting entities
2025-07-04 20:03:45,697 - agent.agent - ERROR - [agent.py:229] - [Intent Agent] Error in intent processing: "Input to ChatPromptTemplate is missing variables {''}.  Expected: ['', 'examples', 'input'] Received: ['input', 'examples']\nNote: if you intended {} to be part of the string and not a variable, please escape it with double curly braces like: '{{}}'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT "
2025-07-04 20:03:45,697 - agent.agent - ERROR - [agent.py:512] - [Multi-Agent System] Error processing request: "Input to ChatPromptTemplate is missing variables {''}.  Expected: ['', 'examples', 'input'] Received: ['input', 'examples']\nNote: if you intended {} to be part of the string and not a variable, please escape it with double curly braces like: '{{}}'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT "
2025-07-04 20:03:45,697 - agent.agent - ERROR - [agent.py:513] - [Multi-Agent System] Exception details:
Traceback (most recent call last):
  File "D:\Project\business-chat-assistent\chatbot\agent\agent.py", line 437, in process_input
    intent_result = intent_agent(user_input)
  File "D:\Project\business-chat-assistent\chatbot\agent\agent.py", line 205, in intent_chain
    entity_result = (
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\base.py", line 3047, in invoke
    input_ = context.run(step.invoke, input_, config)
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\prompts\base.py", line 216, in invoke
    return self._call_with_config(
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\base.py", line 1940, in _call_with_config
    context.run(
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\config.py", line 428, in call_func_with_variable_args
    return func(input, **kwargs)  # type: ignore[call-arg]
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\prompts\base.py", line 189, in _format_prompt_with_error_handling
    _inner_input = self._validate_input(inner_input)
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\prompts\base.py", line 183, in _validate_input
    raise KeyError(
KeyError: "Input to ChatPromptTemplate is missing variables {''}.  Expected: ['', 'examples', 'input'] Received: ['input', 'examples']\nNote: if you intended {} to be part of the string and not a variable, please escape it with double curly braces like: '{{}}'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT "
2025-07-04 20:03:45,699 - services.chat - INFO - [chat.py:82] - [Chat API] Successfully processed user input
2025-07-04 20:22:13,371 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-04 20:22:13,427 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-04 20:22:13,448 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-04 20:22:13,457 - faiss - INFO - [__init__.py:205] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-04 20:22:13,878 - services.chat - INFO - [chat.py:23] - [Chat API] Received chat request - seller_id: 1, user_id: user1, session_id: session_12345
2025-07-04 20:22:13,878 - services.chat - INFO - [chat.py:29] - [Chat API] Validating seller_id
2025-07-04 20:22:13,878 - services.chat - INFO - [chat.py:36] - [Chat API] Validating user_id
2025-07-04 20:22:13,878 - services.chat - INFO - [chat.py:43] - [Chat API] Checking if user exists
2025-07-04 20:22:13,878 - services.chat - INFO - [chat.py:58] - [Chat API] Formatting chat history
2025-07-04 20:22:13,878 - services.chat - INFO - [chat.py:66] - [Chat API] Creating multi-agent system
2025-07-04 20:22:13,880 - agent.agent - INFO - [agent.py:400] - [Multi-Agent System] Creating multi-agent system for seller_id: 1, user_id: user1
2025-07-04 20:22:13,880 - agent.agent - INFO - [agent.py:157] - [Intent Agent] Creating intent agent for seller_id: 1
2025-07-04 20:22:13,880 - agent.agent - INFO - [agent.py:519] - [Function Agent] Creating function agent for seller_id: 1, user_id: user1
2025-07-04 20:22:13,930 - agent.agent - INFO - [agent.py:547] - [Function Agent] Function agent created successfully
2025-07-04 20:22:13,960 - agent.agent - INFO - [agent.py:283] - [Response Agent] Creating response agent for seller_id: 1
2025-07-04 20:22:13,961 - agent.agent - INFO - [agent.py:393] - [Response Agent] Response agent created successfully
2025-07-04 20:22:13,961 - agent.agent - INFO - [agent.py:408] - [Multi-Agent System] All agents created successfully
2025-07-04 20:22:13,962 - agent.agent - INFO - [agent.py:422] - [Multi-Agent System] Function mapping created with 8 functions
2025-07-04 20:22:13,962 - services.chat - INFO - [chat.py:68] - [Chat API] Agent system created successfully for seller_id: 1, user_id: user1
2025-07-04 20:22:13,962 - services.chat - INFO - [chat.py:71] - [Chat API] Getting process_input function from agent system
2025-07-04 20:22:13,963 - services.chat - INFO - [chat.py:75] - [Chat API] Processing user input through multi-agent system
2025-07-04 20:22:13,963 - agent.agent - INFO - [agent.py:428] - [Multi-Agent System] Starting processing for seller_id: 1, user_id: user1
2025-07-04 20:22:13,963 - agent.agent - INFO - [agent.py:433] - [Multi-Agent System] Processing user input: hi
2025-07-04 20:22:13,963 - agent.agent - INFO - [agent.py:436] - [Multi-Agent System] Step 1: Detecting intent
2025-07-04 20:22:13,963 - agent.agent - INFO - [agent.py:199] - [Intent Agent] Processing input for seller_id: 1
2025-07-04 20:22:13,964 - agent.agent - INFO - [agent.py:204] - [Intent Agent] Step 1: Extracting entities
2025-07-04 20:22:13,984 - agent.agent - ERROR - [agent.py:229] - [Intent Agent] Error in intent processing: "Input to ChatPromptTemplate is missing variables {''}.  Expected: ['', 'examples', 'input'] Received: ['input', 'examples']\nNote: if you intended {} to be part of the string and not a variable, please escape it with double curly braces like: '{{}}'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT "
2025-07-04 20:22:13,984 - agent.agent - ERROR - [agent.py:512] - [Multi-Agent System] Error processing request: "Input to ChatPromptTemplate is missing variables {''}.  Expected: ['', 'examples', 'input'] Received: ['input', 'examples']\nNote: if you intended {} to be part of the string and not a variable, please escape it with double curly braces like: '{{}}'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT "
2025-07-04 20:22:13,985 - agent.agent - ERROR - [agent.py:513] - [Multi-Agent System] Exception details:
Traceback (most recent call last):
  File "D:\Project\business-chat-assistent\chatbot\agent\agent.py", line 437, in process_input
    intent_result = intent_agent(user_input)
  File "D:\Project\business-chat-assistent\chatbot\agent\agent.py", line 205, in intent_chain
    entity_result = (
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\base.py", line 3047, in invoke
    input_ = context.run(step.invoke, input_, config)
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\prompts\base.py", line 216, in invoke
    return self._call_with_config(
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\base.py", line 1940, in _call_with_config
    context.run(
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\config.py", line 428, in call_func_with_variable_args
    return func(input, **kwargs)  # type: ignore[call-arg]
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\prompts\base.py", line 189, in _format_prompt_with_error_handling
    _inner_input = self._validate_input(inner_input)
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\prompts\base.py", line 183, in _validate_input
    raise KeyError(
KeyError: "Input to ChatPromptTemplate is missing variables {''}.  Expected: ['', 'examples', 'input'] Received: ['input', 'examples']\nNote: if you intended {} to be part of the string and not a variable, please escape it with double curly braces like: '{{}}'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT "
2025-07-04 20:22:13,988 - services.chat - INFO - [chat.py:82] - [Chat API] Successfully processed user input
2025-07-04 20:22:23,482 - services.chat - INFO - [chat.py:23] - [Chat API] Received chat request - seller_id: 1, user_id: user1, session_id: session_12345
2025-07-04 20:22:23,482 - services.chat - INFO - [chat.py:29] - [Chat API] Validating seller_id
2025-07-04 20:22:23,483 - services.chat - INFO - [chat.py:36] - [Chat API] Validating user_id
2025-07-04 20:22:23,483 - services.chat - INFO - [chat.py:43] - [Chat API] Checking if user exists
2025-07-04 20:22:23,483 - services.chat - INFO - [chat.py:58] - [Chat API] Formatting chat history
2025-07-04 20:22:23,483 - services.chat - INFO - [chat.py:66] - [Chat API] Creating multi-agent system
2025-07-04 20:22:23,484 - agent.agent - INFO - [agent.py:400] - [Multi-Agent System] Creating multi-agent system for seller_id: 1, user_id: user1
2025-07-04 20:22:23,484 - agent.agent - INFO - [agent.py:157] - [Intent Agent] Creating intent agent for seller_id: 1
2025-07-04 20:22:23,484 - agent.agent - INFO - [agent.py:519] - [Function Agent] Creating function agent for seller_id: 1, user_id: user1
2025-07-04 20:22:23,535 - agent.agent - INFO - [agent.py:547] - [Function Agent] Function agent created successfully
2025-07-04 20:22:23,561 - agent.agent - INFO - [agent.py:283] - [Response Agent] Creating response agent for seller_id: 1
2025-07-04 20:22:23,562 - agent.agent - INFO - [agent.py:393] - [Response Agent] Response agent created successfully
2025-07-04 20:22:23,562 - agent.agent - INFO - [agent.py:408] - [Multi-Agent System] All agents created successfully
2025-07-04 20:22:23,562 - agent.agent - INFO - [agent.py:422] - [Multi-Agent System] Function mapping created with 8 functions
2025-07-04 20:22:23,562 - services.chat - INFO - [chat.py:68] - [Chat API] Agent system created successfully for seller_id: 1, user_id: user1
2025-07-04 20:22:23,563 - services.chat - INFO - [chat.py:71] - [Chat API] Getting process_input function from agent system
2025-07-04 20:22:23,563 - services.chat - INFO - [chat.py:75] - [Chat API] Processing user input through multi-agent system
2025-07-04 20:22:23,563 - agent.agent - INFO - [agent.py:428] - [Multi-Agent System] Starting processing for seller_id: 1, user_id: user1
2025-07-04 20:22:23,563 - agent.agent - INFO - [agent.py:433] - [Multi-Agent System] Processing user input: i need watch
2025-07-04 20:22:23,563 - agent.agent - INFO - [agent.py:436] - [Multi-Agent System] Step 1: Detecting intent
2025-07-04 20:22:23,565 - agent.agent - INFO - [agent.py:199] - [Intent Agent] Processing input for seller_id: 1
2025-07-04 20:22:23,565 - agent.agent - INFO - [agent.py:204] - [Intent Agent] Step 1: Extracting entities
2025-07-04 20:22:23,568 - agent.agent - ERROR - [agent.py:229] - [Intent Agent] Error in intent processing: "Input to ChatPromptTemplate is missing variables {''}.  Expected: ['', 'examples', 'input'] Received: ['input', 'examples']\nNote: if you intended {} to be part of the string and not a variable, please escape it with double curly braces like: '{{}}'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT "
2025-07-04 20:22:23,568 - agent.agent - ERROR - [agent.py:512] - [Multi-Agent System] Error processing request: "Input to ChatPromptTemplate is missing variables {''}.  Expected: ['', 'examples', 'input'] Received: ['input', 'examples']\nNote: if you intended {} to be part of the string and not a variable, please escape it with double curly braces like: '{{}}'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT "
2025-07-04 20:22:23,568 - agent.agent - ERROR - [agent.py:513] - [Multi-Agent System] Exception details:
Traceback (most recent call last):
  File "D:\Project\business-chat-assistent\chatbot\agent\agent.py", line 437, in process_input
    intent_result = intent_agent(user_input)
  File "D:\Project\business-chat-assistent\chatbot\agent\agent.py", line 205, in intent_chain
    entity_result = (
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\base.py", line 3047, in invoke
    input_ = context.run(step.invoke, input_, config)
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\prompts\base.py", line 216, in invoke
    return self._call_with_config(
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\base.py", line 1940, in _call_with_config
    context.run(
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\config.py", line 428, in call_func_with_variable_args
    return func(input, **kwargs)  # type: ignore[call-arg]
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\prompts\base.py", line 189, in _format_prompt_with_error_handling
    _inner_input = self._validate_input(inner_input)
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\prompts\base.py", line 183, in _validate_input
    raise KeyError(
KeyError: "Input to ChatPromptTemplate is missing variables {''}.  Expected: ['', 'examples', 'input'] Received: ['input', 'examples']\nNote: if you intended {} to be part of the string and not a variable, please escape it with double curly braces like: '{{}}'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT "
2025-07-04 20:22:23,569 - services.chat - INFO - [chat.py:82] - [Chat API] Successfully processed user input
2025-07-04 20:23:10,990 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-04 20:23:11,003 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-04 20:23:11,027 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-04 20:23:11,034 - faiss - INFO - [__init__.py:205] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-04 20:23:13,345 - services.chat - INFO - [chat.py:23] - [Chat API] Received chat request - seller_id: 1, user_id: user1, session_id: session_12345
2025-07-04 20:23:13,345 - services.chat - INFO - [chat.py:29] - [Chat API] Validating seller_id
2025-07-04 20:23:13,345 - services.chat - INFO - [chat.py:36] - [Chat API] Validating user_id
2025-07-04 20:23:13,346 - services.chat - INFO - [chat.py:43] - [Chat API] Checking if user exists
2025-07-04 20:23:13,346 - services.chat - INFO - [chat.py:58] - [Chat API] Formatting chat history
2025-07-04 20:23:13,346 - services.chat - INFO - [chat.py:66] - [Chat API] Creating multi-agent system
2025-07-04 20:23:13,346 - agent.agent - INFO - [agent.py:400] - [Multi-Agent System] Creating multi-agent system for seller_id: 1, user_id: user1
2025-07-04 20:23:13,347 - agent.agent - INFO - [agent.py:157] - [Intent Agent] Creating intent agent for seller_id: 1
2025-07-04 20:23:13,347 - agent.agent - INFO - [agent.py:519] - [Function Agent] Creating function agent for seller_id: 1, user_id: user1
2025-07-04 20:23:13,409 - agent.agent - INFO - [agent.py:547] - [Function Agent] Function agent created successfully
2025-07-04 20:23:13,440 - agent.agent - INFO - [agent.py:283] - [Response Agent] Creating response agent for seller_id: 1
2025-07-04 20:23:13,441 - agent.agent - INFO - [agent.py:393] - [Response Agent] Response agent created successfully
2025-07-04 20:23:13,441 - agent.agent - INFO - [agent.py:408] - [Multi-Agent System] All agents created successfully
2025-07-04 20:23:13,442 - agent.agent - INFO - [agent.py:422] - [Multi-Agent System] Function mapping created with 8 functions
2025-07-04 20:23:13,442 - services.chat - INFO - [chat.py:68] - [Chat API] Agent system created successfully for seller_id: 1, user_id: user1
2025-07-04 20:23:13,442 - services.chat - INFO - [chat.py:71] - [Chat API] Getting process_input function from agent system
2025-07-04 20:23:13,443 - services.chat - INFO - [chat.py:75] - [Chat API] Processing user input through multi-agent system
2025-07-04 20:23:13,443 - agent.agent - INFO - [agent.py:428] - [Multi-Agent System] Starting processing for seller_id: 1, user_id: user1
2025-07-04 20:23:13,443 - agent.agent - INFO - [agent.py:433] - [Multi-Agent System] Processing user input: I need watch
2025-07-04 20:23:13,443 - agent.agent - INFO - [agent.py:436] - [Multi-Agent System] Step 1: Detecting intent
2025-07-04 20:23:13,444 - agent.agent - INFO - [agent.py:199] - [Intent Agent] Processing input for seller_id: 1
2025-07-04 20:23:13,444 - agent.agent - INFO - [agent.py:204] - [Intent Agent] Step 1: Extracting entities
2025-07-04 20:23:13,459 - agent.agent - ERROR - [agent.py:229] - [Intent Agent] Error in intent processing: "Input to ChatPromptTemplate is missing variables {''}.  Expected: ['', 'examples', 'input'] Received: ['input', 'examples']\nNote: if you intended {} to be part of the string and not a variable, please escape it with double curly braces like: '{{}}'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT "
2025-07-04 20:23:13,459 - agent.agent - ERROR - [agent.py:512] - [Multi-Agent System] Error processing request: "Input to ChatPromptTemplate is missing variables {''}.  Expected: ['', 'examples', 'input'] Received: ['input', 'examples']\nNote: if you intended {} to be part of the string and not a variable, please escape it with double curly braces like: '{{}}'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT "
2025-07-04 20:23:13,459 - agent.agent - ERROR - [agent.py:513] - [Multi-Agent System] Exception details:
Traceback (most recent call last):
  File "D:\Project\business-chat-assistent\chatbot\agent\agent.py", line 437, in process_input
    intent_result = intent_agent(user_input)
  File "D:\Project\business-chat-assistent\chatbot\agent\agent.py", line 205, in intent_chain
    entity_result = (
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\base.py", line 3047, in invoke
    input_ = context.run(step.invoke, input_, config)
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\prompts\base.py", line 216, in invoke
    return self._call_with_config(
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\base.py", line 1940, in _call_with_config
    context.run(
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\config.py", line 428, in call_func_with_variable_args
    return func(input, **kwargs)  # type: ignore[call-arg]
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\prompts\base.py", line 189, in _format_prompt_with_error_handling
    _inner_input = self._validate_input(inner_input)
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\prompts\base.py", line 183, in _validate_input
    raise KeyError(
KeyError: "Input to ChatPromptTemplate is missing variables {''}.  Expected: ['', 'examples', 'input'] Received: ['input', 'examples']\nNote: if you intended {} to be part of the string and not a variable, please escape it with double curly braces like: '{{}}'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT "
2025-07-04 20:23:13,462 - services.chat - INFO - [chat.py:82] - [Chat API] Successfully processed user input
2025-07-04 20:25:02,346 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-04 20:25:02,361 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-04 20:25:02,381 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-04 20:25:02,388 - faiss - INFO - [__init__.py:205] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-04 20:25:03,500 - services.chat - INFO - [chat.py:23] - [Chat API] Received chat request - seller_id: 1, user_id: user1, session_id: session_12345
2025-07-04 20:25:03,500 - services.chat - INFO - [chat.py:29] - [Chat API] Validating seller_id
2025-07-04 20:25:03,500 - services.chat - INFO - [chat.py:36] - [Chat API] Validating user_id
2025-07-04 20:25:03,501 - services.chat - INFO - [chat.py:43] - [Chat API] Checking if user exists
2025-07-04 20:25:03,501 - services.chat - INFO - [chat.py:58] - [Chat API] Formatting chat history
2025-07-04 20:25:03,501 - services.chat - INFO - [chat.py:66] - [Chat API] Creating multi-agent system
2025-07-04 20:25:03,502 - agent.agent - INFO - [agent.py:400] - [Multi-Agent System] Creating multi-agent system for seller_id: 1, user_id: user1
2025-07-04 20:25:03,502 - agent.agent - INFO - [agent.py:157] - [Intent Agent] Creating intent agent for seller_id: 1
2025-07-04 20:25:03,503 - agent.agent - INFO - [agent.py:519] - [Function Agent] Creating function agent for seller_id: 1, user_id: user1
2025-07-04 20:25:03,553 - agent.agent - INFO - [agent.py:547] - [Function Agent] Function agent created successfully
2025-07-04 20:25:03,582 - agent.agent - INFO - [agent.py:283] - [Response Agent] Creating response agent for seller_id: 1
2025-07-04 20:25:03,583 - agent.agent - INFO - [agent.py:393] - [Response Agent] Response agent created successfully
2025-07-04 20:25:03,583 - agent.agent - INFO - [agent.py:408] - [Multi-Agent System] All agents created successfully
2025-07-04 20:25:03,583 - agent.agent - INFO - [agent.py:422] - [Multi-Agent System] Function mapping created with 8 functions
2025-07-04 20:25:03,583 - services.chat - INFO - [chat.py:68] - [Chat API] Agent system created successfully for seller_id: 1, user_id: user1
2025-07-04 20:25:03,583 - services.chat - INFO - [chat.py:71] - [Chat API] Getting process_input function from agent system
2025-07-04 20:25:03,584 - services.chat - INFO - [chat.py:75] - [Chat API] Processing user input through multi-agent system
2025-07-04 20:25:03,584 - agent.agent - INFO - [agent.py:428] - [Multi-Agent System] Starting processing for seller_id: 1, user_id: user1
2025-07-04 20:25:03,584 - agent.agent - INFO - [agent.py:433] - [Multi-Agent System] Processing user input: I need watch
2025-07-04 20:25:03,585 - agent.agent - INFO - [agent.py:436] - [Multi-Agent System] Step 1: Detecting intent
2025-07-04 20:25:03,585 - agent.agent - INFO - [agent.py:199] - [Intent Agent] Processing input for seller_id: 1
2025-07-04 20:25:03,585 - agent.agent - INFO - [agent.py:204] - [Intent Agent] Step 1: Extracting entities
2025-07-04 20:25:03,601 - agent.agent - ERROR - [agent.py:229] - [Intent Agent] Error in intent processing: 'Input to ChatPromptTemplate is missing variables {\'\\n                "entities"\'}.  Expected: [\'\\n                "entities"\', \'examples\', \'input\'] Received: [\'input\', \'examples\']\nNote: if you intended {\n                "entities"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n                "entities"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-07-04 20:25:03,602 - agent.agent - ERROR - [agent.py:512] - [Multi-Agent System] Error processing request: 'Input to ChatPromptTemplate is missing variables {\'\\n                "entities"\'}.  Expected: [\'\\n                "entities"\', \'examples\', \'input\'] Received: [\'input\', \'examples\']\nNote: if you intended {\n                "entities"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n                "entities"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-07-04 20:25:03,602 - agent.agent - ERROR - [agent.py:513] - [Multi-Agent System] Exception details:
Traceback (most recent call last):
  File "D:\Project\business-chat-assistent\chatbot\agent\agent.py", line 437, in process_input
    intent_result = intent_agent(user_input)
  File "D:\Project\business-chat-assistent\chatbot\agent\agent.py", line 205, in intent_chain
    entity_result = (
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\base.py", line 3047, in invoke
    input_ = context.run(step.invoke, input_, config)
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\prompts\base.py", line 216, in invoke
    return self._call_with_config(
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\base.py", line 1940, in _call_with_config
    context.run(
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\config.py", line 428, in call_func_with_variable_args
    return func(input, **kwargs)  # type: ignore[call-arg]
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\prompts\base.py", line 189, in _format_prompt_with_error_handling
    _inner_input = self._validate_input(inner_input)
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\prompts\base.py", line 183, in _validate_input
    raise KeyError(
KeyError: 'Input to ChatPromptTemplate is missing variables {\'\\n                "entities"\'}.  Expected: [\'\\n                "entities"\', \'examples\', \'input\'] Received: [\'input\', \'examples\']\nNote: if you intended {\n                "entities"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n                "entities"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-07-04 20:25:03,604 - services.chat - INFO - [chat.py:82] - [Chat API] Successfully processed user input
2025-07-04 20:26:24,950 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-04 20:26:24,964 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-04 20:26:24,987 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-04 20:26:24,996 - faiss - INFO - [__init__.py:205] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-04 20:27:39,732 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-04 20:27:39,749 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-04 20:27:39,768 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-04 20:27:39,777 - faiss - INFO - [__init__.py:205] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-04 20:27:42,023 - services.chat - INFO - [chat.py:23] - [Chat API] Received chat request - seller_id: 1, user_id: user1, session_id: session_12345
2025-07-04 20:27:42,023 - services.chat - INFO - [chat.py:29] - [Chat API] Validating seller_id
2025-07-04 20:27:42,023 - services.chat - INFO - [chat.py:36] - [Chat API] Validating user_id
2025-07-04 20:27:42,023 - services.chat - INFO - [chat.py:43] - [Chat API] Checking if user exists
2025-07-04 20:27:42,023 - services.chat - INFO - [chat.py:58] - [Chat API] Formatting chat history
2025-07-04 20:27:42,024 - services.chat - INFO - [chat.py:66] - [Chat API] Creating multi-agent system
2025-07-04 20:27:42,024 - agent.agent - INFO - [agent.py:400] - [Multi-Agent System] Creating multi-agent system for seller_id: 1, user_id: user1
2025-07-04 20:27:42,024 - agent.agent - INFO - [agent.py:157] - [Intent Agent] Creating intent agent for seller_id: 1
2025-07-04 20:27:42,025 - agent.agent - INFO - [agent.py:519] - [Function Agent] Creating function agent for seller_id: 1, user_id: user1
2025-07-04 20:27:42,073 - agent.agent - INFO - [agent.py:547] - [Function Agent] Function agent created successfully
2025-07-04 20:27:42,102 - agent.agent - INFO - [agent.py:283] - [Response Agent] Creating response agent for seller_id: 1
2025-07-04 20:27:42,103 - agent.agent - INFO - [agent.py:393] - [Response Agent] Response agent created successfully
2025-07-04 20:27:42,103 - agent.agent - INFO - [agent.py:408] - [Multi-Agent System] All agents created successfully
2025-07-04 20:27:42,104 - agent.agent - INFO - [agent.py:422] - [Multi-Agent System] Function mapping created with 8 functions
2025-07-04 20:27:42,104 - services.chat - INFO - [chat.py:68] - [Chat API] Agent system created successfully for seller_id: 1, user_id: user1
2025-07-04 20:27:42,104 - services.chat - INFO - [chat.py:71] - [Chat API] Getting process_input function from agent system
2025-07-04 20:27:42,104 - services.chat - INFO - [chat.py:75] - [Chat API] Processing user input through multi-agent system
2025-07-04 20:27:42,104 - agent.agent - INFO - [agent.py:428] - [Multi-Agent System] Starting processing for seller_id: 1, user_id: user1
2025-07-04 20:27:42,105 - agent.agent - INFO - [agent.py:433] - [Multi-Agent System] Processing user input: I need watch
2025-07-04 20:27:42,105 - agent.agent - INFO - [agent.py:436] - [Multi-Agent System] Step 1: Detecting intent
2025-07-04 20:27:42,105 - agent.agent - INFO - [agent.py:199] - [Intent Agent] Processing input for seller_id: 1
2025-07-04 20:27:42,105 - agent.agent - INFO - [agent.py:204] - [Intent Agent] Step 1: Extracting entities
2025-07-04 20:27:42,120 - agent.agent - ERROR - [agent.py:229] - [Intent Agent] Error in intent processing: "Input to ChatPromptTemplate is missing variables {''}.  Expected: ['', 'examples', 'input'] Received: ['input', 'examples']\nNote: if you intended {} to be part of the string and not a variable, please escape it with double curly braces like: '{{}}'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT "
2025-07-04 20:27:42,121 - agent.agent - ERROR - [agent.py:512] - [Multi-Agent System] Error processing request: "Input to ChatPromptTemplate is missing variables {''}.  Expected: ['', 'examples', 'input'] Received: ['input', 'examples']\nNote: if you intended {} to be part of the string and not a variable, please escape it with double curly braces like: '{{}}'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT "
2025-07-04 20:27:42,122 - agent.agent - ERROR - [agent.py:513] - [Multi-Agent System] Exception details:
Traceback (most recent call last):
  File "D:\Project\business-chat-assistent\chatbot\agent\agent.py", line 437, in process_input
    intent_result = intent_agent(user_input)
  File "D:\Project\business-chat-assistent\chatbot\agent\agent.py", line 205, in intent_chain
    entity_result = (
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\base.py", line 3047, in invoke
    input_ = context.run(step.invoke, input_, config)
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\prompts\base.py", line 216, in invoke
    return self._call_with_config(
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\base.py", line 1940, in _call_with_config
    context.run(
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\config.py", line 428, in call_func_with_variable_args
    return func(input, **kwargs)  # type: ignore[call-arg]
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\prompts\base.py", line 189, in _format_prompt_with_error_handling
    _inner_input = self._validate_input(inner_input)
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\prompts\base.py", line 183, in _validate_input
    raise KeyError(
KeyError: "Input to ChatPromptTemplate is missing variables {''}.  Expected: ['', 'examples', 'input'] Received: ['input', 'examples']\nNote: if you intended {} to be part of the string and not a variable, please escape it with double curly braces like: '{{}}'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT "
2025-07-04 20:27:42,123 - services.chat - INFO - [chat.py:82] - [Chat API] Successfully processed user input
2025-07-04 20:39:15,742 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-04 20:39:15,769 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-04 20:39:15,795 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-04 20:39:15,803 - faiss - INFO - [__init__.py:205] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-04 20:43:10,643 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-04 20:43:10,658 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-04 20:43:10,677 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-04 20:43:10,684 - faiss - INFO - [__init__.py:205] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-04 20:43:31,405 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-04 20:43:31,435 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-04 20:43:31,467 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-04 20:43:31,482 - faiss - INFO - [__init__.py:205] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-04 20:43:34,955 - services.chat - INFO - [chat.py:23] - [Chat API] Received chat request - seller_id: 1, user_id: user1, session_id: session_12345
2025-07-04 20:43:34,956 - services.chat - INFO - [chat.py:29] - [Chat API] Validating seller_id
2025-07-04 20:43:34,956 - services.chat - INFO - [chat.py:36] - [Chat API] Validating user_id
2025-07-04 20:43:34,956 - services.chat - INFO - [chat.py:43] - [Chat API] Checking if user exists
2025-07-04 20:43:34,956 - services.chat - INFO - [chat.py:58] - [Chat API] Formatting chat history
2025-07-04 20:43:34,957 - services.chat - INFO - [chat.py:66] - [Chat API] Creating multi-agent system
2025-07-04 20:43:34,957 - agent.agent - INFO - [agent.py:400] - [Multi-Agent System] Creating multi-agent system for seller_id: 1, user_id: user1
2025-07-04 20:43:34,957 - agent.agent - INFO - [agent.py:157] - [Intent Agent] Creating intent agent for seller_id: 1
2025-07-04 20:43:34,957 - agent.agent - INFO - [agent.py:519] - [Function Agent] Creating function agent for seller_id: 1, user_id: user1
2025-07-04 20:43:35,009 - agent.agent - INFO - [agent.py:547] - [Function Agent] Function agent created successfully
2025-07-04 20:43:35,035 - agent.agent - INFO - [agent.py:283] - [Response Agent] Creating response agent for seller_id: 1
2025-07-04 20:43:35,035 - agent.agent - INFO - [agent.py:393] - [Response Agent] Response agent created successfully
2025-07-04 20:43:35,036 - agent.agent - INFO - [agent.py:408] - [Multi-Agent System] All agents created successfully
2025-07-04 20:43:35,036 - agent.agent - INFO - [agent.py:422] - [Multi-Agent System] Function mapping created with 8 functions
2025-07-04 20:43:35,036 - services.chat - INFO - [chat.py:68] - [Chat API] Agent system created successfully for seller_id: 1, user_id: user1
2025-07-04 20:43:35,036 - services.chat - INFO - [chat.py:71] - [Chat API] Getting process_input function from agent system
2025-07-04 20:43:35,037 - services.chat - INFO - [chat.py:75] - [Chat API] Processing user input through multi-agent system
2025-07-04 20:43:35,037 - agent.agent - INFO - [agent.py:428] - [Multi-Agent System] Starting processing for seller_id: 1, user_id: user1
2025-07-04 20:43:35,037 - agent.agent - INFO - [agent.py:433] - [Multi-Agent System] Processing user input: I need watch
2025-07-04 20:43:35,037 - agent.agent - INFO - [agent.py:436] - [Multi-Agent System] Step 1: Detecting intent
2025-07-04 20:43:35,038 - agent.agent - INFO - [agent.py:199] - [Intent Agent] Processing input for seller_id: 1
2025-07-04 20:43:35,038 - agent.agent - INFO - [agent.py:204] - [Intent Agent] Step 1: Extracting entities
2025-07-04 20:43:35,052 - agent.agent - ERROR - [agent.py:229] - [Intent Agent] Error in intent processing: 'Input to ChatPromptTemplate is missing variables {\' \\n                "entities"\'}.  Expected: [\' \\n                "entities"\', \'examples\', \'input\'] Received: [\'input\', \'examples\']\nNote: if you intended { \n                "entities"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{ \n                "entities"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-07-04 20:43:35,052 - agent.agent - ERROR - [agent.py:512] - [Multi-Agent System] Error processing request: 'Input to ChatPromptTemplate is missing variables {\' \\n                "entities"\'}.  Expected: [\' \\n                "entities"\', \'examples\', \'input\'] Received: [\'input\', \'examples\']\nNote: if you intended { \n                "entities"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{ \n                "entities"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-07-04 20:43:35,053 - agent.agent - ERROR - [agent.py:513] - [Multi-Agent System] Exception details:
Traceback (most recent call last):
  File "D:\Project\business-chat-assistent\chatbot\agent\agent.py", line 437, in process_input
    intent_result = intent_agent(user_input)
  File "D:\Project\business-chat-assistent\chatbot\agent\agent.py", line 205, in intent_chain
    entity_result = (
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\base.py", line 3047, in invoke
    input_ = context.run(step.invoke, input_, config)
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\prompts\base.py", line 216, in invoke
    return self._call_with_config(
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\base.py", line 1940, in _call_with_config
    context.run(
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\config.py", line 428, in call_func_with_variable_args
    return func(input, **kwargs)  # type: ignore[call-arg]
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\prompts\base.py", line 189, in _format_prompt_with_error_handling
    _inner_input = self._validate_input(inner_input)
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\prompts\base.py", line 183, in _validate_input
    raise KeyError(
KeyError: 'Input to ChatPromptTemplate is missing variables {\' \\n                "entities"\'}.  Expected: [\' \\n                "entities"\', \'examples\', \'input\'] Received: [\'input\', \'examples\']\nNote: if you intended { \n                "entities"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{ \n                "entities"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-07-04 20:43:35,055 - services.chat - INFO - [chat.py:82] - [Chat API] Successfully processed user input
2025-07-04 20:47:26,153 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-04 20:47:26,167 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-04 20:47:26,185 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-04 20:47:26,193 - faiss - INFO - [__init__.py:205] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-04 20:47:27,399 - services.chat - INFO - [chat.py:23] - [Chat API] Received chat request - seller_id: 1, user_id: user1, session_id: session_12345
2025-07-04 20:47:27,400 - services.chat - INFO - [chat.py:29] - [Chat API] Validating seller_id
2025-07-04 20:47:27,400 - services.chat - INFO - [chat.py:36] - [Chat API] Validating user_id
2025-07-04 20:47:27,400 - services.chat - INFO - [chat.py:43] - [Chat API] Checking if user exists
2025-07-04 20:47:27,400 - services.chat - INFO - [chat.py:58] - [Chat API] Formatting chat history
2025-07-04 20:47:27,401 - services.chat - INFO - [chat.py:66] - [Chat API] Creating multi-agent system
2025-07-04 20:47:27,401 - agent.agent - INFO - [agent.py:403] - [Multi-Agent System] Creating multi-agent system for seller_id: 1, user_id: user1
2025-07-04 20:47:27,401 - agent.agent - INFO - [agent.py:157] - [Intent Agent] Creating intent agent for seller_id: 1
2025-07-04 20:47:27,402 - agent.agent - ERROR - [agent.py:427] - [Multi-Agent System] Error creating agents: 'examples'
2025-07-04 20:47:27,402 - services.chat - ERROR - [chat.py:94] - [Chat API] Unexpected error: 'examples'
2025-07-04 20:47:27,403 - services.chat - ERROR - [chat.py:95] - [Chat API] Exception details:
Traceback (most recent call last):
  File "D:\Project\business-chat-assistent\chatbot\services\chat.py", line 67, in chat
    agent_system = create_multi_agent_system(request.seller_id, user_id)
  File "D:\Project\business-chat-assistent\chatbot\agent\agent.py", line 406, in create_multi_agent_system
    intent_agent = create_intent_agent(seller_id)
  File "D:\Project\business-chat-assistent\chatbot\agent\agent.py", line 182, in create_intent_agent
    ("system", """
KeyError: 'examples'
2025-07-04 20:48:19,833 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-04 20:48:19,848 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-04 20:48:19,869 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-04 20:48:19,875 - faiss - INFO - [__init__.py:205] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-04 20:48:20,255 - services.chat - INFO - [chat.py:23] - [Chat API] Received chat request - seller_id: 1, user_id: user1, session_id: session_12345
2025-07-04 20:48:20,256 - services.chat - INFO - [chat.py:29] - [Chat API] Validating seller_id
2025-07-04 20:48:20,257 - services.chat - INFO - [chat.py:36] - [Chat API] Validating user_id
2025-07-04 20:48:20,257 - services.chat - INFO - [chat.py:43] - [Chat API] Checking if user exists
2025-07-04 20:48:20,257 - services.chat - INFO - [chat.py:58] - [Chat API] Formatting chat history
2025-07-04 20:48:20,257 - services.chat - INFO - [chat.py:66] - [Chat API] Creating multi-agent system
2025-07-04 20:48:20,258 - agent.agent - INFO - [agent.py:403] - [Multi-Agent System] Creating multi-agent system for seller_id: 1, user_id: user1
2025-07-04 20:48:20,258 - agent.agent - INFO - [agent.py:157] - [Intent Agent] Creating intent agent for seller_id: 1
2025-07-04 20:48:20,258 - agent.agent - INFO - [agent.py:522] - [Function Agent] Creating function agent for seller_id: 1, user_id: user1
2025-07-04 20:48:20,304 - agent.agent - INFO - [agent.py:550] - [Function Agent] Function agent created successfully
2025-07-04 20:48:20,330 - agent.agent - INFO - [agent.py:286] - [Response Agent] Creating response agent for seller_id: 1
2025-07-04 20:48:20,330 - agent.agent - INFO - [agent.py:396] - [Response Agent] Response agent created successfully
2025-07-04 20:48:20,331 - agent.agent - INFO - [agent.py:411] - [Multi-Agent System] All agents created successfully
2025-07-04 20:48:20,331 - agent.agent - INFO - [agent.py:425] - [Multi-Agent System] Function mapping created with 8 functions
2025-07-04 20:48:20,331 - services.chat - INFO - [chat.py:68] - [Chat API] Agent system created successfully for seller_id: 1, user_id: user1
2025-07-04 20:48:20,332 - services.chat - INFO - [chat.py:71] - [Chat API] Getting process_input function from agent system
2025-07-04 20:48:20,332 - services.chat - INFO - [chat.py:75] - [Chat API] Processing user input through multi-agent system
2025-07-04 20:48:20,332 - agent.agent - INFO - [agent.py:431] - [Multi-Agent System] Starting processing for seller_id: 1, user_id: user1
2025-07-04 20:48:20,332 - agent.agent - INFO - [agent.py:436] - [Multi-Agent System] Processing user input: I need watch
2025-07-04 20:48:20,332 - agent.agent - INFO - [agent.py:439] - [Multi-Agent System] Step 1: Detecting intent
2025-07-04 20:48:20,332 - agent.agent - INFO - [agent.py:202] - [Intent Agent] Processing input for seller_id: 1
2025-07-04 20:48:20,333 - agent.agent - INFO - [agent.py:207] - [Intent Agent] Step 1: Extracting entities
2025-07-04 20:48:20,349 - agent.agent - ERROR - [agent.py:232] - [Intent Agent] Error in intent processing: 'Input to ChatPromptTemplate is missing variables {\' \\n                "entities"\'}.  Expected: [\' \\n                "entities"\', \'examples\', \'input\'] Received: [\'input\', \'examples\']\nNote: if you intended { \n                "entities"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{ \n                "entities"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-07-04 20:48:20,351 - agent.agent - ERROR - [agent.py:515] - [Multi-Agent System] Error processing request: 'Input to ChatPromptTemplate is missing variables {\' \\n                "entities"\'}.  Expected: [\' \\n                "entities"\', \'examples\', \'input\'] Received: [\'input\', \'examples\']\nNote: if you intended { \n                "entities"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{ \n                "entities"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-07-04 20:48:20,351 - agent.agent - ERROR - [agent.py:516] - [Multi-Agent System] Exception details:
Traceback (most recent call last):
  File "D:\Project\business-chat-assistent\chatbot\agent\agent.py", line 440, in process_input
    intent_result = intent_agent(user_input)
  File "D:\Project\business-chat-assistent\chatbot\agent\agent.py", line 208, in intent_chain
    entity_result = (
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\base.py", line 3047, in invoke
    input_ = context.run(step.invoke, input_, config)
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\prompts\base.py", line 216, in invoke
    return self._call_with_config(
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\base.py", line 1940, in _call_with_config
    context.run(
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\config.py", line 428, in call_func_with_variable_args
    return func(input, **kwargs)  # type: ignore[call-arg]
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\prompts\base.py", line 189, in _format_prompt_with_error_handling
    _inner_input = self._validate_input(inner_input)
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\prompts\base.py", line 183, in _validate_input
    raise KeyError(
KeyError: 'Input to ChatPromptTemplate is missing variables {\' \\n                "entities"\'}.  Expected: [\' \\n                "entities"\', \'examples\', \'input\'] Received: [\'input\', \'examples\']\nNote: if you intended { \n                "entities"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{ \n                "entities"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-07-04 20:48:20,354 - services.chat - INFO - [chat.py:82] - [Chat API] Successfully processed user input
2025-07-04 20:49:39,597 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-04 20:49:39,612 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-04 20:49:39,632 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-04 20:49:39,640 - faiss - INFO - [__init__.py:205] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-04 20:50:33,260 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-04 20:50:33,274 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-04 20:50:33,294 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-04 20:50:33,300 - faiss - INFO - [__init__.py:205] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-04 20:52:34,443 - services.chat - INFO - [chat.py:23] - [Chat API] Received chat request - seller_id: 1, user_id: user1, session_id: session_12345
2025-07-04 20:52:34,444 - services.chat - INFO - [chat.py:29] - [Chat API] Validating seller_id
2025-07-04 20:52:34,444 - services.chat - INFO - [chat.py:36] - [Chat API] Validating user_id
2025-07-04 20:52:34,444 - services.chat - INFO - [chat.py:43] - [Chat API] Checking if user exists
2025-07-04 20:52:34,445 - services.chat - INFO - [chat.py:58] - [Chat API] Formatting chat history
2025-07-04 20:52:34,445 - services.chat - INFO - [chat.py:66] - [Chat API] Creating multi-agent system
2025-07-04 20:52:34,445 - agent.agent - INFO - [agent.py:399] - [Multi-Agent System] Creating multi-agent system for seller_id: 1, user_id: user1
2025-07-04 20:52:34,445 - agent.agent - INFO - [agent.py:157] - [Intent Agent] Creating intent agent for seller_id: 1
2025-07-04 20:52:34,446 - agent.agent - INFO - [agent.py:518] - [Function Agent] Creating function agent for seller_id: 1, user_id: user1
2025-07-04 20:52:34,498 - agent.agent - INFO - [agent.py:546] - [Function Agent] Function agent created successfully
2025-07-04 20:52:34,524 - agent.agent - INFO - [agent.py:282] - [Response Agent] Creating response agent for seller_id: 1
2025-07-04 20:52:34,524 - agent.agent - INFO - [agent.py:392] - [Response Agent] Response agent created successfully
2025-07-04 20:52:34,524 - agent.agent - INFO - [agent.py:407] - [Multi-Agent System] All agents created successfully
2025-07-04 20:52:34,525 - agent.agent - INFO - [agent.py:421] - [Multi-Agent System] Function mapping created with 8 functions
2025-07-04 20:52:34,525 - services.chat - INFO - [chat.py:68] - [Chat API] Agent system created successfully for seller_id: 1, user_id: user1
2025-07-04 20:52:34,525 - services.chat - INFO - [chat.py:71] - [Chat API] Getting process_input function from agent system
2025-07-04 20:52:34,526 - services.chat - INFO - [chat.py:75] - [Chat API] Processing user input through multi-agent system
2025-07-04 20:52:34,526 - agent.agent - INFO - [agent.py:427] - [Multi-Agent System] Starting processing for seller_id: 1, user_id: user1
2025-07-04 20:52:34,526 - agent.agent - INFO - [agent.py:432] - [Multi-Agent System] Processing user input: I need watch
2025-07-04 20:52:34,526 - agent.agent - INFO - [agent.py:435] - [Multi-Agent System] Step 1: Detecting intent
2025-07-04 20:52:34,526 - agent.agent - INFO - [agent.py:198] - [Intent Agent] Processing input for seller_id: 1
2025-07-04 20:52:34,527 - agent.agent - INFO - [agent.py:203] - [Intent Agent] Step 1: Extracting entities
2025-07-04 20:52:34,541 - agent.agent - ERROR - [agent.py:228] - [Intent Agent] Error in intent processing: 'Input to ChatPromptTemplate is missing variables {\'\\n                "entities"\'}.  Expected: [\'\\n                "entities"\', \'examples\', \'input\'] Received: [\'input\', \'examples\']\nNote: if you intended {\n                "entities"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n                "entities"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-07-04 20:52:34,542 - agent.agent - ERROR - [agent.py:511] - [Multi-Agent System] Error processing request: 'Input to ChatPromptTemplate is missing variables {\'\\n                "entities"\'}.  Expected: [\'\\n                "entities"\', \'examples\', \'input\'] Received: [\'input\', \'examples\']\nNote: if you intended {\n                "entities"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n                "entities"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-07-04 20:52:34,542 - agent.agent - ERROR - [agent.py:512] - [Multi-Agent System] Exception details:
Traceback (most recent call last):
  File "D:\Project\business-chat-assistent\chatbot\agent\agent.py", line 436, in process_input
    intent_result = intent_agent(user_input)
  File "D:\Project\business-chat-assistent\chatbot\agent\agent.py", line 204, in intent_chain
    entity_result = (
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\base.py", line 3047, in invoke
    input_ = context.run(step.invoke, input_, config)
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\prompts\base.py", line 216, in invoke
    return self._call_with_config(
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\base.py", line 1940, in _call_with_config
    context.run(
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\config.py", line 428, in call_func_with_variable_args
    return func(input, **kwargs)  # type: ignore[call-arg]
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\prompts\base.py", line 189, in _format_prompt_with_error_handling
    _inner_input = self._validate_input(inner_input)
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\prompts\base.py", line 183, in _validate_input
    raise KeyError(
KeyError: 'Input to ChatPromptTemplate is missing variables {\'\\n                "entities"\'}.  Expected: [\'\\n                "entities"\', \'examples\', \'input\'] Received: [\'input\', \'examples\']\nNote: if you intended {\n                "entities"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n                "entities"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-07-04 20:52:34,545 - services.chat - INFO - [chat.py:82] - [Chat API] Successfully processed user input
2025-07-04 20:53:18,935 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-04 20:53:18,953 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-04 20:53:18,974 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-04 20:53:18,985 - faiss - INFO - [__init__.py:205] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-04 20:53:21,008 - services.chat - INFO - [chat.py:23] - [Chat API] Received chat request - seller_id: 1, user_id: user1, session_id: session_12345
2025-07-04 20:53:21,009 - services.chat - INFO - [chat.py:29] - [Chat API] Validating seller_id
2025-07-04 20:53:21,009 - services.chat - INFO - [chat.py:36] - [Chat API] Validating user_id
2025-07-04 20:53:21,010 - services.chat - INFO - [chat.py:43] - [Chat API] Checking if user exists
2025-07-04 20:53:21,010 - services.chat - INFO - [chat.py:58] - [Chat API] Formatting chat history
2025-07-04 20:53:21,010 - services.chat - INFO - [chat.py:66] - [Chat API] Creating multi-agent system
2025-07-04 20:53:21,010 - agent.agent - INFO - [agent.py:393] - [Multi-Agent System] Creating multi-agent system for seller_id: 1, user_id: user1
2025-07-04 20:53:21,011 - agent.agent - INFO - [agent.py:157] - [Intent Agent] Creating intent agent for seller_id: 1
2025-07-04 20:53:21,011 - agent.agent - INFO - [agent.py:512] - [Function Agent] Creating function agent for seller_id: 1, user_id: user1
2025-07-04 20:53:21,065 - agent.agent - INFO - [agent.py:540] - [Function Agent] Function agent created successfully
2025-07-04 20:53:21,093 - agent.agent - INFO - [agent.py:276] - [Response Agent] Creating response agent for seller_id: 1
2025-07-04 20:53:21,093 - agent.agent - INFO - [agent.py:386] - [Response Agent] Response agent created successfully
2025-07-04 20:53:21,093 - agent.agent - INFO - [agent.py:401] - [Multi-Agent System] All agents created successfully
2025-07-04 20:53:21,094 - agent.agent - INFO - [agent.py:415] - [Multi-Agent System] Function mapping created with 8 functions
2025-07-04 20:53:21,094 - services.chat - INFO - [chat.py:68] - [Chat API] Agent system created successfully for seller_id: 1, user_id: user1
2025-07-04 20:53:21,094 - services.chat - INFO - [chat.py:71] - [Chat API] Getting process_input function from agent system
2025-07-04 20:53:21,094 - services.chat - INFO - [chat.py:75] - [Chat API] Processing user input through multi-agent system
2025-07-04 20:53:21,095 - agent.agent - INFO - [agent.py:421] - [Multi-Agent System] Starting processing for seller_id: 1, user_id: user1
2025-07-04 20:53:21,095 - agent.agent - INFO - [agent.py:426] - [Multi-Agent System] Processing user input: I need watch
2025-07-04 20:53:21,095 - agent.agent - INFO - [agent.py:429] - [Multi-Agent System] Step 1: Detecting intent
2025-07-04 20:53:21,095 - agent.agent - INFO - [agent.py:192] - [Intent Agent] Processing input for seller_id: 1
2025-07-04 20:53:21,096 - agent.agent - INFO - [agent.py:197] - [Intent Agent] Step 1: Extracting entities
2025-07-04 20:53:21,112 - agent.agent - ERROR - [agent.py:222] - [Intent Agent] Error in intent processing: 'Input to ChatPromptTemplate is missing variables {\'"entities"\'}.  Expected: [\'"entities"\', \'examples\', \'input\'] Received: [\'input\', \'examples\']\nNote: if you intended {"entities"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{"entities"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-07-04 20:53:21,112 - agent.agent - ERROR - [agent.py:505] - [Multi-Agent System] Error processing request: 'Input to ChatPromptTemplate is missing variables {\'"entities"\'}.  Expected: [\'"entities"\', \'examples\', \'input\'] Received: [\'input\', \'examples\']\nNote: if you intended {"entities"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{"entities"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-07-04 20:53:21,113 - agent.agent - ERROR - [agent.py:506] - [Multi-Agent System] Exception details:
Traceback (most recent call last):
  File "D:\Project\business-chat-assistent\chatbot\agent\agent.py", line 430, in process_input
    intent_result = intent_agent(user_input)
  File "D:\Project\business-chat-assistent\chatbot\agent\agent.py", line 198, in intent_chain
    entity_result = (
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\base.py", line 3047, in invoke
    input_ = context.run(step.invoke, input_, config)
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\prompts\base.py", line 216, in invoke
    return self._call_with_config(
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\base.py", line 1940, in _call_with_config
    context.run(
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\config.py", line 428, in call_func_with_variable_args
    return func(input, **kwargs)  # type: ignore[call-arg]
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\prompts\base.py", line 189, in _format_prompt_with_error_handling
    _inner_input = self._validate_input(inner_input)
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\prompts\base.py", line 183, in _validate_input
    raise KeyError(
KeyError: 'Input to ChatPromptTemplate is missing variables {\'"entities"\'}.  Expected: [\'"entities"\', \'examples\', \'input\'] Received: [\'input\', \'examples\']\nNote: if you intended {"entities"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{"entities"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-07-04 20:53:21,115 - services.chat - INFO - [chat.py:82] - [Chat API] Successfully processed user input
2025-07-04 21:05:33,245 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-04 21:05:33,267 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-04 21:05:33,295 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-04 21:05:33,306 - faiss - INFO - [__init__.py:205] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-04 21:05:33,868 - services.chat - INFO - [chat.py:23] - [Chat API] Received chat request - seller_id: 1, user_id: user1, session_id: session_12345
2025-07-04 21:05:33,868 - services.chat - INFO - [chat.py:29] - [Chat API] Validating seller_id
2025-07-04 21:05:33,869 - services.chat - INFO - [chat.py:36] - [Chat API] Validating user_id
2025-07-04 21:05:33,869 - services.chat - INFO - [chat.py:43] - [Chat API] Checking if user exists
2025-07-04 21:05:33,869 - services.chat - INFO - [chat.py:58] - [Chat API] Formatting chat history
2025-07-04 21:05:33,870 - services.chat - INFO - [chat.py:66] - [Chat API] Creating multi-agent system
2025-07-04 21:05:33,870 - agent.agent - INFO - [agent.py:392] - [Multi-Agent System] Creating multi-agent system for seller_id: 1, user_id: user1
2025-07-04 21:05:33,870 - agent.agent - INFO - [agent.py:157] - [Intent Agent] Creating intent agent for seller_id: 1
2025-07-04 21:05:33,871 - agent.agent - INFO - [agent.py:511] - [Function Agent] Creating function agent for seller_id: 1, user_id: user1
2025-07-04 21:05:33,946 - agent.agent - INFO - [agent.py:539] - [Function Agent] Function agent created successfully
2025-07-04 21:05:33,988 - agent.agent - INFO - [agent.py:275] - [Response Agent] Creating response agent for seller_id: 1
2025-07-04 21:05:33,989 - agent.agent - INFO - [agent.py:385] - [Response Agent] Response agent created successfully
2025-07-04 21:05:33,990 - agent.agent - INFO - [agent.py:400] - [Multi-Agent System] All agents created successfully
2025-07-04 21:05:33,990 - agent.agent - INFO - [agent.py:414] - [Multi-Agent System] Function mapping created with 8 functions
2025-07-04 21:05:33,990 - services.chat - INFO - [chat.py:68] - [Chat API] Agent system created successfully for seller_id: 1, user_id: user1
2025-07-04 21:05:33,991 - services.chat - INFO - [chat.py:71] - [Chat API] Getting process_input function from agent system
2025-07-04 21:05:33,991 - services.chat - INFO - [chat.py:75] - [Chat API] Processing user input through multi-agent system
2025-07-04 21:05:33,991 - agent.agent - INFO - [agent.py:420] - [Multi-Agent System] Starting processing for seller_id: 1, user_id: user1
2025-07-04 21:05:33,992 - agent.agent - INFO - [agent.py:425] - [Multi-Agent System] Processing user input: I need watch
2025-07-04 21:05:33,992 - agent.agent - INFO - [agent.py:428] - [Multi-Agent System] Step 1: Detecting intent
2025-07-04 21:05:33,992 - agent.agent - INFO - [agent.py:191] - [Intent Agent] Processing input for seller_id: 1
2025-07-04 21:05:33,992 - agent.agent - INFO - [agent.py:196] - [Intent Agent] Step 1: Extracting entities
2025-07-04 21:05:34,020 - agent.agent - ERROR - [agent.py:221] - [Intent Agent] Error in intent processing: 'Input to ChatPromptTemplate is missing variables {\'"entities"\'}.  Expected: [\'"entities"\', \'examples\', \'input\'] Received: [\'input\', \'examples\']\nNote: if you intended {"entities"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{"entities"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-07-04 21:05:34,021 - agent.agent - ERROR - [agent.py:504] - [Multi-Agent System] Error processing request: 'Input to ChatPromptTemplate is missing variables {\'"entities"\'}.  Expected: [\'"entities"\', \'examples\', \'input\'] Received: [\'input\', \'examples\']\nNote: if you intended {"entities"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{"entities"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-07-04 21:05:34,021 - agent.agent - ERROR - [agent.py:505] - [Multi-Agent System] Exception details:
Traceback (most recent call last):
  File "D:\Project\business-chat-assistent\chatbot\agent\agent.py", line 429, in process_input
    intent_result = intent_agent(user_input)
  File "D:\Project\business-chat-assistent\chatbot\agent\agent.py", line 197, in intent_chain
    entity_result = (
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\base.py", line 3047, in invoke
    input_ = context.run(step.invoke, input_, config)
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\prompts\base.py", line 216, in invoke
    return self._call_with_config(
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\base.py", line 1940, in _call_with_config
    context.run(
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\config.py", line 428, in call_func_with_variable_args
    return func(input, **kwargs)  # type: ignore[call-arg]
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\prompts\base.py", line 189, in _format_prompt_with_error_handling
    _inner_input = self._validate_input(inner_input)
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\prompts\base.py", line 183, in _validate_input
    raise KeyError(
KeyError: 'Input to ChatPromptTemplate is missing variables {\'"entities"\'}.  Expected: [\'"entities"\', \'examples\', \'input\'] Received: [\'input\', \'examples\']\nNote: if you intended {"entities"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{"entities"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-07-04 21:05:34,041 - services.chat - INFO - [chat.py:82] - [Chat API] Successfully processed user input
2025-07-04 21:25:40,042 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-04 21:25:40,071 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-04 21:25:40,104 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-04 21:25:40,116 - faiss - INFO - [__init__.py:205] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-04 21:25:40,738 - services.chat - INFO - [chat.py:23] - [Chat API] Received chat request - seller_id: 1, user_id: user1, session_id: session_12345
2025-07-04 21:25:40,739 - services.chat - INFO - [chat.py:29] - [Chat API] Validating seller_id
2025-07-04 21:25:40,739 - services.chat - INFO - [chat.py:36] - [Chat API] Validating user_id
2025-07-04 21:25:40,739 - services.chat - INFO - [chat.py:43] - [Chat API] Checking if user exists
2025-07-04 21:25:40,740 - services.chat - INFO - [chat.py:58] - [Chat API] Formatting chat history
2025-07-04 21:25:40,740 - services.chat - INFO - [chat.py:66] - [Chat API] Creating multi-agent system
2025-07-04 21:25:40,740 - agent.agent - INFO - [agent.py:392] - [Multi-Agent System] Creating multi-agent system for seller_id: 1, user_id: user1
2025-07-04 21:25:40,741 - agent.agent - INFO - [agent.py:157] - [Intent Agent] Creating intent agent for seller_id: 1
2025-07-04 21:25:40,741 - agent.agent - INFO - [agent.py:511] - [Function Agent] Creating function agent for seller_id: 1, user_id: user1
2025-07-04 21:25:40,816 - agent.agent - INFO - [agent.py:539] - [Function Agent] Function agent created successfully
2025-07-04 21:25:40,858 - agent.agent - INFO - [agent.py:275] - [Response Agent] Creating response agent for seller_id: 1
2025-07-04 21:25:40,859 - agent.agent - INFO - [agent.py:385] - [Response Agent] Response agent created successfully
2025-07-04 21:25:40,859 - agent.agent - INFO - [agent.py:400] - [Multi-Agent System] All agents created successfully
2025-07-04 21:25:40,859 - agent.agent - INFO - [agent.py:414] - [Multi-Agent System] Function mapping created with 8 functions
2025-07-04 21:25:40,860 - services.chat - INFO - [chat.py:68] - [Chat API] Agent system created successfully for seller_id: 1, user_id: user1
2025-07-04 21:25:40,860 - services.chat - INFO - [chat.py:71] - [Chat API] Getting process_input function from agent system
2025-07-04 21:25:40,861 - services.chat - INFO - [chat.py:75] - [Chat API] Processing user input through multi-agent system
2025-07-04 21:25:40,861 - agent.agent - INFO - [agent.py:420] - [Multi-Agent System] Starting processing for seller_id: 1, user_id: user1
2025-07-04 21:25:40,861 - agent.agent - INFO - [agent.py:425] - [Multi-Agent System] Processing user input: I need watch
2025-07-04 21:25:40,861 - agent.agent - INFO - [agent.py:428] - [Multi-Agent System] Step 1: Detecting intent
2025-07-04 21:25:40,862 - agent.agent - INFO - [agent.py:191] - [Intent Agent] Processing input for seller_id: 1
2025-07-04 21:25:40,862 - agent.agent - INFO - [agent.py:196] - [Intent Agent] Step 1: Extracting entities
2025-07-04 21:25:40,888 - agent.agent - ERROR - [agent.py:221] - [Intent Agent] Error in intent processing: 'Input to ChatPromptTemplate is missing variables {\'"entities"\'}.  Expected: [\'"entities"\', \'examples\', \'input\'] Received: [\'input\', \'examples\']\nNote: if you intended {"entities"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{"entities"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-07-04 21:25:40,889 - agent.agent - ERROR - [agent.py:504] - [Multi-Agent System] Error processing request: 'Input to ChatPromptTemplate is missing variables {\'"entities"\'}.  Expected: [\'"entities"\', \'examples\', \'input\'] Received: [\'input\', \'examples\']\nNote: if you intended {"entities"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{"entities"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-07-04 21:25:40,889 - agent.agent - ERROR - [agent.py:505] - [Multi-Agent System] Exception details:
Traceback (most recent call last):
  File "D:\Project\business-chat-assistent\chatbot\agent\agent.py", line 429, in process_input
    intent_result = intent_agent(user_input)
  File "D:\Project\business-chat-assistent\chatbot\agent\agent.py", line 197, in intent_chain
    entity_result = (
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\base.py", line 3047, in invoke
    input_ = context.run(step.invoke, input_, config)
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\prompts\base.py", line 216, in invoke
    return self._call_with_config(
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\base.py", line 1940, in _call_with_config
    context.run(
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\config.py", line 428, in call_func_with_variable_args
    return func(input, **kwargs)  # type: ignore[call-arg]
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\prompts\base.py", line 189, in _format_prompt_with_error_handling
    _inner_input = self._validate_input(inner_input)
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\prompts\base.py", line 183, in _validate_input
    raise KeyError(
KeyError: 'Input to ChatPromptTemplate is missing variables {\'"entities"\'}.  Expected: [\'"entities"\', \'examples\', \'input\'] Received: [\'input\', \'examples\']\nNote: if you intended {"entities"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{"entities"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-07-04 21:25:40,894 - services.chat - INFO - [chat.py:82] - [Chat API] Successfully processed user input
2025-07-04 21:27:16,274 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-04 21:27:16,297 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-04 21:27:16,323 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-04 21:27:16,333 - faiss - INFO - [__init__.py:205] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-04 21:27:16,905 - services.chat - INFO - [chat.py:23] - [Chat API] Received chat request - seller_id: 1, user_id: user1, session_id: session_12345
2025-07-04 21:27:16,905 - services.chat - INFO - [chat.py:29] - [Chat API] Validating seller_id
2025-07-04 21:27:16,905 - services.chat - INFO - [chat.py:36] - [Chat API] Validating user_id
2025-07-04 21:27:16,906 - services.chat - INFO - [chat.py:43] - [Chat API] Checking if user exists
2025-07-04 21:27:16,906 - services.chat - INFO - [chat.py:58] - [Chat API] Formatting chat history
2025-07-04 21:27:16,906 - services.chat - INFO - [chat.py:66] - [Chat API] Creating multi-agent system
2025-07-04 21:27:16,907 - agent.agent - INFO - [agent.py:392] - [Multi-Agent System] Creating multi-agent system for seller_id: 1, user_id: user1
2025-07-04 21:27:16,907 - agent.agent - INFO - [agent.py:157] - [Intent Agent] Creating intent agent for seller_id: 1
2025-07-04 21:27:16,908 - agent.agent - INFO - [agent.py:511] - [Function Agent] Creating function agent for seller_id: 1, user_id: user1
2025-07-04 21:27:16,982 - agent.agent - INFO - [agent.py:539] - [Function Agent] Function agent created successfully
2025-07-04 21:27:17,019 - agent.agent - INFO - [agent.py:275] - [Response Agent] Creating response agent for seller_id: 1
2025-07-04 21:27:17,020 - agent.agent - INFO - [agent.py:385] - [Response Agent] Response agent created successfully
2025-07-04 21:27:17,020 - agent.agent - INFO - [agent.py:400] - [Multi-Agent System] All agents created successfully
2025-07-04 21:27:17,020 - agent.agent - INFO - [agent.py:414] - [Multi-Agent System] Function mapping created with 8 functions
2025-07-04 21:27:17,021 - services.chat - INFO - [chat.py:68] - [Chat API] Agent system created successfully for seller_id: 1, user_id: user1
2025-07-04 21:27:17,021 - services.chat - INFO - [chat.py:71] - [Chat API] Getting process_input function from agent system
2025-07-04 21:27:17,021 - services.chat - INFO - [chat.py:75] - [Chat API] Processing user input through multi-agent system
2025-07-04 21:27:17,022 - agent.agent - INFO - [agent.py:420] - [Multi-Agent System] Starting processing for seller_id: 1, user_id: user1
2025-07-04 21:27:17,022 - agent.agent - INFO - [agent.py:425] - [Multi-Agent System] Processing user input: I need watch
2025-07-04 21:27:17,022 - agent.agent - INFO - [agent.py:428] - [Multi-Agent System] Step 1: Detecting intent
2025-07-04 21:27:17,023 - agent.agent - INFO - [agent.py:191] - [Intent Agent] Processing input for seller_id: 1
2025-07-04 21:27:17,023 - agent.agent - INFO - [agent.py:196] - [Intent Agent] Step 1: Extracting entities
2025-07-04 21:27:17,046 - agent.agent - ERROR - [agent.py:221] - [Intent Agent] Error in intent processing: 'Input to ChatPromptTemplate is missing variables {\'"products"\'}.  Expected: [\'"products"\', \'examples\', \'input\'] Received: [\'input\', \'examples\']\nNote: if you intended {"products"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{"products"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-07-04 21:27:17,046 - agent.agent - ERROR - [agent.py:504] - [Multi-Agent System] Error processing request: 'Input to ChatPromptTemplate is missing variables {\'"products"\'}.  Expected: [\'"products"\', \'examples\', \'input\'] Received: [\'input\', \'examples\']\nNote: if you intended {"products"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{"products"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-07-04 21:27:17,047 - agent.agent - ERROR - [agent.py:505] - [Multi-Agent System] Exception details:
Traceback (most recent call last):
  File "D:\Project\business-chat-assistent\chatbot\agent\agent.py", line 429, in process_input
    intent_result = intent_agent(user_input)
  File "D:\Project\business-chat-assistent\chatbot\agent\agent.py", line 197, in intent_chain
    entity_result = (
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\base.py", line 3047, in invoke
    input_ = context.run(step.invoke, input_, config)
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\prompts\base.py", line 216, in invoke
    return self._call_with_config(
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\base.py", line 1940, in _call_with_config
    context.run(
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\config.py", line 428, in call_func_with_variable_args
    return func(input, **kwargs)  # type: ignore[call-arg]
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\prompts\base.py", line 189, in _format_prompt_with_error_handling
    _inner_input = self._validate_input(inner_input)
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\prompts\base.py", line 183, in _validate_input
    raise KeyError(
KeyError: 'Input to ChatPromptTemplate is missing variables {\'"products"\'}.  Expected: [\'"products"\', \'examples\', \'input\'] Received: [\'input\', \'examples\']\nNote: if you intended {"products"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{"products"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-07-04 21:27:17,050 - services.chat - INFO - [chat.py:82] - [Chat API] Successfully processed user input
2025-07-04 21:28:20,910 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-04 21:28:20,932 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-04 21:28:20,958 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-04 21:28:20,967 - faiss - INFO - [__init__.py:205] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-04 21:28:21,535 - services.chat - INFO - [chat.py:23] - [Chat API] Received chat request - seller_id: 1, user_id: user1, session_id: session_12345
2025-07-04 21:28:21,535 - services.chat - INFO - [chat.py:29] - [Chat API] Validating seller_id
2025-07-04 21:28:21,536 - services.chat - INFO - [chat.py:36] - [Chat API] Validating user_id
2025-07-04 21:28:21,536 - services.chat - INFO - [chat.py:43] - [Chat API] Checking if user exists
2025-07-04 21:28:21,536 - services.chat - INFO - [chat.py:58] - [Chat API] Formatting chat history
2025-07-04 21:28:21,536 - services.chat - INFO - [chat.py:66] - [Chat API] Creating multi-agent system
2025-07-04 21:28:21,536 - agent.agent - INFO - [agent.py:393] - [Multi-Agent System] Creating multi-agent system for seller_id: 1, user_id: user1
2025-07-04 21:28:21,536 - agent.agent - INFO - [agent.py:157] - [Intent Agent] Creating intent agent for seller_id: 1
2025-07-04 21:28:21,537 - agent.agent - INFO - [agent.py:512] - [Function Agent] Creating function agent for seller_id: 1, user_id: user1
2025-07-04 21:28:21,613 - agent.agent - INFO - [agent.py:540] - [Function Agent] Function agent created successfully
2025-07-04 21:28:21,653 - agent.agent - INFO - [agent.py:276] - [Response Agent] Creating response agent for seller_id: 1
2025-07-04 21:28:21,654 - agent.agent - INFO - [agent.py:386] - [Response Agent] Response agent created successfully
2025-07-04 21:28:21,654 - agent.agent - INFO - [agent.py:401] - [Multi-Agent System] All agents created successfully
2025-07-04 21:28:21,655 - agent.agent - INFO - [agent.py:415] - [Multi-Agent System] Function mapping created with 8 functions
2025-07-04 21:28:21,655 - services.chat - INFO - [chat.py:68] - [Chat API] Agent system created successfully for seller_id: 1, user_id: user1
2025-07-04 21:28:21,656 - services.chat - INFO - [chat.py:71] - [Chat API] Getting process_input function from agent system
2025-07-04 21:28:21,656 - services.chat - INFO - [chat.py:75] - [Chat API] Processing user input through multi-agent system
2025-07-04 21:28:21,656 - agent.agent - INFO - [agent.py:421] - [Multi-Agent System] Starting processing for seller_id: 1, user_id: user1
2025-07-04 21:28:21,656 - agent.agent - INFO - [agent.py:426] - [Multi-Agent System] Processing user input: I need watch
2025-07-04 21:28:21,657 - agent.agent - INFO - [agent.py:429] - [Multi-Agent System] Step 1: Detecting intent
2025-07-04 21:28:21,657 - agent.agent - INFO - [agent.py:192] - [Intent Agent] Processing input for seller_id: 1
2025-07-04 21:28:21,657 - agent.agent - INFO - [agent.py:197] - [Intent Agent] Step 1: Extracting entities
2025-07-04 21:28:21,678 - agent.agent - ERROR - [agent.py:222] - [Intent Agent] Error in intent processing: 'Input to ChatPromptTemplate is missing variables {\'"entities"\'}.  Expected: [\'"entities"\', \'examples\', \'input\'] Received: [\'input\', \'examples\']\nNote: if you intended {"entities"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{"entities"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-07-04 21:28:21,679 - agent.agent - ERROR - [agent.py:505] - [Multi-Agent System] Error processing request: 'Input to ChatPromptTemplate is missing variables {\'"entities"\'}.  Expected: [\'"entities"\', \'examples\', \'input\'] Received: [\'input\', \'examples\']\nNote: if you intended {"entities"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{"entities"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-07-04 21:28:21,679 - agent.agent - ERROR - [agent.py:506] - [Multi-Agent System] Exception details:
Traceback (most recent call last):
  File "D:\Project\business-chat-assistent\chatbot\agent\agent.py", line 430, in process_input
    intent_result = intent_agent(user_input)
  File "D:\Project\business-chat-assistent\chatbot\agent\agent.py", line 198, in intent_chain
    entity_result = (
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\base.py", line 3047, in invoke
    input_ = context.run(step.invoke, input_, config)
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\prompts\base.py", line 216, in invoke
    return self._call_with_config(
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\base.py", line 1940, in _call_with_config
    context.run(
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\config.py", line 428, in call_func_with_variable_args
    return func(input, **kwargs)  # type: ignore[call-arg]
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\prompts\base.py", line 189, in _format_prompt_with_error_handling
    _inner_input = self._validate_input(inner_input)
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\prompts\base.py", line 183, in _validate_input
    raise KeyError(
KeyError: 'Input to ChatPromptTemplate is missing variables {\'"entities"\'}.  Expected: [\'"entities"\', \'examples\', \'input\'] Received: [\'input\', \'examples\']\nNote: if you intended {"entities"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{"entities"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-07-04 21:28:21,683 - services.chat - INFO - [chat.py:82] - [Chat API] Successfully processed user input
2025-07-04 21:28:44,365 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-04 21:28:44,379 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-04 21:28:44,400 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-04 21:28:44,408 - faiss - INFO - [__init__.py:205] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-04 21:28:44,882 - services.chat - INFO - [chat.py:23] - [Chat API] Received chat request - seller_id: 1, user_id: user1, session_id: session_12345
2025-07-04 21:28:44,882 - services.chat - INFO - [chat.py:29] - [Chat API] Validating seller_id
2025-07-04 21:28:44,883 - services.chat - INFO - [chat.py:36] - [Chat API] Validating user_id
2025-07-04 21:28:44,883 - services.chat - INFO - [chat.py:43] - [Chat API] Checking if user exists
2025-07-04 21:28:44,884 - services.chat - INFO - [chat.py:58] - [Chat API] Formatting chat history
2025-07-04 21:28:44,884 - services.chat - INFO - [chat.py:66] - [Chat API] Creating multi-agent system
2025-07-04 21:28:44,884 - agent.agent - INFO - [agent.py:393] - [Multi-Agent System] Creating multi-agent system for seller_id: 1, user_id: user1
2025-07-04 21:28:44,886 - agent.agent - INFO - [agent.py:157] - [Intent Agent] Creating intent agent for seller_id: 1
2025-07-04 21:28:44,886 - agent.agent - INFO - [agent.py:512] - [Function Agent] Creating function agent for seller_id: 1, user_id: user1
2025-07-04 21:28:44,940 - agent.agent - INFO - [agent.py:540] - [Function Agent] Function agent created successfully
2025-07-04 21:28:44,970 - agent.agent - INFO - [agent.py:276] - [Response Agent] Creating response agent for seller_id: 1
2025-07-04 21:28:44,970 - agent.agent - INFO - [agent.py:386] - [Response Agent] Response agent created successfully
2025-07-04 21:28:44,971 - agent.agent - INFO - [agent.py:401] - [Multi-Agent System] All agents created successfully
2025-07-04 21:28:44,971 - agent.agent - INFO - [agent.py:415] - [Multi-Agent System] Function mapping created with 8 functions
2025-07-04 21:28:44,971 - services.chat - INFO - [chat.py:68] - [Chat API] Agent system created successfully for seller_id: 1, user_id: user1
2025-07-04 21:28:44,971 - services.chat - INFO - [chat.py:71] - [Chat API] Getting process_input function from agent system
2025-07-04 21:28:44,971 - services.chat - INFO - [chat.py:75] - [Chat API] Processing user input through multi-agent system
2025-07-04 21:28:44,971 - agent.agent - INFO - [agent.py:421] - [Multi-Agent System] Starting processing for seller_id: 1, user_id: user1
2025-07-04 21:28:44,972 - agent.agent - INFO - [agent.py:426] - [Multi-Agent System] Processing user input: I need watch
2025-07-04 21:28:44,972 - agent.agent - INFO - [agent.py:429] - [Multi-Agent System] Step 1: Detecting intent
2025-07-04 21:28:44,972 - agent.agent - INFO - [agent.py:192] - [Intent Agent] Processing input for seller_id: 1
2025-07-04 21:28:44,972 - agent.agent - INFO - [agent.py:197] - [Intent Agent] Step 1: Extracting entities
2025-07-04 21:28:44,987 - agent.agent - ERROR - [agent.py:222] - [Intent Agent] Error in intent processing: 'Input to ChatPromptTemplate is missing variables {\'"products"\'}.  Expected: [\'"products"\', \'examples\', \'input\'] Received: [\'input\', \'examples\']\nNote: if you intended {"products"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{"products"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-07-04 21:28:44,988 - agent.agent - ERROR - [agent.py:505] - [Multi-Agent System] Error processing request: 'Input to ChatPromptTemplate is missing variables {\'"products"\'}.  Expected: [\'"products"\', \'examples\', \'input\'] Received: [\'input\', \'examples\']\nNote: if you intended {"products"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{"products"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-07-04 21:28:44,989 - agent.agent - ERROR - [agent.py:506] - [Multi-Agent System] Exception details:
Traceback (most recent call last):
  File "D:\Project\business-chat-assistent\chatbot\agent\agent.py", line 430, in process_input
    intent_result = intent_agent(user_input)
  File "D:\Project\business-chat-assistent\chatbot\agent\agent.py", line 198, in intent_chain
    entity_result = (
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\base.py", line 3047, in invoke
    input_ = context.run(step.invoke, input_, config)
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\prompts\base.py", line 216, in invoke
    return self._call_with_config(
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\base.py", line 1940, in _call_with_config
    context.run(
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\config.py", line 428, in call_func_with_variable_args
    return func(input, **kwargs)  # type: ignore[call-arg]
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\prompts\base.py", line 189, in _format_prompt_with_error_handling
    _inner_input = self._validate_input(inner_input)
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\prompts\base.py", line 183, in _validate_input
    raise KeyError(
KeyError: 'Input to ChatPromptTemplate is missing variables {\'"products"\'}.  Expected: [\'"products"\', \'examples\', \'input\'] Received: [\'input\', \'examples\']\nNote: if you intended {"products"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{"products"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-07-04 21:28:44,991 - services.chat - INFO - [chat.py:82] - [Chat API] Successfully processed user input
2025-07-04 21:29:57,453 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-04 21:29:57,475 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-04 21:29:57,502 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-04 21:29:57,513 - faiss - INFO - [__init__.py:205] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-04 21:30:38,476 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-04 21:30:38,499 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-04 21:30:38,526 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-04 21:30:38,535 - faiss - INFO - [__init__.py:205] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-04 21:30:49,123 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-04 21:30:49,146 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-04 21:30:49,172 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-04 21:30:49,182 - faiss - INFO - [__init__.py:205] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-04 21:31:25,526 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-04 21:31:25,547 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-04 21:31:25,572 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-04 21:31:25,584 - faiss - INFO - [__init__.py:205] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-04 21:31:52,151 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-04 21:31:52,174 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-04 21:31:52,201 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-04 21:31:52,212 - faiss - INFO - [__init__.py:205] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-04 22:23:10,444 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-04 22:23:10,498 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-04 22:23:10,523 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-04 22:23:10,533 - faiss - INFO - [__init__.py:205] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-04 22:23:46,492 - services.chat - INFO - [chat.py:23] - [Chat API] Received chat request - seller_id: 1, user_id: user1, session_id: session_12345
2025-07-04 22:23:46,492 - services.chat - INFO - [chat.py:29] - [Chat API] Validating seller_id
2025-07-04 22:23:46,493 - services.chat - INFO - [chat.py:36] - [Chat API] Validating user_id
2025-07-04 22:23:46,493 - services.chat - INFO - [chat.py:43] - [Chat API] Checking if user exists
2025-07-04 22:23:46,493 - services.chat - INFO - [chat.py:58] - [Chat API] Formatting chat history
2025-07-04 22:23:46,493 - services.chat - INFO - [chat.py:66] - [Chat API] Creating multi-agent system
2025-07-04 22:23:46,494 - agent.agent - INFO - [agent.py:393] - [Multi-Agent System] Creating multi-agent system for seller_id: 1, user_id: user1
2025-07-04 22:23:46,494 - agent.agent - INFO - [agent.py:157] - [Intent Agent] Creating intent agent for seller_id: 1
2025-07-04 22:23:46,494 - agent.agent - INFO - [agent.py:512] - [Function Agent] Creating function agent for seller_id: 1, user_id: user1
2025-07-04 22:23:46,543 - agent.agent - INFO - [agent.py:540] - [Function Agent] Function agent created successfully
2025-07-04 22:23:46,570 - agent.agent - INFO - [agent.py:276] - [Response Agent] Creating response agent for seller_id: 1
2025-07-04 22:23:46,570 - agent.agent - INFO - [agent.py:386] - [Response Agent] Response agent created successfully
2025-07-04 22:23:46,571 - agent.agent - INFO - [agent.py:401] - [Multi-Agent System] All agents created successfully
2025-07-04 22:23:46,571 - agent.agent - INFO - [agent.py:415] - [Multi-Agent System] Function mapping created with 8 functions
2025-07-04 22:23:46,571 - services.chat - INFO - [chat.py:68] - [Chat API] Agent system created successfully for seller_id: 1, user_id: user1
2025-07-04 22:23:46,571 - services.chat - INFO - [chat.py:71] - [Chat API] Getting process_input function from agent system
2025-07-04 22:23:46,572 - services.chat - INFO - [chat.py:75] - [Chat API] Processing user input through multi-agent system
2025-07-04 22:23:46,572 - agent.agent - INFO - [agent.py:421] - [Multi-Agent System] Starting processing for seller_id: 1, user_id: user1
2025-07-04 22:23:46,572 - agent.agent - INFO - [agent.py:426] - [Multi-Agent System] Processing user input: I need watch
2025-07-04 22:23:46,572 - agent.agent - INFO - [agent.py:429] - [Multi-Agent System] Step 1: Detecting intent
2025-07-04 22:23:46,572 - agent.agent - INFO - [agent.py:192] - [Intent Agent] Processing input for seller_id: 1
2025-07-04 22:23:46,572 - agent.agent - INFO - [agent.py:197] - [Intent Agent] Step 1: Extracting entities
2025-07-04 22:23:46,591 - agent.agent - ERROR - [agent.py:222] - [Intent Agent] Error in intent processing: 'Input to ChatPromptTemplate is missing variables {\'"entities"\'}.  Expected: [\'"entities"\', \'examples\', \'input\'] Received: [\'input\', \'examples\']\nNote: if you intended {"entities"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{"entities"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-07-04 22:23:46,592 - agent.agent - ERROR - [agent.py:505] - [Multi-Agent System] Error processing request: 'Input to ChatPromptTemplate is missing variables {\'"entities"\'}.  Expected: [\'"entities"\', \'examples\', \'input\'] Received: [\'input\', \'examples\']\nNote: if you intended {"entities"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{"entities"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-07-04 22:23:46,592 - agent.agent - ERROR - [agent.py:506] - [Multi-Agent System] Exception details:
Traceback (most recent call last):
  File "D:\Project\business-chat-assistent\chatbot\agent\agent.py", line 430, in process_input
    intent_result = intent_agent(user_input)
  File "D:\Project\business-chat-assistent\chatbot\agent\agent.py", line 198, in intent_chain
    entity_result = (
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\base.py", line 3047, in invoke
    input_ = context.run(step.invoke, input_, config)
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\prompts\base.py", line 216, in invoke
    return self._call_with_config(
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\base.py", line 1940, in _call_with_config
    context.run(
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\config.py", line 428, in call_func_with_variable_args
    return func(input, **kwargs)  # type: ignore[call-arg]
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\prompts\base.py", line 189, in _format_prompt_with_error_handling
    _inner_input = self._validate_input(inner_input)
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\prompts\base.py", line 183, in _validate_input
    raise KeyError(
KeyError: 'Input to ChatPromptTemplate is missing variables {\'"entities"\'}.  Expected: [\'"entities"\', \'examples\', \'input\'] Received: [\'input\', \'examples\']\nNote: if you intended {"entities"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{"entities"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-07-04 22:23:46,596 - services.chat - INFO - [chat.py:82] - [Chat API] Successfully processed user input
2025-07-04 22:24:59,642 - services.chat - INFO - [chat.py:23] - [Chat API] Received chat request - seller_id: 1, user_id: user1, session_id: session_12345
2025-07-04 22:24:59,642 - services.chat - INFO - [chat.py:29] - [Chat API] Validating seller_id
2025-07-04 22:24:59,642 - services.chat - INFO - [chat.py:36] - [Chat API] Validating user_id
2025-07-04 22:24:59,642 - services.chat - INFO - [chat.py:43] - [Chat API] Checking if user exists
2025-07-04 22:24:59,643 - services.chat - INFO - [chat.py:58] - [Chat API] Formatting chat history
2025-07-04 22:24:59,643 - services.chat - INFO - [chat.py:66] - [Chat API] Creating multi-agent system
2025-07-04 22:24:59,643 - agent.agent - INFO - [agent.py:393] - [Multi-Agent System] Creating multi-agent system for seller_id: 1, user_id: user1
2025-07-04 22:24:59,643 - agent.agent - INFO - [agent.py:157] - [Intent Agent] Creating intent agent for seller_id: 1
2025-07-04 22:24:59,644 - agent.agent - INFO - [agent.py:512] - [Function Agent] Creating function agent for seller_id: 1, user_id: user1
2025-07-04 22:24:59,689 - agent.agent - INFO - [agent.py:540] - [Function Agent] Function agent created successfully
2025-07-04 22:24:59,713 - agent.agent - INFO - [agent.py:276] - [Response Agent] Creating response agent for seller_id: 1
2025-07-04 22:24:59,713 - agent.agent - INFO - [agent.py:386] - [Response Agent] Response agent created successfully
2025-07-04 22:24:59,714 - agent.agent - INFO - [agent.py:401] - [Multi-Agent System] All agents created successfully
2025-07-04 22:24:59,714 - agent.agent - INFO - [agent.py:415] - [Multi-Agent System] Function mapping created with 8 functions
2025-07-04 22:24:59,714 - services.chat - INFO - [chat.py:68] - [Chat API] Agent system created successfully for seller_id: 1, user_id: user1
2025-07-04 22:24:59,714 - services.chat - INFO - [chat.py:71] - [Chat API] Getting process_input function from agent system
2025-07-04 22:24:59,714 - services.chat - INFO - [chat.py:75] - [Chat API] Processing user input through multi-agent system
2025-07-04 22:24:59,715 - agent.agent - INFO - [agent.py:421] - [Multi-Agent System] Starting processing for seller_id: 1, user_id: user1
2025-07-04 22:24:59,715 - agent.agent - INFO - [agent.py:426] - [Multi-Agent System] Processing user input: I need to buy watch
2025-07-04 22:24:59,715 - agent.agent - INFO - [agent.py:429] - [Multi-Agent System] Step 1: Detecting intent
2025-07-04 22:24:59,716 - agent.agent - INFO - [agent.py:192] - [Intent Agent] Processing input for seller_id: 1
2025-07-04 22:24:59,716 - agent.agent - INFO - [agent.py:197] - [Intent Agent] Step 1: Extracting entities
2025-07-04 22:24:59,719 - agent.agent - ERROR - [agent.py:222] - [Intent Agent] Error in intent processing: 'Input to ChatPromptTemplate is missing variables {\'"entities"\'}.  Expected: [\'"entities"\', \'examples\', \'input\'] Received: [\'input\', \'examples\']\nNote: if you intended {"entities"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{"entities"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-07-04 22:24:59,719 - agent.agent - ERROR - [agent.py:505] - [Multi-Agent System] Error processing request: 'Input to ChatPromptTemplate is missing variables {\'"entities"\'}.  Expected: [\'"entities"\', \'examples\', \'input\'] Received: [\'input\', \'examples\']\nNote: if you intended {"entities"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{"entities"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-07-04 22:24:59,719 - agent.agent - ERROR - [agent.py:506] - [Multi-Agent System] Exception details:
Traceback (most recent call last):
  File "D:\Project\business-chat-assistent\chatbot\agent\agent.py", line 430, in process_input
    intent_result = intent_agent(user_input)
  File "D:\Project\business-chat-assistent\chatbot\agent\agent.py", line 198, in intent_chain
    entity_result = (
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\base.py", line 3047, in invoke
    input_ = context.run(step.invoke, input_, config)
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\prompts\base.py", line 216, in invoke
    return self._call_with_config(
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\base.py", line 1940, in _call_with_config
    context.run(
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\config.py", line 428, in call_func_with_variable_args
    return func(input, **kwargs)  # type: ignore[call-arg]
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\prompts\base.py", line 189, in _format_prompt_with_error_handling
    _inner_input = self._validate_input(inner_input)
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\prompts\base.py", line 183, in _validate_input
    raise KeyError(
KeyError: 'Input to ChatPromptTemplate is missing variables {\'"entities"\'}.  Expected: [\'"entities"\', \'examples\', \'input\'] Received: [\'input\', \'examples\']\nNote: if you intended {"entities"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{"entities"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-07-04 22:24:59,720 - services.chat - INFO - [chat.py:82] - [Chat API] Successfully processed user input
2025-07-04 22:25:30,659 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-04 22:25:30,672 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-04 22:25:30,691 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-04 22:25:30,698 - faiss - INFO - [__init__.py:205] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-04 22:25:58,811 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-04 22:25:58,825 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-04 22:25:58,845 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-04 22:25:58,854 - faiss - INFO - [__init__.py:205] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-04 22:25:59,261 - services.chat - INFO - [chat.py:23] - [Chat API] Received chat request - seller_id: 1, user_id: user1, session_id: session_12345
2025-07-04 22:25:59,261 - services.chat - INFO - [chat.py:29] - [Chat API] Validating seller_id
2025-07-04 22:25:59,261 - services.chat - INFO - [chat.py:36] - [Chat API] Validating user_id
2025-07-04 22:25:59,262 - services.chat - INFO - [chat.py:43] - [Chat API] Checking if user exists
2025-07-04 22:25:59,262 - services.chat - INFO - [chat.py:58] - [Chat API] Formatting chat history
2025-07-04 22:25:59,262 - services.chat - INFO - [chat.py:66] - [Chat API] Creating multi-agent system
2025-07-04 22:25:59,262 - agent.agent - INFO - [agent.py:393] - [Multi-Agent System] Creating multi-agent system for seller_id: 1, user_id: user1
2025-07-04 22:25:59,262 - agent.agent - INFO - [agent.py:157] - [Intent Agent] Creating intent agent for seller_id: 1
2025-07-04 22:25:59,263 - agent.agent - ERROR - [agent.py:417] - [Multi-Agent System] Error creating agents: Invalid format specifier
2025-07-04 22:25:59,263 - services.chat - ERROR - [chat.py:88] - [Chat API] ValueError: Invalid format specifier
2025-07-04 22:27:49,690 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-04 22:27:49,703 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-04 22:27:49,721 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-04 22:27:49,727 - faiss - INFO - [__init__.py:205] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-04 22:27:50,063 - services.chat - INFO - [chat.py:23] - [Chat API] Received chat request - seller_id: 1, user_id: user1, session_id: session_12345
2025-07-04 22:27:50,094 - services.chat - INFO - [chat.py:29] - [Chat API] Validating seller_id
2025-07-04 22:27:50,095 - services.chat - INFO - [chat.py:36] - [Chat API] Validating user_id
2025-07-04 22:27:50,095 - services.chat - INFO - [chat.py:43] - [Chat API] Checking if user exists
2025-07-04 22:27:50,095 - services.chat - INFO - [chat.py:58] - [Chat API] Formatting chat history
2025-07-04 22:27:50,095 - services.chat - INFO - [chat.py:66] - [Chat API] Creating multi-agent system
2025-07-04 22:27:50,096 - agent.agent - INFO - [agent.py:393] - [Multi-Agent System] Creating multi-agent system for seller_id: 1, user_id: user1
2025-07-04 22:27:50,096 - agent.agent - INFO - [agent.py:157] - [Intent Agent] Creating intent agent for seller_id: 1
2025-07-04 22:27:50,097 - agent.agent - INFO - [agent.py:512] - [Function Agent] Creating function agent for seller_id: 1, user_id: user1
2025-07-04 22:27:50,150 - agent.agent - INFO - [agent.py:540] - [Function Agent] Function agent created successfully
2025-07-04 22:27:50,178 - agent.agent - INFO - [agent.py:276] - [Response Agent] Creating response agent for seller_id: 1
2025-07-04 22:27:50,179 - agent.agent - INFO - [agent.py:386] - [Response Agent] Response agent created successfully
2025-07-04 22:27:50,179 - agent.agent - INFO - [agent.py:401] - [Multi-Agent System] All agents created successfully
2025-07-04 22:27:50,179 - agent.agent - INFO - [agent.py:415] - [Multi-Agent System] Function mapping created with 8 functions
2025-07-04 22:27:50,180 - services.chat - INFO - [chat.py:68] - [Chat API] Agent system created successfully for seller_id: 1, user_id: user1
2025-07-04 22:27:50,180 - services.chat - INFO - [chat.py:71] - [Chat API] Getting process_input function from agent system
2025-07-04 22:27:50,180 - services.chat - INFO - [chat.py:75] - [Chat API] Processing user input through multi-agent system
2025-07-04 22:27:50,180 - agent.agent - INFO - [agent.py:421] - [Multi-Agent System] Starting processing for seller_id: 1, user_id: user1
2025-07-04 22:27:50,180 - agent.agent - INFO - [agent.py:426] - [Multi-Agent System] Processing user input: I need to buy watch
2025-07-04 22:27:50,181 - agent.agent - INFO - [agent.py:429] - [Multi-Agent System] Step 1: Detecting intent
2025-07-04 22:27:50,181 - agent.agent - INFO - [agent.py:192] - [Intent Agent] Processing input for seller_id: 1
2025-07-04 22:27:50,181 - agent.agent - INFO - [agent.py:197] - [Intent Agent] Step 1: Extracting entities
2025-07-04 22:27:50,196 - agent.agent - ERROR - [agent.py:222] - [Intent Agent] Error in intent processing: 'Input to ChatPromptTemplate is missing variables {\'"entities"\'}.  Expected: [\'"entities"\', \'examples\', \'input\'] Received: [\'input\', \'examples\']\nNote: if you intended {"entities"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{"entities"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-07-04 22:27:50,197 - agent.agent - ERROR - [agent.py:505] - [Multi-Agent System] Error processing request: 'Input to ChatPromptTemplate is missing variables {\'"entities"\'}.  Expected: [\'"entities"\', \'examples\', \'input\'] Received: [\'input\', \'examples\']\nNote: if you intended {"entities"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{"entities"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-07-04 22:27:50,197 - agent.agent - ERROR - [agent.py:506] - [Multi-Agent System] Exception details:
Traceback (most recent call last):
  File "D:\Project\business-chat-assistent\chatbot\agent\agent.py", line 430, in process_input
    intent_result = intent_agent(user_input)
  File "D:\Project\business-chat-assistent\chatbot\agent\agent.py", line 198, in intent_chain
    entity_result = (
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\base.py", line 3047, in invoke
    input_ = context.run(step.invoke, input_, config)
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\prompts\base.py", line 216, in invoke
    return self._call_with_config(
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\base.py", line 1940, in _call_with_config
    context.run(
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\config.py", line 428, in call_func_with_variable_args
    return func(input, **kwargs)  # type: ignore[call-arg]
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\prompts\base.py", line 189, in _format_prompt_with_error_handling
    _inner_input = self._validate_input(inner_input)
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\prompts\base.py", line 183, in _validate_input
    raise KeyError(
KeyError: 'Input to ChatPromptTemplate is missing variables {\'"entities"\'}.  Expected: [\'"entities"\', \'examples\', \'input\'] Received: [\'input\', \'examples\']\nNote: if you intended {"entities"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{"entities"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-07-04 22:27:50,199 - services.chat - INFO - [chat.py:82] - [Chat API] Successfully processed user input
2025-07-04 22:29:47,314 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-04 22:29:47,331 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-04 22:29:47,349 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-04 22:29:47,356 - faiss - INFO - [__init__.py:205] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-04 22:31:47,133 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-04 22:31:47,147 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-04 22:31:47,169 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-04 22:31:47,176 - faiss - INFO - [__init__.py:205] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-04 22:32:22,861 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-04 22:32:22,875 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-04 22:32:22,895 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-04 22:32:22,902 - faiss - INFO - [__init__.py:205] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-04 22:32:56,015 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-04 22:32:56,031 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-04 22:32:56,051 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-04 22:32:56,058 - faiss - INFO - [__init__.py:205] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-04 22:35:04,831 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-04 22:35:04,845 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-04 22:35:04,863 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-04 22:35:04,869 - faiss - INFO - [__init__.py:205] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-04 22:35:05,197 - services.chat - INFO - [chat.py:23] - [Chat API] Received chat request - seller_id: 1, user_id: user1, session_id: session_12345
2025-07-04 22:35:05,197 - services.chat - INFO - [chat.py:29] - [Chat API] Validating seller_id
2025-07-04 22:35:05,197 - services.chat - INFO - [chat.py:36] - [Chat API] Validating user_id
2025-07-04 22:35:05,197 - services.chat - INFO - [chat.py:43] - [Chat API] Checking if user exists
2025-07-04 22:35:05,197 - services.chat - INFO - [chat.py:58] - [Chat API] Formatting chat history
2025-07-04 22:35:05,198 - services.chat - INFO - [chat.py:66] - [Chat API] Creating multi-agent system
2025-07-04 22:35:05,198 - agent.agent - INFO - [agent.py:393] - [Multi-Agent System] Creating multi-agent system for seller_id: 1, user_id: user1
2025-07-04 22:35:05,199 - agent.agent - INFO - [agent.py:157] - [Intent Agent] Creating intent agent for seller_id: 1
2025-07-04 22:35:05,199 - agent.agent - INFO - [agent.py:512] - [Function Agent] Creating function agent for seller_id: 1, user_id: user1
2025-07-04 22:35:05,244 - agent.agent - INFO - [agent.py:540] - [Function Agent] Function agent created successfully
2025-07-04 22:35:05,268 - agent.agent - INFO - [agent.py:276] - [Response Agent] Creating response agent for seller_id: 1
2025-07-04 22:35:05,269 - agent.agent - INFO - [agent.py:386] - [Response Agent] Response agent created successfully
2025-07-04 22:35:05,269 - agent.agent - INFO - [agent.py:401] - [Multi-Agent System] All agents created successfully
2025-07-04 22:35:05,269 - agent.agent - INFO - [agent.py:415] - [Multi-Agent System] Function mapping created with 8 functions
2025-07-04 22:35:05,269 - services.chat - INFO - [chat.py:68] - [Chat API] Agent system created successfully for seller_id: 1, user_id: user1
2025-07-04 22:35:05,270 - services.chat - INFO - [chat.py:71] - [Chat API] Getting process_input function from agent system
2025-07-04 22:35:05,270 - services.chat - INFO - [chat.py:75] - [Chat API] Processing user input through multi-agent system
2025-07-04 22:35:05,270 - agent.agent - INFO - [agent.py:421] - [Multi-Agent System] Starting processing for seller_id: 1, user_id: user1
2025-07-04 22:35:05,270 - agent.agent - INFO - [agent.py:426] - [Multi-Agent System] Processing user input: I need to buy watch
2025-07-04 22:35:05,270 - agent.agent - INFO - [agent.py:429] - [Multi-Agent System] Step 1: Detecting intent
2025-07-04 22:35:05,271 - agent.agent - INFO - [agent.py:192] - [Intent Agent] Processing input for seller_id: 1
2025-07-04 22:35:05,271 - agent.agent - INFO - [agent.py:197] - [Intent Agent] Step 1: Extracting entities
2025-07-04 22:35:05,285 - agent.agent - ERROR - [agent.py:222] - [Intent Agent] Error in intent processing: 'Input to ChatPromptTemplate is missing variables {\'"entities"\'}.  Expected: [\'"entities"\', \'examples\', \'input\'] Received: [\'input\', \'examples\']\nNote: if you intended {"entities"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{"entities"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-07-04 22:35:05,285 - agent.agent - ERROR - [agent.py:505] - [Multi-Agent System] Error processing request: 'Input to ChatPromptTemplate is missing variables {\'"entities"\'}.  Expected: [\'"entities"\', \'examples\', \'input\'] Received: [\'input\', \'examples\']\nNote: if you intended {"entities"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{"entities"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-07-04 22:35:05,285 - agent.agent - ERROR - [agent.py:506] - [Multi-Agent System] Exception details:
Traceback (most recent call last):
  File "D:\Project\business-chat-assistent\chatbot\agent\agent.py", line 430, in process_input
    intent_result = intent_agent(user_input)
  File "D:\Project\business-chat-assistent\chatbot\agent\agent.py", line 198, in intent_chain
    entity_result = (
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\base.py", line 3047, in invoke
    input_ = context.run(step.invoke, input_, config)
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\prompts\base.py", line 216, in invoke
    return self._call_with_config(
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\base.py", line 1940, in _call_with_config
    context.run(
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\config.py", line 428, in call_func_with_variable_args
    return func(input, **kwargs)  # type: ignore[call-arg]
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\prompts\base.py", line 189, in _format_prompt_with_error_handling
    _inner_input = self._validate_input(inner_input)
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\prompts\base.py", line 183, in _validate_input
    raise KeyError(
KeyError: 'Input to ChatPromptTemplate is missing variables {\'"entities"\'}.  Expected: [\'"entities"\', \'examples\', \'input\'] Received: [\'input\', \'examples\']\nNote: if you intended {"entities"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{"entities"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-07-04 22:35:05,288 - services.chat - INFO - [chat.py:82] - [Chat API] Successfully processed user input
2025-07-04 22:35:13,016 - services.chat - INFO - [chat.py:23] - [Chat API] Received chat request - seller_id: 1, user_id: user1, session_id: session_12345
2025-07-04 22:35:13,017 - services.chat - INFO - [chat.py:29] - [Chat API] Validating seller_id
2025-07-04 22:35:13,017 - services.chat - INFO - [chat.py:36] - [Chat API] Validating user_id
2025-07-04 22:35:13,017 - services.chat - INFO - [chat.py:43] - [Chat API] Checking if user exists
2025-07-04 22:35:13,017 - services.chat - INFO - [chat.py:58] - [Chat API] Formatting chat history
2025-07-04 22:35:13,018 - services.chat - INFO - [chat.py:66] - [Chat API] Creating multi-agent system
2025-07-04 22:35:13,018 - agent.agent - INFO - [agent.py:393] - [Multi-Agent System] Creating multi-agent system for seller_id: 1, user_id: user1
2025-07-04 22:35:13,019 - agent.agent - INFO - [agent.py:157] - [Intent Agent] Creating intent agent for seller_id: 1
2025-07-04 22:35:13,019 - agent.agent - INFO - [agent.py:512] - [Function Agent] Creating function agent for seller_id: 1, user_id: user1
2025-07-04 22:35:13,074 - agent.agent - INFO - [agent.py:540] - [Function Agent] Function agent created successfully
2025-07-04 22:35:13,103 - agent.agent - INFO - [agent.py:276] - [Response Agent] Creating response agent for seller_id: 1
2025-07-04 22:35:13,104 - agent.agent - INFO - [agent.py:386] - [Response Agent] Response agent created successfully
2025-07-04 22:35:13,104 - agent.agent - INFO - [agent.py:401] - [Multi-Agent System] All agents created successfully
2025-07-04 22:35:13,104 - agent.agent - INFO - [agent.py:415] - [Multi-Agent System] Function mapping created with 8 functions
2025-07-04 22:35:13,104 - services.chat - INFO - [chat.py:68] - [Chat API] Agent system created successfully for seller_id: 1, user_id: user1
2025-07-04 22:35:13,104 - services.chat - INFO - [chat.py:71] - [Chat API] Getting process_input function from agent system
2025-07-04 22:35:13,104 - services.chat - INFO - [chat.py:75] - [Chat API] Processing user input through multi-agent system
2025-07-04 22:35:13,105 - agent.agent - INFO - [agent.py:421] - [Multi-Agent System] Starting processing for seller_id: 1, user_id: user1
2025-07-04 22:35:13,105 - agent.agent - INFO - [agent.py:426] - [Multi-Agent System] Processing user input: I need to buy watch
2025-07-04 22:35:13,105 - agent.agent - INFO - [agent.py:429] - [Multi-Agent System] Step 1: Detecting intent
2025-07-04 22:35:13,105 - agent.agent - INFO - [agent.py:192] - [Intent Agent] Processing input for seller_id: 1
2025-07-04 22:35:13,105 - agent.agent - INFO - [agent.py:197] - [Intent Agent] Step 1: Extracting entities
2025-07-04 22:35:13,108 - agent.agent - ERROR - [agent.py:222] - [Intent Agent] Error in intent processing: 'Input to ChatPromptTemplate is missing variables {\'"entities"\'}.  Expected: [\'"entities"\', \'examples\', \'input\'] Received: [\'input\', \'examples\']\nNote: if you intended {"entities"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{"entities"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-07-04 22:35:13,109 - agent.agent - ERROR - [agent.py:505] - [Multi-Agent System] Error processing request: 'Input to ChatPromptTemplate is missing variables {\'"entities"\'}.  Expected: [\'"entities"\', \'examples\', \'input\'] Received: [\'input\', \'examples\']\nNote: if you intended {"entities"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{"entities"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-07-04 22:35:13,109 - agent.agent - ERROR - [agent.py:506] - [Multi-Agent System] Exception details:
Traceback (most recent call last):
  File "D:\Project\business-chat-assistent\chatbot\agent\agent.py", line 430, in process_input
    intent_result = intent_agent(user_input)
  File "D:\Project\business-chat-assistent\chatbot\agent\agent.py", line 198, in intent_chain
    entity_result = (
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\base.py", line 3047, in invoke
    input_ = context.run(step.invoke, input_, config)
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\prompts\base.py", line 216, in invoke
    return self._call_with_config(
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\base.py", line 1940, in _call_with_config
    context.run(
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\config.py", line 428, in call_func_with_variable_args
    return func(input, **kwargs)  # type: ignore[call-arg]
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\prompts\base.py", line 189, in _format_prompt_with_error_handling
    _inner_input = self._validate_input(inner_input)
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\prompts\base.py", line 183, in _validate_input
    raise KeyError(
KeyError: 'Input to ChatPromptTemplate is missing variables {\'"entities"\'}.  Expected: [\'"entities"\', \'examples\', \'input\'] Received: [\'input\', \'examples\']\nNote: if you intended {"entities"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{"entities"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-07-04 22:35:13,110 - services.chat - INFO - [chat.py:82] - [Chat API] Successfully processed user input
2025-07-04 22:35:34,303 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-04 22:35:34,316 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-04 22:35:34,336 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-04 22:35:34,343 - faiss - INFO - [__init__.py:205] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-04 22:35:34,689 - services.chat - INFO - [chat.py:23] - [Chat API] Received chat request - seller_id: 1, user_id: user1, session_id: session_12345
2025-07-04 22:35:34,689 - services.chat - INFO - [chat.py:29] - [Chat API] Validating seller_id
2025-07-04 22:35:34,689 - services.chat - INFO - [chat.py:36] - [Chat API] Validating user_id
2025-07-04 22:35:34,690 - services.chat - INFO - [chat.py:43] - [Chat API] Checking if user exists
2025-07-04 22:35:34,690 - services.chat - INFO - [chat.py:58] - [Chat API] Formatting chat history
2025-07-04 22:35:34,690 - services.chat - INFO - [chat.py:66] - [Chat API] Creating multi-agent system
2025-07-04 22:35:34,691 - agent.agent - INFO - [agent.py:393] - [Multi-Agent System] Creating multi-agent system for seller_id: 1, user_id: user1
2025-07-04 22:35:34,691 - agent.agent - INFO - [agent.py:157] - [Intent Agent] Creating intent agent for seller_id: 1
2025-07-04 22:35:34,692 - agent.agent - INFO - [agent.py:512] - [Function Agent] Creating function agent for seller_id: 1, user_id: user1
2025-07-04 22:35:34,738 - agent.agent - INFO - [agent.py:540] - [Function Agent] Function agent created successfully
2025-07-04 22:35:34,764 - agent.agent - INFO - [agent.py:276] - [Response Agent] Creating response agent for seller_id: 1
2025-07-04 22:35:34,765 - agent.agent - INFO - [agent.py:386] - [Response Agent] Response agent created successfully
2025-07-04 22:35:34,765 - agent.agent - INFO - [agent.py:401] - [Multi-Agent System] All agents created successfully
2025-07-04 22:35:34,766 - agent.agent - INFO - [agent.py:415] - [Multi-Agent System] Function mapping created with 8 functions
2025-07-04 22:35:34,766 - services.chat - INFO - [chat.py:68] - [Chat API] Agent system created successfully for seller_id: 1, user_id: user1
2025-07-04 22:35:34,766 - services.chat - INFO - [chat.py:71] - [Chat API] Getting process_input function from agent system
2025-07-04 22:35:34,766 - services.chat - INFO - [chat.py:75] - [Chat API] Processing user input through multi-agent system
2025-07-04 22:35:34,767 - agent.agent - INFO - [agent.py:421] - [Multi-Agent System] Starting processing for seller_id: 1, user_id: user1
2025-07-04 22:35:34,767 - agent.agent - INFO - [agent.py:426] - [Multi-Agent System] Processing user input: I need to buy watch
2025-07-04 22:35:34,767 - agent.agent - INFO - [agent.py:429] - [Multi-Agent System] Step 1: Detecting intent
2025-07-04 22:35:34,767 - agent.agent - INFO - [agent.py:192] - [Intent Agent] Processing input for seller_id: 1
2025-07-04 22:35:34,767 - agent.agent - INFO - [agent.py:197] - [Intent Agent] Step 1: Extracting entities
2025-07-04 22:35:42,190 - agent.agent - INFO - [agent.py:204] - [Intent Agent] Entity extraction result: ```json
{
  "entities": {
    "products": ["watch"],
    "user_info": [],
    "other": []
  },
  "context": "The user is looking to purchase a watch."
}
```
2025-07-04 22:35:42,191 - agent.agent - INFO - [agent.py:207] - [Intent Agent] Step 2: Classifying intent
2025-07-04 22:35:50,405 - agent.agent - INFO - [agent.py:218] - [Intent Agent] Intent classification completed: ```json
{
  "intent": "place_order",
  "confidence": 0.9,
  "reasoning": "The user explicitly mentions the need to 'buy a watch', which directly indicates an intention to make a purchase. This aligns with the 'place_order' intent, as the user is likely looking to complete a transaction for the mentioned product."
}
```
2025-07-04 22:35:50,405 - agent.agent - ERROR - [agent.py:505] - [Multi-Agent System] Error processing request: invalid syntax (<string>, line 1)
2025-07-04 22:35:50,406 - agent.agent - ERROR - [agent.py:506] - [Multi-Agent System] Exception details:
Traceback (most recent call last):
  File "D:\Project\business-chat-assistent\chatbot\agent\agent.py", line 433, in process_input
    intent_data = eval(intent_result)
  File "<string>", line 1
    ```json
    ^
SyntaxError: invalid syntax
2025-07-04 22:35:50,406 - services.chat - INFO - [chat.py:82] - [Chat API] Successfully processed user input
2025-07-04 22:37:53,772 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-04 22:37:53,787 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-04 22:37:53,806 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-04 22:37:53,813 - faiss - INFO - [__init__.py:205] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-04 22:42:46,530 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-04 22:42:46,547 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-04 22:42:46,568 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-04 22:42:46,576 - faiss - INFO - [__init__.py:205] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-04 22:43:03,504 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-04 22:43:03,520 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-04 22:43:03,539 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-04 22:43:03,546 - faiss - INFO - [__init__.py:205] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-04 22:43:14,937 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-04 22:43:14,952 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-04 22:43:14,971 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-04 22:43:14,979 - faiss - INFO - [__init__.py:205] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-04 22:43:28,962 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-04 22:43:28,980 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-04 22:43:29,005 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-04 22:43:29,014 - faiss - INFO - [__init__.py:205] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-04 22:44:52,117 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-04 22:44:52,133 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-04 22:44:52,151 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-04 22:44:52,159 - faiss - INFO - [__init__.py:205] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-04 22:45:06,281 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-04 22:45:06,295 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-04 22:45:06,313 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-04 22:45:06,320 - faiss - INFO - [__init__.py:205] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-04 22:45:23,695 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-04 22:45:23,712 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-04 22:45:23,736 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-04 22:45:23,746 - faiss - INFO - [__init__.py:205] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-04 22:45:39,231 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-04 22:45:39,248 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-04 22:45:39,267 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-04 22:45:39,277 - faiss - INFO - [__init__.py:205] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-04 22:47:23,424 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-04 22:47:23,439 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-04 22:47:23,458 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-04 22:47:23,465 - faiss - INFO - [__init__.py:205] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-04 22:47:24,094 - services.chat - INFO - [chat.py:23] - [Chat API] Received chat request - seller_id: 1, user_id: user1, session_id: session_12345
2025-07-04 22:47:24,095 - services.chat - INFO - [chat.py:29] - [Chat API] Validating seller_id
2025-07-04 22:47:24,096 - services.chat - INFO - [chat.py:36] - [Chat API] Validating user_id
2025-07-04 22:47:24,096 - services.chat - INFO - [chat.py:43] - [Chat API] Checking if user exists
2025-07-04 22:47:24,096 - services.chat - INFO - [chat.py:58] - [Chat API] Formatting chat history
2025-07-04 22:47:24,096 - services.chat - INFO - [chat.py:66] - [Chat API] Creating multi-agent system
2025-07-04 22:47:24,096 - agent.agent - INFO - [agent.py:431] - [Multi-Agent System] Creating multi-agent system for seller_id: 1, user_id: user1
2025-07-04 22:47:24,096 - agent.agent - INFO - [agent.py:196] - [Intent Agent] Creating intent agent for seller_id: 1
2025-07-04 22:47:24,097 - agent.agent - INFO - [agent.py:561] - [Function Agent] Creating function agent for seller_id: 1, user_id: user1
2025-07-04 22:47:24,143 - agent.agent - INFO - [agent.py:589] - [Function Agent] Function agent created successfully
2025-07-04 22:47:24,166 - agent.agent - INFO - [agent.py:314] - [Response Agent] Creating response agent for seller_id: 1
2025-07-04 22:47:24,166 - agent.agent - INFO - [agent.py:424] - [Response Agent] Response agent created successfully
2025-07-04 22:47:24,167 - agent.agent - INFO - [agent.py:439] - [Multi-Agent System] All agents created successfully
2025-07-04 22:47:24,168 - agent.agent - INFO - [agent.py:453] - [Multi-Agent System] Function mapping created with 8 functions
2025-07-04 22:47:24,168 - services.chat - INFO - [chat.py:68] - [Chat API] Agent system created successfully for seller_id: 1, user_id: user1
2025-07-04 22:47:24,168 - services.chat - INFO - [chat.py:71] - [Chat API] Getting process_input function from agent system
2025-07-04 22:47:24,168 - services.chat - INFO - [chat.py:75] - [Chat API] Processing user input through multi-agent system
2025-07-04 22:47:24,168 - agent.agent - INFO - [agent.py:459] - [Multi-Agent System] Starting processing for seller_id: 1, user_id: user1
2025-07-04 22:47:24,168 - agent.agent - INFO - [agent.py:464] - [Multi-Agent System] Processing user input: I need to buy watch
2025-07-04 22:47:24,169 - agent.agent - INFO - [agent.py:467] - [Multi-Agent System] Step 1: Detecting intent
2025-07-04 22:47:24,169 - agent.agent - INFO - [agent.py:231] - [Intent Agent] Processing input for seller_id: 1
2025-07-04 22:47:24,169 - agent.agent - INFO - [agent.py:236] - [Intent Agent] Step 1: Extracting entities
2025-07-04 22:47:29,546 - agent.agent - INFO - [agent.py:245] - [Intent Agent] Step 2: Classifying intent
2025-07-04 22:47:36,840 - agent.agent - INFO - [agent.py:256] - [Intent Agent] Intent classification completed: ```json
{
  "intent": "place_order",
  "confidence": 0.9,
  "reasoning": "The user explicitly mentions the need to buy a watch, which directly aligns with the 'place_order' intent. The context and entities support this interpretation as the user is looking to purchase a product (watch)."
}
```
2025-07-04 22:47:36,841 - agent.agent - INFO - [agent.py:478] - [Multi-Agent System] Detected intent: place_order
2025-07-04 22:47:36,841 - agent.agent - INFO - [agent.py:482] - [Multi-Agent System] Step 2: Managing user for place_order intent
2025-07-04 22:47:36,847 - agent.agent - ERROR - [agent.py:554] - [Multi-Agent System] Error processing request: 'Input to ChatPromptTemplate is missing variables {\'"action"\'}.  Expected: [\'"action"\', \'agent_scratchpad\', \'chat_history\', \'input\'] Received: [\'input\', \'chat_history\', \'intermediate_steps\', \'agent_scratchpad\']\nNote: if you intended {"action"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{"action"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-07-04 22:47:36,848 - agent.agent - ERROR - [agent.py:555] - [Multi-Agent System] Exception details:
Traceback (most recent call last):
  File "D:\Project\business-chat-assistent\chatbot\agent\agent.py", line 483, in process_input
    user_check = user_management_agent.invoke({"input": user_input, "chat_history": chat_history})
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain\chains\base.py", line 167, in invoke
    raise e
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain\chains\base.py", line 157, in invoke
    self._call(inputs, run_manager=run_manager)
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain\agents\agent.py", line 1620, in _call
    next_step_output = self._take_next_step(
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain\agents\agent.py", line 1326, in _take_next_step
    [
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain\agents\agent.py", line 1326, in <listcomp>
    [
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain\agents\agent.py", line 1354, in _iter_next_step
    output = self._action_agent.plan(
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain\agents\agent.py", line 577, in plan
    for chunk in self.runnable.stream(inputs, config={"callbacks": callbacks}):
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\base.py", line 3438, in stream
    yield from self.transform(iter([input]), config, **kwargs)
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\base.py", line 3424, in transform
    yield from self._transform_stream_with_config(
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\base.py", line 2215, in _transform_stream_with_config
    chunk: Output = context.run(next, iterator)
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\base.py", line 3386, in _transform
    yield from final_pipeline
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\base.py", line 1429, in transform
    for ichunk in input:
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\base.py", line 5647, in transform
    yield from self.bound.transform(
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\base.py", line 1429, in transform
    for ichunk in input:
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\base.py", line 1447, in transform
    yield from self.stream(final, config, **kwargs)
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\base.py", line 1014, in stream
    yield self.invoke(input, config, **kwargs)
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\prompts\base.py", line 216, in invoke
    return self._call_with_config(
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\base.py", line 1940, in _call_with_config
    context.run(
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\runnables\config.py", line 428, in call_func_with_variable_args
    return func(input, **kwargs)  # type: ignore[call-arg]
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\prompts\base.py", line 189, in _format_prompt_with_error_handling
    _inner_input = self._validate_input(inner_input)
  File "C:\Users\Nipul\AppData\Local\Programs\Python\Python39\lib\site-packages\langchain_core\prompts\base.py", line 183, in _validate_input
    raise KeyError(
KeyError: 'Input to ChatPromptTemplate is missing variables {\'"action"\'}.  Expected: [\'"action"\', \'agent_scratchpad\', \'chat_history\', \'input\'] Received: [\'input\', \'chat_history\', \'intermediate_steps\', \'agent_scratchpad\']\nNote: if you intended {"action"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{"action"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-07-04 22:47:36,853 - services.chat - INFO - [chat.py:82] - [Chat API] Successfully processed user input
