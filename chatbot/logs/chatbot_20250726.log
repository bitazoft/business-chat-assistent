2025-07-26 04:07:33,654 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-26 04:07:57,653 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-26 04:07:58,132 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-26 04:07:58,399 - faiss - INFO - [__init__.py:186] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-26 04:08:42,610 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-26 04:08:42,745 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-26 04:08:42,816 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-26 04:08:42,824 - faiss - INFO - [__init__.py:186] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-26 04:09:01,785 - vector_store.vector_store - INFO - [vector_store.py:38] - [FastVectorStore] Loading embeddings...
2025-07-26 04:09:02,897 - vector_store.vector_store - INFO - [vector_store.py:48] - [FastVectorStore] Loaded 53744 Bitext documents
2025-07-26 04:09:02,955 - vector_store.vector_store - INFO - [vector_store.py:79] - [FastVectorStore] Built FAISS index with 53744 vectors
2025-07-26 04:09:02,956 - vector_store.vector_store - INFO - [vector_store.py:82] - [FastVectorStore] Loading embedding model all-MiniLM-L6-v2...
2025-07-26 04:09:02,959 - sentence_transformers.SentenceTransformer - INFO - [SentenceTransformer.py:219] - Use pytorch device_name: cpu
2025-07-26 04:09:02,960 - sentence_transformers.SentenceTransformer - INFO - [SentenceTransformer.py:227] - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-07-26 04:09:02,967 - sentence_transformers.SentenceTransformer - WARNING - [SentenceTransformer.py:2047] - No sentence-transformers model found with name sentence-transformers/all-MiniLM-L6-v2. Creating a new one with mean pooling.
2025-07-26 04:09:02,974 - vector_store.vector_store - ERROR - [vector_store.py:87] - [FastVectorStore] Error loading embedding model: Missing dependencies for SOCKS support.
2025-07-26 04:09:02,975 - vector_store.vector_store - ERROR - [vector_store.py:95] - [FastVectorStore] Error loading embeddings: Failed to load embedding model: Missing dependencies for SOCKS support.
2025-07-26 04:09:03,493 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-26 04:09:08,885 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-26 04:09:08,994 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-26 04:09:09,004 - faiss - INFO - [__init__.py:186] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-26 04:42:32,354 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-26 04:42:33,782 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-26 04:42:34,228 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-26 04:42:34,263 - faiss - INFO - [__init__.py:186] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-26 04:43:33,367 - vector_store.vector_store - INFO - [vector_store.py:38] - [FastVectorStore] Loading embeddings...
2025-07-26 04:43:33,493 - vector_store.vector_store - INFO - [vector_store.py:48] - [FastVectorStore] Loaded 53744 Bitext documents
2025-07-26 04:43:33,526 - vector_store.vector_store - INFO - [vector_store.py:79] - [FastVectorStore] Built FAISS index with 53744 vectors
2025-07-26 04:43:33,527 - vector_store.vector_store - INFO - [vector_store.py:82] - [FastVectorStore] Loading embedding model all-MiniLM-L6-v2...
2025-07-26 04:43:33,528 - sentence_transformers.SentenceTransformer - INFO - [SentenceTransformer.py:219] - Use pytorch device_name: cpu
2025-07-26 04:43:33,529 - sentence_transformers.SentenceTransformer - INFO - [SentenceTransformer.py:227] - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-07-26 04:43:47,557 - vector_store.vector_store - INFO - [vector_store.py:85] - [FastVectorStore] Embedding model all-MiniLM-L6-v2 loaded
2025-07-26 04:43:47,557 - vector_store.vector_store - INFO - [vector_store.py:92] - [FastVectorStore] Embeddings and model loaded in 14.19s
2025-07-26 04:43:47,835 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-26 04:44:01,160 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-26 04:44:01,246 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-26 04:44:01,251 - faiss - INFO - [__init__.py:186] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-26 04:44:11,915 - services.whatsapp_service - INFO - [whatsapp_service.py:52] - ‚ö†Ô∏è WhatsApp Service initialized without validation - call validate_config() before use
2025-07-26 04:44:11,923 - main - INFO - [main.py:29] - üöÄ Business Chat Assistant starting up...
2025-07-26 04:44:11,923 - main - INFO - [main.py:30] - ‚úÖ CORS middleware configured
2025-07-26 04:44:11,925 - main - INFO - [main.py:34] - ‚úÖ Chat routes registered
2025-07-26 04:44:11,927 - main - INFO - [main.py:38] - ‚úÖ WhatsApp routes registered
2025-07-26 04:44:11,930 - main - INFO - [main.py:48] - üéâ Business Chat Assistant with WhatsApp Integration is ready to serve requests!
2025-07-26 04:44:11,930 - main - INFO - [main.py:49] - üì± WhatsApp webhook endpoint: /whatsapp/webhook
2025-07-26 04:44:11,931 - main - INFO - [main.py:50] - üìä WhatsApp status endpoint: /whatsapp/status
2025-07-26 04:46:39,023 - main - INFO - [main.py:54] - üëã Business Chat Assistant is shutting down...
2025-07-26 04:46:40,712 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-26 04:46:43,809 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-26 04:46:43,900 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-26 04:46:43,907 - faiss - INFO - [__init__.py:186] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-26 04:46:51,847 - services.whatsapp_service - INFO - [whatsapp_service.py:52] - ‚ö†Ô∏è WhatsApp Service initialized without validation - call validate_config() before use
2025-07-26 04:46:51,852 - main - INFO - [main.py:29] - üöÄ Business Chat Assistant starting up...
2025-07-26 04:46:51,852 - main - INFO - [main.py:30] - ‚úÖ CORS middleware configured
2025-07-26 04:46:51,854 - main - INFO - [main.py:34] - ‚úÖ Chat routes registered
2025-07-26 04:46:51,856 - main - INFO - [main.py:38] - ‚úÖ WhatsApp routes registered
2025-07-26 04:46:57,449 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-26 04:47:00,505 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-26 04:47:00,604 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-26 04:47:00,609 - faiss - INFO - [__init__.py:186] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-26 04:47:08,643 - services.whatsapp_service - INFO - [whatsapp_service.py:52] - ‚ö†Ô∏è WhatsApp Service initialized without validation - call validate_config() before use
2025-07-26 04:47:08,649 - main - INFO - [main.py:29] - üöÄ Business Chat Assistant starting up...
2025-07-26 04:47:08,649 - main - INFO - [main.py:30] - ‚úÖ CORS middleware configured
2025-07-26 04:47:08,650 - main - INFO - [main.py:34] - ‚úÖ Chat routes registered
2025-07-26 04:47:08,654 - main - INFO - [main.py:38] - ‚úÖ WhatsApp routes registered
2025-07-26 04:47:08,656 - main - INFO - [main.py:83] - üéâ Business Chat Assistant with WhatsApp Integration is ready to serve requests!
2025-07-26 04:47:08,656 - main - INFO - [main.py:84] - üì± WhatsApp webhook endpoint: /whatsapp/webhook
2025-07-26 04:47:08,656 - main - INFO - [main.py:85] - üìä WhatsApp status endpoint: /whatsapp/status
2025-07-26 04:48:01,554 - main - INFO - [main.py:89] - üëã Business Chat Assistant is shutting down...
2025-07-26 04:48:03,087 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-26 04:48:05,977 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-26 04:48:06,074 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-26 04:48:06,081 - faiss - INFO - [__init__.py:186] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-26 04:48:14,168 - services.whatsapp_service - INFO - [whatsapp_service.py:52] - ‚ö†Ô∏è WhatsApp Service initialized without validation - call validate_config() before use
2025-07-26 04:48:14,174 - main - INFO - [main.py:29] - üöÄ Business Chat Assistant starting up...
2025-07-26 04:48:14,175 - main - INFO - [main.py:30] - ‚úÖ CORS middleware configured
2025-07-26 04:48:14,176 - main - INFO - [main.py:34] - ‚úÖ Chat routes registered
2025-07-26 04:48:14,178 - main - INFO - [main.py:38] - ‚úÖ WhatsApp routes registered
2025-07-26 04:48:14,180 - main - INFO - [main.py:83] - üéâ Business Chat Assistant with WhatsApp Integration is ready to serve requests!
2025-07-26 04:48:14,180 - main - INFO - [main.py:84] - üì± WhatsApp webhook endpoint: /whatsapp/webhook
2025-07-26 04:48:14,181 - main - INFO - [main.py:85] - üìä WhatsApp status endpoint: /whatsapp/status
2025-07-26 04:48:41,399 - main - INFO - [main.py:89] - üëã Business Chat Assistant is shutting down...
2025-07-26 04:48:42,944 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-26 04:48:45,881 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-26 04:48:45,966 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-26 04:48:45,972 - faiss - INFO - [__init__.py:186] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-26 04:48:53,629 - services.whatsapp_service - INFO - [whatsapp_service.py:52] - ‚ö†Ô∏è WhatsApp Service initialized without validation - call validate_config() before use
2025-07-26 04:48:53,635 - main - INFO - [main.py:29] - üöÄ Business Chat Assistant starting up...
2025-07-26 04:48:53,636 - main - INFO - [main.py:30] - ‚úÖ CORS middleware configured
2025-07-26 04:48:53,637 - main - INFO - [main.py:34] - ‚úÖ Chat routes registered
2025-07-26 04:48:53,639 - main - INFO - [main.py:38] - ‚úÖ WhatsApp routes registered
2025-07-26 04:48:53,640 - main - INFO - [main.py:48] - üéâ Business Chat Assistant with WhatsApp Integration is ready to serve requests!
2025-07-26 04:48:53,640 - main - INFO - [main.py:49] - üì± WhatsApp webhook endpoint: /whatsapp/webhook
2025-07-26 04:48:53,641 - main - INFO - [main.py:50] - üìä WhatsApp status endpoint: /whatsapp/status
2025-07-26 04:48:53,642 - main - INFO - [main.py:54] - üëã Business Chat Assistant is shutting down...
2025-07-26 04:48:55,138 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-26 04:48:57,900 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-26 04:48:57,983 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-26 04:48:57,989 - faiss - INFO - [__init__.py:186] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-26 04:49:05,403 - services.whatsapp_service - INFO - [whatsapp_service.py:52] - ‚ö†Ô∏è WhatsApp Service initialized without validation - call validate_config() before use
2025-07-26 04:49:05,409 - main - INFO - [main.py:29] - üöÄ Business Chat Assistant starting up...
2025-07-26 04:49:05,409 - main - INFO - [main.py:30] - ‚úÖ CORS middleware configured
2025-07-26 04:49:05,410 - main - INFO - [main.py:34] - ‚úÖ Chat routes registered
2025-07-26 04:49:05,412 - main - INFO - [main.py:38] - ‚úÖ WhatsApp routes registered
2025-07-26 04:49:05,414 - main - INFO - [main.py:48] - üéâ Business Chat Assistant with WhatsApp Integration is ready to serve requests!
2025-07-26 04:49:05,414 - main - INFO - [main.py:49] - üì± WhatsApp webhook endpoint: /whatsapp/webhook
2025-07-26 04:49:05,414 - main - INFO - [main.py:50] - üìä WhatsApp status endpoint: /whatsapp/status
2025-07-26 04:51:31,736 - main - INFO - [main.py:54] - üëã Business Chat Assistant is shutting down...
2025-07-26 04:51:33,247 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-26 04:51:36,489 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-26 04:51:36,600 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-26 04:51:36,607 - faiss - INFO - [__init__.py:186] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-26 04:51:44,498 - services.whatsapp_service - INFO - [whatsapp_service.py:52] - ‚ö†Ô∏è WhatsApp Service initialized without validation - call validate_config() before use
2025-07-26 04:51:44,503 - main - INFO - [main.py:29] - üöÄ Business Chat Assistant starting up...
2025-07-26 04:51:44,503 - main - INFO - [main.py:30] - ‚úÖ CORS middleware configured
2025-07-26 04:51:44,504 - main - INFO - [main.py:34] - ‚úÖ Chat routes registered
2025-07-26 04:51:44,506 - main - INFO - [main.py:38] - ‚úÖ WhatsApp routes registered
2025-07-26 04:51:44,508 - main - INFO - [main.py:83] - üéâ Business Chat Assistant with WhatsApp Integration is ready to serve requests!
2025-07-26 04:51:44,508 - main - INFO - [main.py:84] - üì± WhatsApp webhook endpoint: /whatsapp/webhook
2025-07-26 04:51:44,508 - main - INFO - [main.py:85] - üìä WhatsApp status endpoint: /whatsapp/status
2025-07-26 04:51:44,597 - main - WARNING - [main.py:58] - ‚ö†Ô∏è Webhook verification received at root path - check your webhook URL configuration!
2025-07-26 04:51:44,597 - main - INFO - [main.py:59] - Redirecting verification: mode=subscribe, token=business-a..., challenge=155805037
2025-07-26 04:51:44,597 - services.whatsapp_service - INFO - [whatsapp_service.py:311] - ‚úÖ Webhook verification successful
2025-07-26 04:51:44,597 - main - INFO - [main.py:68] - ‚úÖ Webhook verification successful (via root endpoint)
2025-07-26 04:51:52,522 - main - WARNING - [main.py:58] - ‚ö†Ô∏è Webhook verification received at root path - check your webhook URL configuration!
2025-07-26 04:51:52,522 - main - INFO - [main.py:59] - Redirecting verification: mode=subscribe, token=business-a..., challenge=1622629432
2025-07-26 04:51:52,522 - services.whatsapp_service - INFO - [whatsapp_service.py:311] - ‚úÖ Webhook verification successful
2025-07-26 04:51:52,522 - main - INFO - [main.py:68] - ‚úÖ Webhook verification successful (via root endpoint)
2025-07-26 04:52:25,096 - main - INFO - [main.py:89] - üëã Business Chat Assistant is shutting down...
2025-07-26 04:52:26,601 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-26 04:52:29,358 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-26 04:52:29,442 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-26 04:52:29,447 - faiss - INFO - [__init__.py:186] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-26 04:52:36,857 - services.whatsapp_service - INFO - [whatsapp_service.py:52] - ‚ö†Ô∏è WhatsApp Service initialized without validation - call validate_config() before use
2025-07-26 04:52:36,861 - main - INFO - [main.py:29] - üöÄ Business Chat Assistant starting up...
2025-07-26 04:52:36,862 - main - INFO - [main.py:30] - ‚úÖ CORS middleware configured
2025-07-26 04:52:36,862 - main - INFO - [main.py:34] - ‚úÖ Chat routes registered
2025-07-26 04:52:36,865 - main - INFO - [main.py:38] - ‚úÖ WhatsApp routes registered
2025-07-26 04:52:36,866 - main - INFO - [main.py:83] - üéâ Business Chat Assistant with WhatsApp Integration is ready to serve requests!
2025-07-26 04:52:36,867 - main - INFO - [main.py:84] - üì± WhatsApp webhook endpoint: /whatsapp/webhook
2025-07-26 04:52:36,867 - main - INFO - [main.py:85] - üìä WhatsApp status endpoint: /whatsapp/status
2025-07-26 04:58:50,911 - main - INFO - [main.py:89] - üëã Business Chat Assistant is shutting down...
2025-07-26 04:58:52,379 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-26 04:58:55,284 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-26 04:58:55,373 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-26 04:58:55,379 - faiss - INFO - [__init__.py:186] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-26 04:59:03,776 - services.whatsapp_service - INFO - [whatsapp_service.py:52] - ‚ö†Ô∏è WhatsApp Service initialized without validation - call validate_config() before use
2025-07-26 04:59:06,383 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-26 04:59:09,446 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-26 04:59:09,550 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-26 04:59:09,557 - faiss - INFO - [__init__.py:186] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-26 04:59:17,816 - services.whatsapp_service - INFO - [whatsapp_service.py:52] - ‚ö†Ô∏è WhatsApp Service initialized without validation - call validate_config() before use
2025-07-26 04:59:19,193 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-26 04:59:22,038 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-26 04:59:22,126 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-26 04:59:22,131 - faiss - INFO - [__init__.py:186] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-26 04:59:29,965 - services.whatsapp_service - INFO - [whatsapp_service.py:52] - ‚ö†Ô∏è WhatsApp Service initialized without validation - call validate_config() before use
2025-07-26 05:00:12,811 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-26 05:00:15,746 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-26 05:00:15,833 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-26 05:00:15,839 - faiss - INFO - [__init__.py:186] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-26 05:00:23,310 - services.whatsapp_service - INFO - [whatsapp_service.py:52] - ‚ö†Ô∏è WhatsApp Service initialized without validation - call validate_config() before use
2025-07-26 05:00:23,315 - main - INFO - [main.py:29] - üöÄ Business Chat Assistant starting up...
2025-07-26 05:00:23,315 - main - INFO - [main.py:30] - ‚úÖ CORS middleware configured
2025-07-26 05:00:23,317 - main - INFO - [main.py:34] - ‚úÖ Chat routes registered
2025-07-26 05:00:23,319 - main - INFO - [main.py:38] - ‚úÖ WhatsApp routes registered
2025-07-26 05:00:23,320 - main - INFO - [main.py:49] - üéâ Business Chat Assistant with WhatsApp Integration is ready to serve requests!
2025-07-26 05:00:23,320 - main - INFO - [main.py:50] - üì± WhatsApp webhook endpoint: /whatsapp/webhook
2025-07-26 05:00:23,320 - main - INFO - [main.py:51] - üìä WhatsApp status endpoint: /whatsapp/status
2025-07-26 05:00:43,786 - main - INFO - [main.py:55] - üëã Business Chat Assistant is shutting down...
2025-07-26 05:00:45,192 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-26 05:00:48,060 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-26 05:00:48,150 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-26 05:00:48,155 - faiss - INFO - [__init__.py:186] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-26 05:00:56,265 - services.whatsapp_service - INFO - [whatsapp_service.py:52] - ‚ö†Ô∏è WhatsApp Service initialized without validation - call validate_config() before use
2025-07-26 05:00:56,270 - main - INFO - [main.py:29] - üöÄ Business Chat Assistant starting up...
2025-07-26 05:00:56,271 - main - INFO - [main.py:30] - ‚úÖ CORS middleware configured
2025-07-26 05:00:56,272 - main - INFO - [main.py:34] - ‚úÖ Chat routes registered
2025-07-26 05:00:56,276 - main - INFO - [main.py:38] - ‚úÖ WhatsApp routes registered
2025-07-26 05:00:56,278 - main - INFO - [main.py:84] - üéâ Business Chat Assistant with WhatsApp Integration is ready to serve requests!
2025-07-26 05:00:56,278 - main - INFO - [main.py:85] - üì± WhatsApp webhook endpoint: /whatsapp/webhook
2025-07-26 05:00:56,278 - main - INFO - [main.py:86] - üìä WhatsApp status endpoint: /whatsapp/status
2025-07-26 05:00:58,832 - main - INFO - [main.py:90] - üëã Business Chat Assistant is shutting down...
2025-07-26 05:01:00,299 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-26 05:01:03,313 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-26 05:01:03,405 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-26 05:01:03,411 - faiss - INFO - [__init__.py:186] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-26 05:01:11,493 - services.whatsapp_service - INFO - [whatsapp_service.py:52] - ‚ö†Ô∏è WhatsApp Service initialized without validation - call validate_config() before use
2025-07-26 05:01:11,498 - main - INFO - [main.py:29] - üöÄ Business Chat Assistant starting up...
2025-07-26 05:01:11,498 - main - INFO - [main.py:30] - ‚úÖ CORS middleware configured
2025-07-26 05:01:11,499 - main - INFO - [main.py:34] - ‚úÖ Chat routes registered
2025-07-26 05:01:11,501 - main - INFO - [main.py:38] - ‚úÖ WhatsApp routes registered
2025-07-26 05:01:11,503 - main - INFO - [main.py:84] - üéâ Business Chat Assistant with WhatsApp Integration is ready to serve requests!
2025-07-26 05:01:11,503 - main - INFO - [main.py:85] - üì± WhatsApp webhook endpoint: /whatsapp/webhook
2025-07-26 05:01:11,504 - main - INFO - [main.py:86] - üìä WhatsApp status endpoint: /whatsapp/status
2025-07-26 05:01:11,504 - main - INFO - [main.py:90] - üëã Business Chat Assistant is shutting down...
2025-07-26 05:01:12,885 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-26 05:01:15,776 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-26 05:01:15,859 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-26 05:01:15,864 - faiss - INFO - [__init__.py:186] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-26 05:01:23,788 - services.whatsapp_service - INFO - [whatsapp_service.py:52] - ‚ö†Ô∏è WhatsApp Service initialized without validation - call validate_config() before use
2025-07-26 05:01:23,793 - main - INFO - [main.py:30] - üöÄ Business Chat Assistant starting up...
2025-07-26 05:01:23,793 - main - INFO - [main.py:31] - ‚úÖ CORS middleware configured
2025-07-26 05:01:23,794 - main - INFO - [main.py:35] - ‚úÖ Chat routes registered
2025-07-26 05:01:23,796 - main - INFO - [main.py:39] - ‚úÖ WhatsApp routes registered
2025-07-26 05:01:23,798 - main - INFO - [main.py:85] - üéâ Business Chat Assistant with WhatsApp Integration is ready to serve requests!
2025-07-26 05:01:23,798 - main - INFO - [main.py:86] - üì± WhatsApp webhook endpoint: /whatsapp/webhook
2025-07-26 05:01:23,799 - main - INFO - [main.py:87] - üìä WhatsApp status endpoint: /whatsapp/status
2025-07-26 05:01:23,800 - main - INFO - [main.py:91] - üëã Business Chat Assistant is shutting down...
2025-07-26 05:01:25,236 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-26 05:01:28,261 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-26 05:01:28,348 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-26 05:01:28,353 - faiss - INFO - [__init__.py:186] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-26 05:01:36,348 - services.whatsapp_service - INFO - [whatsapp_service.py:52] - ‚ö†Ô∏è WhatsApp Service initialized without validation - call validate_config() before use
2025-07-26 05:01:36,354 - main - INFO - [main.py:30] - üöÄ Business Chat Assistant starting up...
2025-07-26 05:01:36,355 - main - INFO - [main.py:31] - ‚úÖ CORS middleware configured
2025-07-26 05:01:36,356 - main - INFO - [main.py:35] - ‚úÖ Chat routes registered
2025-07-26 05:01:36,359 - main - INFO - [main.py:39] - ‚úÖ WhatsApp routes registered
2025-07-26 05:01:36,361 - main - INFO - [main.py:84] - üéâ Business Chat Assistant with WhatsApp Integration is ready to serve requests!
2025-07-26 05:01:36,361 - main - INFO - [main.py:85] - üì± WhatsApp webhook endpoint: /whatsapp/webhook
2025-07-26 05:01:36,361 - main - INFO - [main.py:86] - üìä WhatsApp status endpoint: /whatsapp/status
2025-07-26 05:01:36,362 - main - INFO - [main.py:90] - üëã Business Chat Assistant is shutting down...
2025-07-26 05:01:37,846 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-26 05:01:40,732 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-26 05:01:40,828 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-26 05:01:40,833 - faiss - INFO - [__init__.py:186] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-26 05:01:49,182 - services.whatsapp_service - INFO - [whatsapp_service.py:52] - ‚ö†Ô∏è WhatsApp Service initialized without validation - call validate_config() before use
2025-07-26 05:01:49,189 - main - INFO - [main.py:30] - üöÄ Business Chat Assistant starting up...
2025-07-26 05:01:49,189 - main - INFO - [main.py:31] - ‚úÖ CORS middleware configured
2025-07-26 05:01:49,190 - main - INFO - [main.py:35] - ‚úÖ Chat routes registered
2025-07-26 05:01:49,193 - main - INFO - [main.py:39] - ‚úÖ WhatsApp routes registered
2025-07-26 05:01:49,196 - main - INFO - [main.py:84] - üéâ Business Chat Assistant with WhatsApp Integration is ready to serve requests!
2025-07-26 05:01:49,196 - main - INFO - [main.py:85] - üì± WhatsApp webhook endpoint: /whatsapp/webhook
2025-07-26 05:01:49,197 - main - INFO - [main.py:86] - üìä WhatsApp status endpoint: /whatsapp/status
2025-07-26 05:02:22,212 - main - INFO - [main.py:90] - üëã Business Chat Assistant is shutting down...
2025-07-26 05:02:23,652 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-26 05:02:26,636 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-26 05:02:26,729 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-26 05:02:26,734 - faiss - INFO - [__init__.py:186] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-26 05:02:34,351 - services.whatsapp_service - INFO - [whatsapp_service.py:52] - ‚ö†Ô∏è WhatsApp Service initialized without validation - call validate_config() before use
2025-07-26 05:02:34,358 - main - INFO - [main.py:30] - üöÄ Business Chat Assistant starting up...
2025-07-26 05:02:34,358 - main - INFO - [main.py:31] - ‚úÖ CORS middleware configured
2025-07-26 05:02:34,359 - main - INFO - [main.py:35] - ‚úÖ Chat routes registered
2025-07-26 05:02:34,363 - main - INFO - [main.py:39] - ‚úÖ WhatsApp routes registered
2025-07-26 05:02:34,365 - main - INFO - [main.py:84] - üéâ Business Chat Assistant with WhatsApp Integration is ready to serve requests!
2025-07-26 05:02:34,365 - main - INFO - [main.py:85] - üì± WhatsApp webhook endpoint: /whatsapp/webhook
2025-07-26 05:02:34,365 - main - INFO - [main.py:86] - üìä WhatsApp status endpoint: /whatsapp/status
2025-07-26 05:02:34,366 - main - INFO - [main.py:90] - üëã Business Chat Assistant is shutting down...
2025-07-26 05:02:35,831 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-26 05:02:38,745 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-26 05:02:38,834 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-26 05:02:38,839 - faiss - INFO - [__init__.py:186] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-26 05:02:46,681 - services.whatsapp_service - INFO - [whatsapp_service.py:52] - ‚ö†Ô∏è WhatsApp Service initialized without validation - call validate_config() before use
2025-07-26 05:02:46,706 - main - INFO - [main.py:29] - üöÄ Business Chat Assistant starting up...
2025-07-26 05:02:46,706 - main - INFO - [main.py:30] - ‚úÖ CORS middleware configured
2025-07-26 05:02:46,708 - main - INFO - [main.py:34] - ‚úÖ Chat routes registered
2025-07-26 05:02:46,712 - main - INFO - [main.py:38] - ‚úÖ WhatsApp routes registered
2025-07-26 05:02:46,714 - main - INFO - [main.py:49] - üéâ Business Chat Assistant with WhatsApp Integration is ready to serve requests!
2025-07-26 05:02:46,715 - main - INFO - [main.py:50] - üì± WhatsApp webhook endpoint: /whatsapp/webhook
2025-07-26 05:02:46,715 - main - INFO - [main.py:51] - üìä WhatsApp status endpoint: /whatsapp/status
2025-07-26 05:02:48,504 - routes.whatsapp_routes - WARNING - [whatsapp_routes.py:35] - ‚ö†Ô∏è Webhook verification received at root path - check your webhook URL configuration!
2025-07-26 05:02:48,504 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:36] - Redirecting verification: mode=subscribe, token=business-a..., challenge=2126090587
2025-07-26 05:02:48,504 - services.whatsapp_service - INFO - [whatsapp_service.py:311] - ‚úÖ Webhook verification successful
2025-07-26 05:02:48,504 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:45] - ‚úÖ Webhook verification successful (via root endpoint)
2025-07-26 05:05:50,050 - main - INFO - [main.py:55] - üëã Business Chat Assistant is shutting down...
2025-07-26 05:05:51,437 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-26 05:05:54,509 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-26 05:05:54,605 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-26 05:05:54,611 - faiss - INFO - [__init__.py:186] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-26 05:06:02,526 - services.whatsapp_service - INFO - [whatsapp_service.py:52] - ‚ö†Ô∏è WhatsApp Service initialized without validation - call validate_config() before use
2025-07-26 05:06:02,531 - main - INFO - [main.py:29] - üöÄ Business Chat Assistant starting up...
2025-07-26 05:06:02,531 - main - INFO - [main.py:30] - ‚úÖ CORS middleware configured
2025-07-26 05:06:02,532 - main - INFO - [main.py:34] - ‚úÖ Chat routes registered
2025-07-26 05:06:02,533 - main - INFO - [main.py:38] - ‚úÖ WhatsApp routes registered
2025-07-26 05:06:02,535 - main - INFO - [main.py:49] - üéâ Business Chat Assistant with WhatsApp Integration is ready to serve requests!
2025-07-26 05:06:02,535 - main - INFO - [main.py:50] - üì± WhatsApp webhook endpoint: /whatsapp/webhook
2025-07-26 05:06:02,536 - main - INFO - [main.py:51] - üìä WhatsApp status endpoint: /whatsapp/status
2025-07-26 05:06:02,536 - main - INFO - [main.py:55] - üëã Business Chat Assistant is shutting down...
2025-07-26 05:06:03,865 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-26 05:06:06,723 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-26 05:06:06,817 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-26 05:06:06,822 - faiss - INFO - [__init__.py:186] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-26 05:06:14,570 - services.whatsapp_service - INFO - [whatsapp_service.py:52] - ‚ö†Ô∏è WhatsApp Service initialized without validation - call validate_config() before use
2025-07-26 05:06:14,575 - main - INFO - [main.py:29] - üöÄ Business Chat Assistant starting up...
2025-07-26 05:06:14,576 - main - INFO - [main.py:30] - ‚úÖ CORS middleware configured
2025-07-26 05:06:14,576 - main - INFO - [main.py:34] - ‚úÖ Chat routes registered
2025-07-26 05:06:14,578 - main - INFO - [main.py:38] - ‚úÖ WhatsApp routes registered
2025-07-26 05:06:14,579 - main - INFO - [main.py:49] - üéâ Business Chat Assistant with WhatsApp Integration is ready to serve requests!
2025-07-26 05:06:14,580 - main - INFO - [main.py:50] - üì± WhatsApp webhook endpoint: /whatsapp/webhook
2025-07-26 05:06:14,580 - main - INFO - [main.py:51] - üìä WhatsApp status endpoint: /whatsapp/status
2025-07-26 05:06:20,846 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:104] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "contacts": [
              {
                "profile": {
                  "name": "Nipul Viduranga"
                },
                "wa_id": "947139...
2025-07-26 05:06:20,846 - services.whatsapp_service - INFO - [whatsapp_service.py:284] - üì® Received WhatsApp message from 94713966820: Hi...
2025-07-26 05:06:20,846 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:123] - ‚úÖ Message queued for processing from 94713966820
2025-07-26 05:06:20,848 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:45] - ü§ñ Processing message from 94713966820: Hi...
2025-07-26 05:06:20,848 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:29] - Creating new chatbot session for 94713966820
2025-07-26 05:06:24,701 - agent.language_agent - INFO - [language_agent.py:211] - [LanguageAgent] Combined detection: english (rule: 0.50, llm: english)
2025-07-26 05:06:24,701 - agent.agent - INFO - [agent.py:480] - [Language] Detected language: english (confidence: 0.70) for message: 'Hi'
2025-07-26 05:06:24,701 - agent.agent - INFO - [agent.py:484] - [Optimized] Detected intent: general_inquiry for message: 'Hi' in 3.68s
2025-07-26 05:06:24,702 - vector_store.vector_store - INFO - [vector_store.py:38] - [FastVectorStore] Loading embeddings...
2025-07-26 05:06:24,852 - vector_store.vector_store - INFO - [vector_store.py:48] - [FastVectorStore] Loaded 53744 Bitext documents
2025-07-26 05:06:24,905 - vector_store.vector_store - INFO - [vector_store.py:79] - [FastVectorStore] Built FAISS index with 53744 vectors
2025-07-26 05:06:24,905 - vector_store.vector_store - INFO - [vector_store.py:82] - [FastVectorStore] Loading embedding model all-MiniLM-L6-v2...
2025-07-26 05:06:24,908 - sentence_transformers.SentenceTransformer - INFO - [SentenceTransformer.py:219] - Use pytorch device_name: cpu
2025-07-26 05:06:24,908 - sentence_transformers.SentenceTransformer - INFO - [SentenceTransformer.py:227] - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-07-26 05:06:31,858 - vector_store.vector_store - INFO - [vector_store.py:85] - [FastVectorStore] Embedding model all-MiniLM-L6-v2 loaded
2025-07-26 05:06:31,858 - vector_store.vector_store - INFO - [vector_store.py:92] - [FastVectorStore] Embeddings and model loaded in 7.16s
2025-07-26 05:06:34,815 - vector_store.vector_store - INFO - [vector_store.py:142] - [FastVectorStore] Found match at index 16487 with distance 2.4827
2025-07-26 05:06:34,815 - agent.agent - INFO - [agent.py:488] - [Optimized] Retrieved RAG examples: We're all ears! I'm tuned into the idea that you're unsure about the steps to speak to our customer support team. Don't worry; I'm here to guide you. To get in touch with our dedicated customer suppor... (Intent: contact_customer_service)... for intent: general_inquiry
2025-07-26 05:06:38,858 - agent.agent - ERROR - [agent.py:548] - [Optimized] Async logging error: invalid literal for int() with base 10: 'default_seller'
2025-07-26 05:06:38,858 - agent.agent - INFO - [agent.py:520] - [Optimized] Total processing time: 17.83s, Language: english
2025-07-26 05:06:38,858 - services.whatsapp_service - INFO - [whatsapp_service.py:137] - Sending WhatsApp message to 94713966820: Hello! How can I assist you today? üòä...
2025-07-26 05:06:39,376 - services.whatsapp_service - ERROR - [whatsapp_service.py:152] - ‚ùå Failed to send WhatsApp message: 401 Client Error: Unauthorized for url: https://graph.facebook.com/v22.0/762208246965801/messages
2025-07-26 05:06:39,377 - routes.whatsapp_routes - ERROR - [whatsapp_routes.py:61] - ‚ùå Failed to send response to 94713966820: 401 Client Error: Unauthorized for url: https://graph.facebook.com/v22.0/762208246965801/messages
2025-07-26 05:06:40,052 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:104] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "contacts": [
              {
                "profile": {
                  "name": "Nipul Viduranga"
                },
                "wa_id": "947139...
2025-07-26 05:06:40,053 - services.whatsapp_service - INFO - [whatsapp_service.py:284] - üì® Received WhatsApp message from 94713966820: Hi...
2025-07-26 05:06:40,054 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:123] - ‚úÖ Message queued for processing from 94713966820
2025-07-26 05:06:40,055 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:45] - ü§ñ Processing message from 94713966820: Hi...
2025-07-26 05:06:40,055 - agent.agent - INFO - [agent.py:480] - [Language] Detected language: english (confidence: 0.70) for message: 'Hi'
2025-07-26 05:06:40,055 - agent.agent - INFO - [agent.py:484] - [Optimized] Detected intent: general_inquiry for message: 'Hi' in 0.00s
2025-07-26 05:06:40,056 - agent.agent - INFO - [agent.py:488] - [Optimized] Retrieved RAG examples: We're all ears! I'm tuned into the idea that you're unsure about the steps to speak to our customer support team. Don't worry; I'm here to guide you. To get in touch with our dedicated customer suppor... (Intent: contact_customer_service)... for intent: general_inquiry
2025-07-26 05:06:44,707 - agent.agent - ERROR - [agent.py:548] - [Optimized] Async logging error: invalid literal for int() with base 10: 'default_seller'
2025-07-26 05:06:44,707 - agent.agent - INFO - [agent.py:520] - [Optimized] Total processing time: 4.65s, Language: english
2025-07-26 05:06:44,707 - services.whatsapp_service - INFO - [whatsapp_service.py:137] - Sending WhatsApp message to 94713966820: Hello again! üòä How can I help you today? Let me kn...
2025-07-26 05:06:45,220 - services.whatsapp_service - ERROR - [whatsapp_service.py:152] - ‚ùå Failed to send WhatsApp message: 401 Client Error: Unauthorized for url: https://graph.facebook.com/v22.0/762208246965801/messages
2025-07-26 05:06:45,221 - routes.whatsapp_routes - ERROR - [whatsapp_routes.py:61] - ‚ùå Failed to send response to 94713966820: 401 Client Error: Unauthorized for url: https://graph.facebook.com/v22.0/762208246965801/messages
2025-07-26 05:08:38,314 - main - INFO - [main.py:55] - üëã Business Chat Assistant is shutting down...
2025-07-26 05:08:40,963 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-26 05:08:48,723 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-26 05:08:48,901 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-26 05:08:48,939 - faiss - INFO - [__init__.py:186] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-26 05:09:09,838 - services.whatsapp_service - INFO - [whatsapp_service.py:52] - ‚ö†Ô∏è WhatsApp Service initialized without validation - call validate_config() before use
2025-07-26 05:09:09,843 - main - INFO - [main.py:29] - üöÄ Business Chat Assistant starting up...
2025-07-26 05:09:09,843 - main - INFO - [main.py:30] - ‚úÖ CORS middleware configured
2025-07-26 05:09:09,844 - main - INFO - [main.py:34] - ‚úÖ Chat routes registered
2025-07-26 05:09:09,846 - main - INFO - [main.py:38] - ‚úÖ WhatsApp routes registered
2025-07-26 05:09:09,847 - main - INFO - [main.py:49] - üéâ Business Chat Assistant with WhatsApp Integration is ready to serve requests!
2025-07-26 05:09:09,847 - main - INFO - [main.py:50] - üì± WhatsApp webhook endpoint: /whatsapp/webhook
2025-07-26 05:09:09,847 - main - INFO - [main.py:51] - üìä WhatsApp status endpoint: /whatsapp/status
2025-07-26 05:09:56,796 - main - INFO - [main.py:55] - üëã Business Chat Assistant is shutting down...
2025-07-26 05:09:58,226 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-26 05:10:01,121 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-26 05:10:01,206 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-26 05:10:01,212 - faiss - INFO - [__init__.py:186] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-26 05:10:08,753 - services.whatsapp_service - INFO - [whatsapp_service.py:52] - ‚ö†Ô∏è WhatsApp Service initialized without validation - call validate_config() before use
2025-07-26 05:10:08,759 - main - INFO - [main.py:29] - üöÄ Business Chat Assistant starting up...
2025-07-26 05:10:08,759 - main - INFO - [main.py:30] - ‚úÖ CORS middleware configured
2025-07-26 05:10:08,760 - main - INFO - [main.py:34] - ‚úÖ Chat routes registered
2025-07-26 05:10:08,763 - main - INFO - [main.py:38] - ‚úÖ WhatsApp routes registered
2025-07-26 05:10:08,764 - main - INFO - [main.py:49] - üéâ Business Chat Assistant with WhatsApp Integration is ready to serve requests!
2025-07-26 05:10:08,764 - main - INFO - [main.py:50] - üì± WhatsApp webhook endpoint: /whatsapp/webhook
2025-07-26 05:10:08,765 - main - INFO - [main.py:51] - üìä WhatsApp status endpoint: /whatsapp/status
2025-07-26 05:10:29,145 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:104] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "contacts": [
              {
                "profile": {
                  "name": "Nipul Viduranga"
                },
                "wa_id": "94713966820"
              }
            ],
            "messages": [
              {
                "from": "94713966820",
                "id": "wamid.HBgLOTQ3MTM5NjY4MjAVAgASGCBGRjE1RjI4Qjg4Rjg5ODk0RjIzNjM5MkVFREZEMjRDNAA=",
                "timestamp": "1753486392",
                "text": {
                  "body": "Hi"
                },
                "type": "text"
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 05:10:29,146 - services.whatsapp_service - INFO - [whatsapp_service.py:284] - üì® Received WhatsApp message from 94713966820: Hi...
2025-07-26 05:10:29,146 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:123] - ‚úÖ Message queued for processing from 94713966820
2025-07-26 05:10:29,147 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:45] - ü§ñ Processing message from 94713966820: Hi...
2025-07-26 05:10:29,147 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:29] - Creating new chatbot session for 94713966820
2025-07-26 05:10:32,532 - agent.language_agent - INFO - [language_agent.py:211] - [LanguageAgent] Combined detection: english (rule: 0.50, llm: english)
2025-07-26 05:10:32,532 - agent.agent - INFO - [agent.py:480] - [Language] Detected language: english (confidence: 0.70) for message: 'Hi'
2025-07-26 05:10:32,533 - agent.agent - INFO - [agent.py:484] - [Optimized] Detected intent: general_inquiry for message: 'Hi' in 3.33s
2025-07-26 05:10:32,533 - vector_store.vector_store - INFO - [vector_store.py:38] - [FastVectorStore] Loading embeddings...
2025-07-26 05:10:33,334 - vector_store.vector_store - INFO - [vector_store.py:48] - [FastVectorStore] Loaded 53744 Bitext documents
2025-07-26 05:10:33,368 - vector_store.vector_store - INFO - [vector_store.py:79] - [FastVectorStore] Built FAISS index with 53744 vectors
2025-07-26 05:10:33,368 - vector_store.vector_store - INFO - [vector_store.py:82] - [FastVectorStore] Loading embedding model all-MiniLM-L6-v2...
2025-07-26 05:10:33,371 - sentence_transformers.SentenceTransformer - INFO - [SentenceTransformer.py:219] - Use pytorch device_name: cpu
2025-07-26 05:10:33,371 - sentence_transformers.SentenceTransformer - INFO - [SentenceTransformer.py:227] - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-07-26 05:10:42,572 - vector_store.vector_store - INFO - [vector_store.py:85] - [FastVectorStore] Embedding model all-MiniLM-L6-v2 loaded
2025-07-26 05:10:42,573 - vector_store.vector_store - INFO - [vector_store.py:92] - [FastVectorStore] Embeddings and model loaded in 10.04s
2025-07-26 05:10:42,635 - vector_store.vector_store - INFO - [vector_store.py:142] - [FastVectorStore] Found match at index 16487 with distance 2.4827
2025-07-26 05:10:42,635 - agent.agent - INFO - [agent.py:488] - [Optimized] Retrieved RAG examples: We're all ears! I'm tuned into the idea that you're unsure about the steps to speak to our customer support team. Don't worry; I'm here to guide you. To get in touch with our dedicated customer suppor... (Intent: contact_customer_service)... for intent: general_inquiry
2025-07-26 05:10:46,359 - agent.agent - ERROR - [agent.py:548] - [Optimized] Async logging error: invalid literal for int() with base 10: 'default_seller'
2025-07-26 05:10:46,359 - agent.agent - INFO - [agent.py:520] - [Optimized] Total processing time: 17.15s, Language: english
2025-07-26 05:10:46,359 - services.whatsapp_service - INFO - [whatsapp_service.py:137] - Sending WhatsApp message to 94713966820: Hello! How can I assist you today? üòä...
2025-07-26 05:10:47,156 - services.whatsapp_service - ERROR - [whatsapp_service.py:152] - ‚ùå Failed to send WhatsApp message: 401 Client Error: Unauthorized for url: https://graph.facebook.com/v22.0/762208246965801/messages
2025-07-26 05:10:47,157 - routes.whatsapp_routes - ERROR - [whatsapp_routes.py:61] - ‚ùå Failed to send response to 94713966820: 401 Client Error: Unauthorized for url: https://graph.facebook.com/v22.0/762208246965801/messages
2025-07-26 05:12:23,877 - main - INFO - [main.py:55] - üëã Business Chat Assistant is shutting down...
2025-07-26 05:13:04,229 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-26 05:13:04,315 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-26 05:13:04,332 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-26 05:13:04,337 - faiss - INFO - [__init__.py:186] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-26 05:13:11,209 - vector_store.vector_store - INFO - [vector_store.py:38] - [FastVectorStore] Loading embeddings...
2025-07-26 05:13:11,330 - vector_store.vector_store - INFO - [vector_store.py:48] - [FastVectorStore] Loaded 53744 Bitext documents
2025-07-26 05:13:11,462 - vector_store.vector_store - INFO - [vector_store.py:79] - [FastVectorStore] Built FAISS index with 53744 vectors
2025-07-26 05:13:11,462 - vector_store.vector_store - INFO - [vector_store.py:82] - [FastVectorStore] Loading embedding model all-MiniLM-L6-v2...
2025-07-26 05:13:11,464 - sentence_transformers.SentenceTransformer - INFO - [SentenceTransformer.py:219] - Use pytorch device_name: cpu
2025-07-26 05:13:11,464 - sentence_transformers.SentenceTransformer - INFO - [SentenceTransformer.py:227] - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-07-26 05:13:19,972 - vector_store.vector_store - INFO - [vector_store.py:85] - [FastVectorStore] Embedding model all-MiniLM-L6-v2 loaded
2025-07-26 05:13:19,973 - vector_store.vector_store - INFO - [vector_store.py:92] - [FastVectorStore] Embeddings and model loaded in 8.76s
2025-07-26 05:13:20,261 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-26 05:13:23,199 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-26 05:13:23,297 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-26 05:13:23,303 - faiss - INFO - [__init__.py:186] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-26 05:13:30,653 - services.whatsapp_service - INFO - [whatsapp_service.py:52] - ‚ö†Ô∏è WhatsApp Service initialized without validation - call validate_config() before use
2025-07-26 05:13:30,659 - main - INFO - [main.py:29] - üöÄ Business Chat Assistant starting up...
2025-07-26 05:13:30,659 - main - INFO - [main.py:30] - ‚úÖ CORS middleware configured
2025-07-26 05:13:30,660 - main - INFO - [main.py:34] - ‚úÖ Chat routes registered
2025-07-26 05:13:30,662 - main - INFO - [main.py:38] - ‚úÖ WhatsApp routes registered
2025-07-26 05:13:30,663 - main - INFO - [main.py:49] - üéâ Business Chat Assistant with WhatsApp Integration is ready to serve requests!
2025-07-26 05:13:30,663 - main - INFO - [main.py:50] - üì± WhatsApp webhook endpoint: /whatsapp/webhook
2025-07-26 05:13:30,664 - main - INFO - [main.py:51] - üìä WhatsApp status endpoint: /whatsapp/status
2025-07-26 05:16:07,277 - main - INFO - [main.py:55] - üëã Business Chat Assistant is shutting down...
2025-07-26 05:16:08,960 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-26 05:16:11,863 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-26 05:16:11,956 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-26 05:16:11,961 - faiss - INFO - [__init__.py:186] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-26 05:16:19,967 - services.whatsapp_service - INFO - [whatsapp_service.py:52] - ‚ö†Ô∏è WhatsApp Service initialized without validation - call validate_config() before use
2025-07-26 05:16:19,972 - main - INFO - [main.py:29] - üöÄ Business Chat Assistant starting up...
2025-07-26 05:16:19,973 - main - INFO - [main.py:30] - ‚úÖ CORS middleware configured
2025-07-26 05:16:19,975 - main - INFO - [main.py:34] - ‚úÖ Chat routes registered
2025-07-26 05:16:19,978 - main - INFO - [main.py:38] - ‚úÖ WhatsApp routes registered
2025-07-26 05:16:19,979 - main - INFO - [main.py:49] - üéâ Business Chat Assistant with WhatsApp Integration is ready to serve requests!
2025-07-26 05:16:19,979 - main - INFO - [main.py:50] - üì± WhatsApp webhook endpoint: /whatsapp/webhook
2025-07-26 05:16:19,979 - main - INFO - [main.py:51] - üìä WhatsApp status endpoint: /whatsapp/status
2025-07-26 05:16:20,693 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:104] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "contacts": [
              {
                "profile": {
                  "name": "Nipul Viduranga"
                },
                "wa_id": "94713966820"
              }
            ],
            "messages": [
              {
                "from": "94713966820",
                "id": "wamid.HBgLOTQ3MTM5NjY4MjAVAgASGCBGRDVGNjc0MjYxOUJERTE3N0U2QzIyRTA0NTE2MjU0OAA=",
                "timestamp": "1753487123",
                "text": {
                  "body": "How are you"
                },
                "type": "text"
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 05:16:20,694 - services.whatsapp_service - INFO - [whatsapp_service.py:284] - üì® Received WhatsApp message from 94713966820: How are you...
2025-07-26 05:16:20,694 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:123] - ‚úÖ Message queued for processing from 94713966820
2025-07-26 05:16:20,695 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:45] - ü§ñ Processing message from 94713966820: How are you...
2025-07-26 05:16:20,695 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:29] - Creating new chatbot session for 94713966820
2025-07-26 05:16:25,399 - agent.language_agent - INFO - [language_agent.py:211] - [LanguageAgent] Combined detection: english (rule: 0.50, llm: english)
2025-07-26 05:16:25,400 - agent.agent - INFO - [agent.py:480] - [Language] Detected language: english (confidence: 0.70) for message: 'How are you'
2025-07-26 05:16:25,400 - agent.agent - INFO - [agent.py:484] - [Optimized] Detected intent: general_inquiry for message: 'How are you' in 4.63s
2025-07-26 05:16:25,400 - vector_store.vector_store - INFO - [vector_store.py:38] - [FastVectorStore] Loading embeddings...
2025-07-26 05:16:25,504 - vector_store.vector_store - INFO - [vector_store.py:48] - [FastVectorStore] Loaded 53744 Bitext documents
2025-07-26 05:16:25,532 - vector_store.vector_store - INFO - [vector_store.py:79] - [FastVectorStore] Built FAISS index with 53744 vectors
2025-07-26 05:16:25,532 - vector_store.vector_store - INFO - [vector_store.py:82] - [FastVectorStore] Loading embedding model all-MiniLM-L6-v2...
2025-07-26 05:16:25,534 - sentence_transformers.SentenceTransformer - INFO - [SentenceTransformer.py:219] - Use pytorch device_name: cpu
2025-07-26 05:16:25,535 - sentence_transformers.SentenceTransformer - INFO - [SentenceTransformer.py:227] - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-07-26 05:16:33,486 - vector_store.vector_store - INFO - [vector_store.py:85] - [FastVectorStore] Embedding model all-MiniLM-L6-v2 loaded
2025-07-26 05:16:33,487 - vector_store.vector_store - INFO - [vector_store.py:92] - [FastVectorStore] Embeddings and model loaded in 8.09s
2025-07-26 05:16:33,617 - vector_store.vector_store - INFO - [vector_store.py:142] - [FastVectorStore] Found match at index 14425 with distance 2.3746
2025-07-26 05:16:33,618 - agent.agent - INFO - [agent.py:488] - [Optimized] Retrieved RAG examples: I'm aware that you're feeling dissatisfied with our work, and I apologize for any inconvenience caused. Your feedback is crucial to us, and I want to ensure that your concern is addressed promptly and... (Intent: complaint)... for intent: general_inquiry
2025-07-26 05:16:37,479 - agent.agent - ERROR - [agent.py:548] - [Optimized] Async logging error: invalid literal for int() with base 10: 'default_seller'
2025-07-26 05:16:37,479 - agent.agent - INFO - [agent.py:520] - [Optimized] Total processing time: 16.71s, Language: english
2025-07-26 05:16:37,480 - services.whatsapp_service - INFO - [whatsapp_service.py:137] - Sending WhatsApp message to 94713966820: I'm doing well, thank you for asking! How can I as...
2025-07-26 05:16:38,613 - services.whatsapp_service - INFO - [whatsapp_service.py:143] - ‚úÖ Message sent successfully. Message ID: wamid.HBgLOTQ3MTM5NjY4MjAVAgARGBJCN0Y1OTc4QTVEODNGRDExMzMA
2025-07-26 05:16:38,613 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:57] - ‚úÖ Response sent to 94713966820: I'm doing well, thank you for asking! How can I as...
2025-07-26 05:16:39,325 - services.whatsapp_service - INFO - [whatsapp_service.py:344] - ‚úÖ Message wamid.HBgLOTQ3MTM5NjY4MjAVAgASGCBGRDVGNjc0MjYxOUJERTE3N0U2QzIyRTA0NTE2MjU0OAA= marked as read
2025-07-26 05:16:39,910 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:104] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "contacts": [
              {
                "profile": {
                  "name": "Nipul Viduranga"
                },
                "wa_id": "94713966820"
              }
            ],
            "messages": [
              {
                "from": "94713966820",
                "id": "wamid.HBgLOTQ3MTM5NjY4MjAVAgASGCAyNTJBNkYxMjhENTk0MTdDOUYyQjM2REY2ODkyQkREMwA=",
                "timestamp": "1753487079",
                "text": {
                  "body": "Hi"
                },
                "type": "text"
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 05:16:39,910 - services.whatsapp_service - INFO - [whatsapp_service.py:284] - üì® Received WhatsApp message from 94713966820: Hi...
2025-07-26 05:16:39,911 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:123] - ‚úÖ Message queued for processing from 94713966820
2025-07-26 05:16:39,912 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:45] - ü§ñ Processing message from 94713966820: Hi...
2025-07-26 05:16:43,266 - agent.language_agent - INFO - [language_agent.py:211] - [LanguageAgent] Combined detection: english (rule: 0.50, llm: english)
2025-07-26 05:16:43,266 - agent.agent - INFO - [agent.py:480] - [Language] Detected language: english (confidence: 0.70) for message: 'Hi'
2025-07-26 05:16:43,267 - agent.agent - INFO - [agent.py:484] - [Optimized] Detected intent: general_inquiry for message: 'Hi' in 3.36s
2025-07-26 05:16:43,284 - vector_store.vector_store - INFO - [vector_store.py:142] - [FastVectorStore] Found match at index 16487 with distance 2.4827
2025-07-26 05:16:43,285 - agent.agent - INFO - [agent.py:488] - [Optimized] Retrieved RAG examples: We're all ears! I'm tuned into the idea that you're unsure about the steps to speak to our customer support team. Don't worry; I'm here to guide you. To get in touch with our dedicated customer suppor... (Intent: contact_customer_service)... for intent: general_inquiry
2025-07-26 05:16:47,228 - agent.agent - ERROR - [agent.py:548] - [Optimized] Async logging error: invalid literal for int() with base 10: 'default_seller'
2025-07-26 05:16:47,229 - agent.agent - INFO - [agent.py:520] - [Optimized] Total processing time: 7.32s, Language: english
2025-07-26 05:16:47,229 - services.whatsapp_service - INFO - [whatsapp_service.py:137] - Sending WhatsApp message to 94713966820: Hello! How can I help you today? üòä...
2025-07-26 05:16:48,353 - services.whatsapp_service - INFO - [whatsapp_service.py:143] - ‚úÖ Message sent successfully. Message ID: wamid.HBgLOTQ3MTM5NjY4MjAVAgARGBI0OERENUE5RDMwQkE2MjU2QTcA
2025-07-26 05:16:48,354 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:57] - ‚úÖ Response sent to 94713966820: Hello! How can I help you today? üòä...
2025-07-26 05:16:49,012 - services.whatsapp_service - INFO - [whatsapp_service.py:344] - ‚úÖ Message wamid.HBgLOTQ3MTM5NjY4MjAVAgASGCAyNTJBNkYxMjhENTk0MTdDOUYyQjM2REY2ODkyQkREMwA= marked as read
2025-07-26 05:16:49,015 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:104] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MTM5NjY4MjAVAgARGBJCN0Y1OTc4QTVEODNGRDExMzMA",
                "status": "sent",
                "timestamp": "1753487198",
                "recipient_id": "94713966820",
                "conversation": {
                  "id": "9740acb83233789ee16252731099e4b2",
                  "expiration_timestamp": "1753487198",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 05:16:49,016 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 05:16:49,017 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:125] - üìù Webhook received but no message to process (might be status update)
2025-07-26 05:16:49,626 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:104] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MTM5NjY4MjAVAgARGBJCN0Y1OTc4QTVEODNGRDExMzMA",
                "status": "delivered",
                "timestamp": "1753487199",
                "recipient_id": "94713966820",
                "conversation": {
                  "id": "9740acb83233789ee16252731099e4b2",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 05:16:49,627 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 05:16:49,627 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:125] - üìù Webhook received but no message to process (might be status update)
2025-07-26 05:16:50,856 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:104] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MTM5NjY4MjAVAgARGBI0OERENUE5RDMwQkE2MjU2QTcA",
                "status": "delivered",
                "timestamp": "1753487209",
                "recipient_id": "94713966820",
                "conversation": {
                  "id": "97fdfec0c608c260df5db0c7d5760a30",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 05:16:50,857 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 05:16:50,857 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:125] - üìù Webhook received but no message to process (might be status update)
2025-07-26 05:16:50,888 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:104] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MTM5NjY4MjAVAgARGBI0OERENUE5RDMwQkE2MjU2QTcA",
                "status": "sent",
                "timestamp": "1753487208",
                "recipient_id": "94713966820",
                "conversation": {
                  "id": "97fdfec0c608c260df5db0c7d5760a30",
                  "expiration_timestamp": "1753487208",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 05:16:50,897 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 05:16:50,898 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:125] - üìù Webhook received but no message to process (might be status update)
2025-07-26 08:27:52,775 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:104] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "contacts": [
              {
                "profile": {
                  "name": "Nipul Viduranga"
                },
                "wa_id": "94713966820"
              }
            ],
            "messages": [
              {
                "from": "94713966820",
                "id": "wamid.HBgLOTQ3MTM5NjY4MjAVAgASGCA4QzVENDRBNjgxOTE3NDRFMzkwMThERkUzNTMwMzhCMwA=",
                "timestamp": "1753498670",
                "text": {
                  "body": "Hi"
                },
                "type": "text"
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 08:27:52,776 - services.whatsapp_service - INFO - [whatsapp_service.py:284] - üì® Received WhatsApp message from 94713966820: Hi...
2025-07-26 08:27:52,777 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:123] - ‚úÖ Message queued for processing from 94713966820
2025-07-26 08:27:52,778 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:45] - ü§ñ Processing message from 94713966820: Hi...
2025-07-26 08:27:52,779 - agent.agent - INFO - [agent.py:480] - [Language] Detected language: english (confidence: 0.70) for message: 'Hi'
2025-07-26 08:27:52,779 - agent.agent - INFO - [agent.py:484] - [Optimized] Detected intent: general_inquiry for message: 'Hi' in 0.00s
2025-07-26 08:27:52,779 - agent.agent - INFO - [agent.py:488] - [Optimized] Retrieved RAG examples: We're all ears! I'm tuned into the idea that you're unsure about the steps to speak to our customer support team. Don't worry; I'm here to guide you. To get in touch with our dedicated customer suppor... (Intent: contact_customer_service)... for intent: general_inquiry
2025-07-26 08:27:57,493 - agent.agent - ERROR - [agent.py:548] - [Optimized] Async logging error: invalid literal for int() with base 10: 'default_seller'
2025-07-26 08:27:57,494 - agent.agent - INFO - [agent.py:520] - [Optimized] Total processing time: 4.71s, Language: english
2025-07-26 08:27:57,494 - services.whatsapp_service - INFO - [whatsapp_service.py:137] - Sending WhatsApp message to 94713966820: Hello again! üòä Is there anything I can assist you ...
2025-07-26 08:27:58,158 - services.whatsapp_service - ERROR - [whatsapp_service.py:152] - ‚ùå Failed to send WhatsApp message: 401 Client Error: Unauthorized for url: https://graph.facebook.com/v22.0/762208246965801/messages
2025-07-26 08:27:58,160 - routes.whatsapp_routes - ERROR - [whatsapp_routes.py:61] - ‚ùå Failed to send response to 94713966820: 401 Client Error: Unauthorized for url: https://graph.facebook.com/v22.0/762208246965801/messages
2025-07-26 08:28:28,813 - main - INFO - [main.py:55] - üëã Business Chat Assistant is shutting down...
2025-07-26 08:28:36,312 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-26 08:28:50,278 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-26 08:28:50,467 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-26 08:28:50,505 - faiss - INFO - [__init__.py:186] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-26 08:29:10,663 - services.whatsapp_service - INFO - [whatsapp_service.py:52] - ‚ö†Ô∏è WhatsApp Service initialized without validation - call validate_config() before use
2025-07-26 08:29:10,668 - main - INFO - [main.py:29] - üöÄ Business Chat Assistant starting up...
2025-07-26 08:29:10,668 - main - INFO - [main.py:30] - ‚úÖ CORS middleware configured
2025-07-26 08:29:10,669 - main - INFO - [main.py:34] - ‚úÖ Chat routes registered
2025-07-26 08:29:10,671 - main - INFO - [main.py:38] - ‚úÖ WhatsApp routes registered
2025-07-26 08:29:10,673 - main - INFO - [main.py:49] - üéâ Business Chat Assistant with WhatsApp Integration is ready to serve requests!
2025-07-26 08:29:10,673 - main - INFO - [main.py:50] - üì± WhatsApp webhook endpoint: /whatsapp/webhook
2025-07-26 08:29:10,673 - main - INFO - [main.py:51] - üìä WhatsApp status endpoint: /whatsapp/status
2025-07-26 08:30:27,289 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:104] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MTM5NjY4MjAVAgARGBI0OERENUE5RDMwQkE2MjU2QTcA",
                "status": "read",
                "timestamp": "1753498442",
                "recipient_id": "94713966820"
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 08:30:27,289 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 08:30:27,289 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:125] - üìù Webhook received but no message to process (might be status update)
2025-07-26 08:31:09,087 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:104] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MTM5NjY4MjAVAgARGBJCN0Y1OTc4QTVEODNGRDExMzMA",
                "status": "read",
                "timestamp": "1753498442",
                "recipient_id": "94713966820"
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 08:31:09,088 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 08:31:09,088 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:125] - üìù Webhook received but no message to process (might be status update)
2025-07-26 08:35:33,384 - main - INFO - [main.py:55] - üëã Business Chat Assistant is shutting down...
2025-07-26 08:35:38,332 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-26 08:35:38,417 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-26 08:35:38,462 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-26 08:35:38,467 - faiss - INFO - [__init__.py:186] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-26 08:35:45,017 - vector_store.vector_store - INFO - [vector_store.py:38] - [FastVectorStore] Loading embeddings...
2025-07-26 08:35:46,013 - vector_store.vector_store - INFO - [vector_store.py:48] - [FastVectorStore] Loaded 53744 Bitext documents
2025-07-26 08:35:46,041 - vector_store.vector_store - INFO - [vector_store.py:79] - [FastVectorStore] Built FAISS index with 53744 vectors
2025-07-26 08:35:46,041 - vector_store.vector_store - INFO - [vector_store.py:82] - [FastVectorStore] Loading embedding model all-MiniLM-L6-v2...
2025-07-26 08:35:46,043 - sentence_transformers.SentenceTransformer - INFO - [SentenceTransformer.py:219] - Use pytorch device_name: cpu
2025-07-26 08:35:46,043 - sentence_transformers.SentenceTransformer - INFO - [SentenceTransformer.py:227] - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-07-26 08:35:57,239 - vector_store.vector_store - INFO - [vector_store.py:85] - [FastVectorStore] Embedding model all-MiniLM-L6-v2 loaded
2025-07-26 08:35:57,239 - vector_store.vector_store - INFO - [vector_store.py:92] - [FastVectorStore] Embeddings and model loaded in 12.22s
2025-07-26 08:35:57,509 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-26 08:36:00,431 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-26 08:36:00,524 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-26 08:36:00,530 - faiss - INFO - [__init__.py:186] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-26 08:36:08,333 - services.whatsapp_service - INFO - [whatsapp_service.py:52] - ‚ö†Ô∏è WhatsApp Service initialized without validation - call validate_config() before use
2025-07-26 08:36:08,338 - main - INFO - [main.py:29] - üöÄ Business Chat Assistant starting up...
2025-07-26 08:36:08,338 - main - INFO - [main.py:30] - ‚úÖ CORS middleware configured
2025-07-26 08:36:08,339 - main - INFO - [main.py:34] - ‚úÖ Chat routes registered
2025-07-26 08:36:08,342 - main - INFO - [main.py:38] - ‚úÖ WhatsApp routes registered
2025-07-26 08:36:08,343 - main - INFO - [main.py:49] - üéâ Business Chat Assistant with WhatsApp Integration is ready to serve requests!
2025-07-26 08:36:08,344 - main - INFO - [main.py:50] - üì± WhatsApp webhook endpoint: /whatsapp/webhook
2025-07-26 08:36:08,344 - main - INFO - [main.py:51] - üìä WhatsApp status endpoint: /whatsapp/status
2025-07-26 08:36:13,818 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:104] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "contacts": [
              {
                "profile": {
                  "name": "Nipul Viduranga"
                },
                "wa_id": "94713966820"
              }
            ],
            "messages": [
              {
                "from": "94713966820",
                "id": "wamid.HBgLOTQ3MTM5NjY4MjAVAgASGCA2NTY3RUQwMTA3RDhGRDk2NUVEM0M1MERDQ0QyQzlDMAA=",
                "timestamp": "1753499171",
                "text": {
                  "body": "Hi"
                },
                "type": "text"
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 08:36:13,818 - services.whatsapp_service - INFO - [whatsapp_service.py:284] - üì® Received WhatsApp message from 94713966820: Hi...
2025-07-26 08:36:13,818 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:123] - ‚úÖ Message queued for processing from 94713966820
2025-07-26 08:36:13,820 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:45] - ü§ñ Processing message from 94713966820: Hi...
2025-07-26 08:36:13,820 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:29] - Creating new chatbot session for 94713966820
2025-07-26 08:36:18,332 - agent.language_agent - INFO - [language_agent.py:211] - [LanguageAgent] Combined detection: english (rule: 0.50, llm: english)
2025-07-26 08:36:18,332 - agent.agent - INFO - [agent.py:480] - [Language] Detected language: english (confidence: 0.70) for message: 'Hi'
2025-07-26 08:36:18,332 - agent.agent - INFO - [agent.py:484] - [Optimized] Detected intent: general_inquiry for message: 'Hi' in 4.45s
2025-07-26 08:36:18,333 - vector_store.vector_store - INFO - [vector_store.py:38] - [FastVectorStore] Loading embeddings...
2025-07-26 08:36:18,570 - vector_store.vector_store - INFO - [vector_store.py:48] - [FastVectorStore] Loaded 53744 Bitext documents
2025-07-26 08:36:18,603 - vector_store.vector_store - INFO - [vector_store.py:79] - [FastVectorStore] Built FAISS index with 53744 vectors
2025-07-26 08:36:18,604 - vector_store.vector_store - INFO - [vector_store.py:82] - [FastVectorStore] Loading embedding model all-MiniLM-L6-v2...
2025-07-26 08:36:18,606 - sentence_transformers.SentenceTransformer - INFO - [SentenceTransformer.py:219] - Use pytorch device_name: cpu
2025-07-26 08:36:18,606 - sentence_transformers.SentenceTransformer - INFO - [SentenceTransformer.py:227] - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-07-26 08:36:26,293 - vector_store.vector_store - INFO - [vector_store.py:85] - [FastVectorStore] Embedding model all-MiniLM-L6-v2 loaded
2025-07-26 08:36:26,293 - vector_store.vector_store - INFO - [vector_store.py:92] - [FastVectorStore] Embeddings and model loaded in 7.96s
2025-07-26 08:36:26,954 - vector_store.vector_store - INFO - [vector_store.py:142] - [FastVectorStore] Found match at index 16487 with distance 2.4827
2025-07-26 08:36:26,955 - agent.agent - INFO - [agent.py:488] - [Optimized] Retrieved RAG examples: We're all ears! I'm tuned into the idea that you're unsure about the steps to speak to our customer support team. Don't worry; I'm here to guide you. To get in touch with our dedicated customer suppor... (Intent: contact_customer_service)... for intent: general_inquiry
2025-07-26 08:36:31,012 - agent.agent - ERROR - [agent.py:548] - [Optimized] Async logging error: invalid literal for int() with base 10: 'default_seller'
2025-07-26 08:36:31,012 - agent.agent - INFO - [agent.py:520] - [Optimized] Total processing time: 17.13s, Language: english
2025-07-26 08:36:31,012 - services.whatsapp_service - INFO - [whatsapp_service.py:137] - Sending WhatsApp message to 94713966820: Hello! How can I assist you today? üòä...
2025-07-26 08:36:32,323 - services.whatsapp_service - INFO - [whatsapp_service.py:143] - ‚úÖ Message sent successfully. Message ID: wamid.HBgLOTQ3MTM5NjY4MjAVAgARGBIwQ0YzNTQxRkE3QzBBQ0ZCOUYA
2025-07-26 08:36:32,324 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:57] - ‚úÖ Response sent to 94713966820: Hello! How can I assist you today? üòä...
2025-07-26 08:36:33,067 - services.whatsapp_service - INFO - [whatsapp_service.py:344] - ‚úÖ Message wamid.HBgLOTQ3MTM5NjY4MjAVAgASGCA2NTY3RUQwMTA3RDhGRDk2NUVEM0M1MERDQ0QyQzlDMAA= marked as read
2025-07-26 08:36:33,890 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:104] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MTM5NjY4MjAVAgARGBIwQ0YzNTQxRkE3QzBBQ0ZCOUYA",
                "status": "sent",
                "timestamp": "1753499192",
                "recipient_id": "94713966820",
                "conversation": {
                  "id": "dbbab6ddcc261ae097f30807aab9d787",
                  "expiration_timestamp": "1753499192",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 08:36:33,891 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 08:36:33,891 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:125] - üìù Webhook received but no message to process (might be status update)
2025-07-26 08:36:34,410 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:104] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MTM5NjY4MjAVAgARGBIwQ0YzNTQxRkE3QzBBQ0ZCOUYA",
                "status": "delivered",
                "timestamp": "1753499192",
                "recipient_id": "94713966820",
                "conversation": {
                  "id": "dbbab6ddcc261ae097f30807aab9d787",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 08:36:34,411 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 08:36:34,411 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:125] - üìù Webhook received but no message to process (might be status update)
2025-07-26 08:36:35,630 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:104] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MTM5NjY4MjAVAgARGBIwQ0YzNTQxRkE3QzBBQ0ZCOUYA",
                "status": "read",
                "timestamp": "1753499193",
                "recipient_id": "94713966820",
                "conversation": {
                  "id": "dbbab6ddcc261ae097f30807aab9d787",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 08:36:35,630 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 08:36:35,631 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:125] - üìù Webhook received but no message to process (might be status update)
2025-07-26 08:36:57,951 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:104] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "contacts": [
              {
                "profile": {
                  "name": "Nipul Viduranga"
                },
                "wa_id": "94713966820"
              }
            ],
            "messages": [
              {
                "from": "94713966820",
                "id": "wamid.HBgLOTQ3MTM5NjY4MjAVAgASGCA0QUY5RkIwM0JBMEZGMDQ4RDU5RUI0RUJERTM0REZCNwA=",
                "timestamp": "1753499216",
                "text": {
                  "body": "What are the priducts do you have"
                },
                "type": "text"
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 08:36:57,951 - services.whatsapp_service - INFO - [whatsapp_service.py:284] - üì® Received WhatsApp message from 94713966820: What are the priducts do you have...
2025-07-26 08:36:57,952 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:123] - ‚úÖ Message queued for processing from 94713966820
2025-07-26 08:36:57,952 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:45] - ü§ñ Processing message from 94713966820: What are the priducts do you have...
2025-07-26 08:37:01,738 - agent.language_agent - INFO - [language_agent.py:211] - [LanguageAgent] Combined detection: english (rule: 0.64, llm: english)
2025-07-26 08:37:01,739 - agent.agent - INFO - [agent.py:480] - [Language] Detected language: english (confidence: 0.84) for message: 'What are the priducts do you have'
2025-07-26 08:37:01,739 - agent.agent - INFO - [agent.py:484] - [Optimized] Detected intent: general_inquiry for message: 'What are the priducts do you have' in 3.79s
2025-07-26 08:37:02,157 - vector_store.vector_store - INFO - [vector_store.py:142] - [FastVectorStore] Found match at index 14425 with distance 2.4260
2025-07-26 08:37:02,157 - agent.agent - INFO - [agent.py:488] - [Optimized] Retrieved RAG examples: I'm aware that you're feeling dissatisfied with our work, and I apologize for any inconvenience caused. Your feedback is crucial to us, and I want to ensure that your concern is addressed promptly and... (Intent: complaint)... for intent: general_inquiry
2025-07-26 08:37:07,168 - agent.agent - ERROR - [agent.py:525] - [Optimized] Error: invalid literal for int() with base 10: 'default_seller'
2025-07-26 08:37:07,168 - services.whatsapp_service - INFO - [whatsapp_service.py:137] - Sending WhatsApp message to 94713966820: I'm experiencing technical difficulties. Please tr...
2025-07-26 08:37:08,700 - services.whatsapp_service - INFO - [whatsapp_service.py:143] - ‚úÖ Message sent successfully. Message ID: wamid.HBgLOTQ3MTM5NjY4MjAVAgARGBI2MjVBNzMzQTc2QjExQzVDOEUA
2025-07-26 08:37:08,701 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:57] - ‚úÖ Response sent to 94713966820: I'm experiencing technical difficulties. Please tr...
2025-07-26 08:37:09,520 - services.whatsapp_service - INFO - [whatsapp_service.py:344] - ‚úÖ Message wamid.HBgLOTQ3MTM5NjY4MjAVAgASGCA0QUY5RkIwM0JBMEZGMDQ4RDU5RUI0RUJERTM0REZCNwA= marked as read
2025-07-26 08:37:10,144 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:104] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MTM5NjY4MjAVAgARGBI2MjVBNzMzQTc2QjExQzVDOEUA",
                "status": "sent",
                "timestamp": "1753499228",
                "recipient_id": "94713966820",
                "conversation": {
                  "id": "b4d6056ac8ff3d3ffd0794cabe154bed",
                  "expiration_timestamp": "1753499228",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 08:37:10,145 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 08:37:10,145 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:125] - üìù Webhook received but no message to process (might be status update)
2025-07-26 08:37:10,853 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:104] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MTM5NjY4MjAVAgARGBI2MjVBNzMzQTc2QjExQzVDOEUA",
                "status": "read",
                "timestamp": "1753499229",
                "recipient_id": "94713966820",
                "conversation": {
                  "id": "b4d6056ac8ff3d3ffd0794cabe154bed",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 08:37:10,853 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 08:37:10,854 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:125] - üìù Webhook received but no message to process (might be status update)
2025-07-26 08:37:10,854 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:104] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MTM5NjY4MjAVAgARGBI2MjVBNzMzQTc2QjExQzVDOEUA",
                "status": "delivered",
                "timestamp": "1753499228",
                "recipient_id": "94713966820",
                "conversation": {
                  "id": "b4d6056ac8ff3d3ffd0794cabe154bed",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 08:37:10,856 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 08:37:10,856 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:125] - üìù Webhook received but no message to process (might be status update)
2025-07-26 08:39:13,003 - main - INFO - [main.py:55] - üëã Business Chat Assistant is shutting down...
2025-07-26 08:39:14,447 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-26 08:39:17,507 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-26 08:39:17,592 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-26 08:39:17,596 - faiss - INFO - [__init__.py:186] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-26 08:39:25,372 - services.whatsapp_service - INFO - [whatsapp_service.py:52] - ‚ö†Ô∏è WhatsApp Service initialized without validation - call validate_config() before use
2025-07-26 08:39:25,377 - main - INFO - [main.py:29] - üöÄ Business Chat Assistant starting up...
2025-07-26 08:39:25,377 - main - INFO - [main.py:30] - ‚úÖ CORS middleware configured
2025-07-26 08:39:25,378 - main - INFO - [main.py:34] - ‚úÖ Chat routes registered
2025-07-26 08:39:25,379 - main - INFO - [main.py:38] - ‚úÖ WhatsApp routes registered
2025-07-26 08:39:25,381 - main - INFO - [main.py:49] - üéâ Business Chat Assistant with WhatsApp Integration is ready to serve requests!
2025-07-26 08:39:25,381 - main - INFO - [main.py:50] - üì± WhatsApp webhook endpoint: /whatsapp/webhook
2025-07-26 08:39:25,381 - main - INFO - [main.py:51] - üìä WhatsApp status endpoint: /whatsapp/status
2025-07-26 08:40:45,423 - main - INFO - [main.py:55] - üëã Business Chat Assistant is shutting down...
2025-07-26 08:40:46,813 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-26 08:40:49,565 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-26 08:40:49,652 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-26 08:40:49,656 - faiss - INFO - [__init__.py:186] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-26 08:40:56,996 - services.whatsapp_service - INFO - [whatsapp_service.py:52] - ‚ö†Ô∏è WhatsApp Service initialized without validation - call validate_config() before use
2025-07-26 08:40:57,001 - main - INFO - [main.py:29] - üöÄ Business Chat Assistant starting up...
2025-07-26 08:40:57,002 - main - INFO - [main.py:30] - ‚úÖ CORS middleware configured
2025-07-26 08:40:57,003 - main - INFO - [main.py:34] - ‚úÖ Chat routes registered
2025-07-26 08:40:57,005 - main - INFO - [main.py:38] - ‚úÖ WhatsApp routes registered
2025-07-26 08:40:57,006 - main - INFO - [main.py:49] - üéâ Business Chat Assistant with WhatsApp Integration is ready to serve requests!
2025-07-26 08:40:57,006 - main - INFO - [main.py:50] - üì± WhatsApp webhook endpoint: /whatsapp/webhook
2025-07-26 08:40:57,006 - main - INFO - [main.py:51] - üìä WhatsApp status endpoint: /whatsapp/status
2025-07-26 08:41:00,941 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:104] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "contacts": [
              {
                "profile": {
                  "name": "Nipul Viduranga"
                },
                "wa_id": "94713966820"
              }
            ],
            "messages": [
              {
                "from": "94713966820",
                "id": "wamid.HBgLOTQ3MTM5NjY4MjAVAgASGCAzRDk1MkJCRUM4N0NGQjQwQUY1M0FDQTNEMTUwNDY5OAA=",
                "timestamp": "1753499458",
                "text": {
                  "body": "Hi"
                },
                "type": "text"
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 08:41:00,941 - services.whatsapp_service - INFO - [whatsapp_service.py:284] - üì® Received WhatsApp message from 94713966820: Hi...
2025-07-26 08:41:00,941 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:123] - ‚úÖ Message queued for processing from 94713966820
2025-07-26 08:41:00,943 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:45] - ü§ñ Processing message from 94713966820: Hi...
2025-07-26 08:41:00,943 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:29] - Creating new chatbot session for 94713966820
2025-07-26 08:41:05,352 - agent.language_agent - INFO - [language_agent.py:211] - [LanguageAgent] Combined detection: english (rule: 0.50, llm: english)
2025-07-26 08:41:05,352 - agent.agent - INFO - [agent.py:480] - [Language] Detected language: english (confidence: 0.70) for message: 'Hi'
2025-07-26 08:41:05,353 - agent.agent - INFO - [agent.py:484] - [Optimized] Detected intent: general_inquiry for message: 'Hi' in 4.35s
2025-07-26 08:41:05,360 - agent.agent - ERROR - [agent.py:525] - [Optimized] Error: "Input to ChatPromptTemplate is missing variables {'examples'}.  Expected: ['agent_scratchpad', 'chat_history', 'examples', 'input'] Received: ['input', 'intent', 'chat_history', 'intermediate_steps', 'agent_scratchpad']\nNote: if you intended {examples} to be part of the string and not a variable, please escape it with double curly braces like: '{{examples}}'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT "
2025-07-26 08:41:05,360 - services.whatsapp_service - INFO - [whatsapp_service.py:137] - Sending WhatsApp message to 94713966820: I'm experiencing technical difficulties. Please tr...
2025-07-26 08:41:06,775 - services.whatsapp_service - INFO - [whatsapp_service.py:143] - ‚úÖ Message sent successfully. Message ID: wamid.HBgLOTQ3MTM5NjY4MjAVAgARGBI4MjBDNjgxNkIyOTc3MUMyRjEA
2025-07-26 08:41:06,775 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:57] - ‚úÖ Response sent to 94713966820: I'm experiencing technical difficulties. Please tr...
2025-07-26 08:41:07,902 - services.whatsapp_service - INFO - [whatsapp_service.py:344] - ‚úÖ Message wamid.HBgLOTQ3MTM5NjY4MjAVAgASGCAzRDk1MkJCRUM4N0NGQjQwQUY1M0FDQTNEMTUwNDY5OAA= marked as read
2025-07-26 08:41:08,620 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:104] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MTM5NjY4MjAVAgARGBI4MjBDNjgxNkIyOTc3MUMyRjEA",
                "status": "sent",
                "timestamp": "1753499466",
                "recipient_id": "94713966820",
                "conversation": {
                  "id": "6eb64c5f24152a88d495eb19f40705d8",
                  "expiration_timestamp": "1753499466",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 08:41:08,621 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 08:41:08,621 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:125] - üìù Webhook received but no message to process (might be status update)
2025-07-26 08:41:08,675 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:104] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MTM5NjY4MjAVAgARGBI4MjBDNjgxNkIyOTc3MUMyRjEA",
                "status": "read",
                "timestamp": "1753499467",
                "recipient_id": "94713966820",
                "conversation": {
                  "id": "6eb64c5f24152a88d495eb19f40705d8",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 08:41:08,675 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 08:41:08,675 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:125] - üìù Webhook received but no message to process (might be status update)
2025-07-26 08:41:09,135 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:104] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MTM5NjY4MjAVAgARGBI4MjBDNjgxNkIyOTc3MUMyRjEA",
                "status": "delivered",
                "timestamp": "1753499467",
                "recipient_id": "94713966820",
                "conversation": {
                  "id": "6eb64c5f24152a88d495eb19f40705d8",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 08:41:09,135 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 08:41:09,136 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:125] - üìù Webhook received but no message to process (might be status update)
2025-07-26 08:42:04,410 - main - INFO - [main.py:55] - üëã Business Chat Assistant is shutting down...
2025-07-26 08:42:05,815 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-26 08:42:08,686 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-26 08:42:08,782 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-26 08:42:08,789 - faiss - INFO - [__init__.py:186] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-26 08:42:16,077 - services.whatsapp_service - INFO - [whatsapp_service.py:52] - ‚ö†Ô∏è WhatsApp Service initialized without validation - call validate_config() before use
2025-07-26 08:42:16,082 - main - INFO - [main.py:29] - üöÄ Business Chat Assistant starting up...
2025-07-26 08:42:16,082 - main - INFO - [main.py:30] - ‚úÖ CORS middleware configured
2025-07-26 08:42:16,083 - main - INFO - [main.py:34] - ‚úÖ Chat routes registered
2025-07-26 08:42:16,085 - main - INFO - [main.py:38] - ‚úÖ WhatsApp routes registered
2025-07-26 08:42:16,087 - main - INFO - [main.py:49] - üéâ Business Chat Assistant with WhatsApp Integration is ready to serve requests!
2025-07-26 08:42:16,087 - main - INFO - [main.py:50] - üì± WhatsApp webhook endpoint: /whatsapp/webhook
2025-07-26 08:42:16,087 - main - INFO - [main.py:51] - üìä WhatsApp status endpoint: /whatsapp/status
2025-07-26 08:42:22,039 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:104] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "contacts": [
              {
                "profile": {
                  "name": "Nipul Viduranga"
                },
                "wa_id": "94713966820"
              }
            ],
            "messages": [
              {
                "from": "94713966820",
                "id": "wamid.HBgLOTQ3MTM5NjY4MjAVAgASGCBDNkRBOUNENUM4ODc0M0ZBQzU3MTNGMThGNzI0MjA5MAA=",
                "timestamp": "1753499540",
                "text": {
                  "body": "Hello"
                },
                "type": "text"
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 08:42:22,040 - services.whatsapp_service - INFO - [whatsapp_service.py:284] - üì® Received WhatsApp message from 94713966820: Hello...
2025-07-26 08:42:22,040 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:123] - ‚úÖ Message queued for processing from 94713966820
2025-07-26 08:42:22,041 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:45] - ü§ñ Processing message from 94713966820: Hello...
2025-07-26 08:42:22,041 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:29] - Creating new chatbot session for 94713966820
2025-07-26 08:42:25,453 - agent.language_agent - INFO - [language_agent.py:211] - [LanguageAgent] Combined detection: english (rule: 0.50, llm: english)
2025-07-26 08:42:25,453 - agent.agent - INFO - [agent.py:480] - [Language] Detected language: english (confidence: 0.70) for message: 'Hello'
2025-07-26 08:42:25,453 - agent.agent - INFO - [agent.py:484] - [Optimized] Detected intent: general_inquiry for message: 'Hello' in 3.35s
2025-07-26 08:42:28,033 - agent.agent - INFO - [agent.py:520] - [Optimized] Total processing time: 5.93s, Language: english
2025-07-26 08:42:28,043 - services.whatsapp_service - INFO - [whatsapp_service.py:137] - Sending WhatsApp message to 94713966820: Hello! How can I assist you today?...
2025-07-26 08:42:29,106 - services.whatsapp_service - INFO - [whatsapp_service.py:143] - ‚úÖ Message sent successfully. Message ID: wamid.HBgLOTQ3MTM5NjY4MjAVAgARGBI0RUEwNjQ1RTZBRTQ3RDA0MEIA
2025-07-26 08:42:29,106 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:57] - ‚úÖ Response sent to 94713966820: Hello! How can I assist you today?...
2025-07-26 08:42:29,872 - services.whatsapp_service - INFO - [whatsapp_service.py:344] - ‚úÖ Message wamid.HBgLOTQ3MTM5NjY4MjAVAgASGCBDNkRBOUNENUM4ODc0M0ZBQzU3MTNGMThGNzI0MjA5MAA= marked as read
2025-07-26 08:42:30,987 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:104] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MTM5NjY4MjAVAgARGBI0RUEwNjQ1RTZBRTQ3RDA0MEIA",
                "status": "sent",
                "timestamp": "1753499549",
                "recipient_id": "94713966820",
                "conversation": {
                  "id": "49eb1f85a581a4a1bd435f45af245f90",
                  "expiration_timestamp": "1753499549",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 08:42:30,987 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 08:42:30,987 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:125] - üìù Webhook received but no message to process (might be status update)
2025-07-26 08:42:31,650 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:104] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MTM5NjY4MjAVAgARGBI0RUEwNjQ1RTZBRTQ3RDA0MEIA",
                "status": "delivered",
                "timestamp": "1753499549",
                "recipient_id": "94713966820",
                "conversation": {
                  "id": "49eb1f85a581a4a1bd435f45af245f90",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 08:42:31,651 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 08:42:31,651 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:125] - üìù Webhook received but no message to process (might be status update)
2025-07-26 08:42:31,768 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:104] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MTM5NjY4MjAVAgARGBI0RUEwNjQ1RTZBRTQ3RDA0MEIA",
                "status": "read",
                "timestamp": "1753499550",
                "recipient_id": "94713966820",
                "conversation": {
                  "id": "49eb1f85a581a4a1bd435f45af245f90",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 08:42:31,768 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 08:42:31,768 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:125] - üìù Webhook received but no message to process (might be status update)
2025-07-26 08:42:56,035 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:104] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "contacts": [
              {
                "profile": {
                  "name": "Nipul Viduranga"
                },
                "wa_id": "94713966820"
              }
            ],
            "messages": [
              {
                "from": "94713966820",
                "id": "wamid.HBgLOTQ3MTM5NjY4MjAVAgASGCAxRjAyRkRERkUxQjFEREI4NEY1NTFDQ0EwMkM4OTRGMwA=",
                "timestamp": "1753499574",
                "text": {
                  "body": "I need to buy product what are the products do you have"
                },
                "type": "text"
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 08:42:56,036 - services.whatsapp_service - INFO - [whatsapp_service.py:284] - üì® Received WhatsApp message from 94713966820: I need to buy product what are the products do you...
2025-07-26 08:42:56,036 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:123] - ‚úÖ Message queued for processing from 94713966820
2025-07-26 08:42:56,037 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:45] - ü§ñ Processing message from 94713966820: I need to buy product what are the products do you...
2025-07-26 08:42:59,925 - agent.language_agent - INFO - [language_agent.py:211] - [LanguageAgent] Combined detection: english (rule: 0.67, llm: english)
2025-07-26 08:42:59,926 - agent.agent - INFO - [agent.py:480] - [Language] Detected language: english (confidence: 0.87) for message: 'I need to buy product what are the products do you have'
2025-07-26 08:42:59,926 - agent.agent - INFO - [agent.py:484] - [Optimized] Detected intent: place_order for message: 'I need to buy product what are the products do you have' in 3.89s
2025-07-26 08:43:10,900 - agent.agent - INFO - [agent.py:520] - [Optimized] Total processing time: 14.86s, Language: english
2025-07-26 08:43:10,900 - services.whatsapp_service - INFO - [whatsapp_service.py:137] - Sending WhatsApp message to 94713966820: It seems there are currently no products available...
2025-07-26 08:43:12,621 - services.whatsapp_service - INFO - [whatsapp_service.py:143] - ‚úÖ Message sent successfully. Message ID: wamid.HBgLOTQ3MTM5NjY4MjAVAgARGBI0NzY0RUY1NjIwMDBDMzNGMjUA
2025-07-26 08:43:12,622 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:57] - ‚úÖ Response sent to 94713966820: It seems there are currently no products available...
2025-07-26 08:43:13,543 - services.whatsapp_service - INFO - [whatsapp_service.py:344] - ‚úÖ Message wamid.HBgLOTQ3MTM5NjY4MjAVAgASGCAxRjAyRkRERkUxQjFEREI4NEY1NTFDQ0EwMkM4OTRGMwA= marked as read
2025-07-26 08:43:14,160 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:104] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MTM5NjY4MjAVAgARGBI0NzY0RUY1NjIwMDBDMzNGMjUA",
                "status": "sent",
                "timestamp": "1753499592",
                "recipient_id": "94713966820",
                "conversation": {
                  "id": "c0fa7bc3b6618a4a77a30ad93fd68b79",
                  "expiration_timestamp": "1753499592",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 08:43:14,161 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 08:43:14,161 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:125] - üìù Webhook received but no message to process (might be status update)
2025-07-26 08:43:14,162 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:104] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MTM5NjY4MjAVAgARGBI0NzY0RUY1NjIwMDBDMzNGMjUA",
                "status": "delivered",
                "timestamp": "1753499592",
                "recipient_id": "94713966820",
                "conversation": {
                  "id": "c0fa7bc3b6618a4a77a30ad93fd68b79",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 08:43:14,162 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 08:43:14,163 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:125] - üìù Webhook received but no message to process (might be status update)
2025-07-26 08:43:14,670 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:104] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MTM5NjY4MjAVAgARGBI0NzY0RUY1NjIwMDBDMzNGMjUA",
                "status": "read",
                "timestamp": "1753499593",
                "recipient_id": "94713966820",
                "conversation": {
                  "id": "c0fa7bc3b6618a4a77a30ad93fd68b79",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 08:43:14,671 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 08:43:14,671 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:125] - üìù Webhook received but no message to process (might be status update)
2025-07-26 08:50:59,761 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:104] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "contacts": [
              {
                "profile": {
                  "name": "Nipul Viduranga"
                },
                "wa_id": "94713966820"
              }
            ],
            "messages": [
              {
                "from": "94713966820",
                "id": "wamid.HBgLOTQ3MTM5NjY4MjAVAgASGCAwRkM2M0Q1QjVDNkQ2NzIxMjE0OTkyRUM3MTg0NTY0NAA=",
                "timestamp": "1753500057",
                "text": {
                  "body": "What is your seller id"
                },
                "type": "text"
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 08:50:59,761 - services.whatsapp_service - INFO - [whatsapp_service.py:284] - üì® Received WhatsApp message from 94713966820: What is your seller id...
2025-07-26 08:50:59,762 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:123] - ‚úÖ Message queued for processing from 94713966820
2025-07-26 08:50:59,762 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:45] - ü§ñ Processing message from 94713966820: What is your seller id...
2025-07-26 08:51:04,469 - agent.language_agent - INFO - [language_agent.py:211] - [LanguageAgent] Combined detection: english (rule: 0.50, llm: english)
2025-07-26 08:51:04,469 - agent.agent - INFO - [agent.py:480] - [Language] Detected language: english (confidence: 0.70) for message: 'What is your seller id'
2025-07-26 08:51:04,470 - agent.agent - INFO - [agent.py:484] - [Optimized] Detected intent: general_inquiry for message: 'What is your seller id' in 4.71s
2025-07-26 08:51:10,621 - agent.agent - INFO - [agent.py:520] - [Optimized] Total processing time: 10.86s, Language: english
2025-07-26 08:51:10,621 - services.whatsapp_service - INFO - [whatsapp_service.py:137] - Sending WhatsApp message to 94713966820: I don't have a specific seller ID to share, as I'm...
2025-07-26 08:51:12,149 - services.whatsapp_service - INFO - [whatsapp_service.py:143] - ‚úÖ Message sent successfully. Message ID: wamid.HBgLOTQ3MTM5NjY4MjAVAgARGBI2NjE0NTY3REYxOEM5QzBDNTUA
2025-07-26 08:51:12,149 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:57] - ‚úÖ Response sent to 94713966820: I don't have a specific seller ID to share, as I'm...
2025-07-26 08:51:13,070 - services.whatsapp_service - INFO - [whatsapp_service.py:344] - ‚úÖ Message wamid.HBgLOTQ3MTM5NjY4MjAVAgASGCAwRkM2M0Q1QjVDNkQ2NzIxMjE0OTkyRUM3MTg0NTY0NAA= marked as read
2025-07-26 08:51:13,789 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:104] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MTM5NjY4MjAVAgARGBI2NjE0NTY3REYxOEM5QzBDNTUA",
                "status": "sent",
                "timestamp": "1753500072",
                "recipient_id": "94713966820",
                "conversation": {
                  "id": "c5e87a736aa887e08e7e305bc543c305",
                  "expiration_timestamp": "1753500072",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 08:51:13,790 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 08:51:13,790 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:125] - üìù Webhook received but no message to process (might be status update)
2025-07-26 08:51:14,199 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:104] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MTM5NjY4MjAVAgARGBI2NjE0NTY3REYxOEM5QzBDNTUA",
                "status": "delivered",
                "timestamp": "1753500072",
                "recipient_id": "94713966820",
                "conversation": {
                  "id": "c5e87a736aa887e08e7e305bc543c305",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 08:51:14,200 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 08:51:14,200 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:125] - üìù Webhook received but no message to process (might be status update)
2025-07-26 08:51:14,301 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:104] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MTM5NjY4MjAVAgARGBI2NjE0NTY3REYxOEM5QzBDNTUA",
                "status": "read",
                "timestamp": "1753500072",
                "recipient_id": "94713966820",
                "conversation": {
                  "id": "c5e87a736aa887e08e7e305bc543c305",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 08:51:14,301 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 08:51:14,301 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:125] - üìù Webhook received but no message to process (might be status update)
2025-07-26 08:56:54,583 - main - INFO - [main.py:55] - üëã Business Chat Assistant is shutting down...
2025-07-26 08:56:56,173 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-26 08:56:59,090 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-26 08:56:59,175 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-26 08:56:59,181 - faiss - INFO - [__init__.py:186] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-26 08:57:06,725 - services.whatsapp_service - INFO - [whatsapp_service.py:52] - ‚ö†Ô∏è WhatsApp Service initialized without validation - call validate_config() before use
2025-07-26 08:57:06,729 - main - INFO - [main.py:29] - üöÄ Business Chat Assistant starting up...
2025-07-26 08:57:06,729 - main - INFO - [main.py:30] - ‚úÖ CORS middleware configured
2025-07-26 08:57:06,730 - main - INFO - [main.py:34] - ‚úÖ Chat routes registered
2025-07-26 08:57:06,732 - main - INFO - [main.py:38] - ‚úÖ WhatsApp routes registered
2025-07-26 08:57:06,733 - main - INFO - [main.py:49] - üéâ Business Chat Assistant with WhatsApp Integration is ready to serve requests!
2025-07-26 08:57:06,734 - main - INFO - [main.py:50] - üì± WhatsApp webhook endpoint: /whatsapp/webhook
2025-07-26 08:57:06,734 - main - INFO - [main.py:51] - üìä WhatsApp status endpoint: /whatsapp/status
2025-07-26 09:32:28,658 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:104] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "contacts": [
              {
                "profile": {
                  "name": "Srinath"
                },
                "wa_id": "94703284362"
              }
            ],
            "messages": [
              {
                "from": "94703284362",
                "id": "wamid.HBgLOTQ3MDMyODQzNjIVAgASGBQzRjA3QjZENEFBQzRGQkJEQ0ExMAA=",
                "timestamp": "1753502544",
                "text": {
                  "body": "hi"
                },
                "type": "text"
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 09:32:28,659 - services.whatsapp_service - INFO - [whatsapp_service.py:284] - üì® Received WhatsApp message from 94703284362: hi...
2025-07-26 09:32:28,659 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:123] - ‚úÖ Message queued for processing from 94703284362
2025-07-26 09:32:28,660 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:45] - ü§ñ Processing message from 94703284362: hi...
2025-07-26 09:32:28,660 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:29] - Creating new chatbot session for 94703284362
2025-07-26 09:32:32,534 - agent.language_agent - INFO - [language_agent.py:211] - [LanguageAgent] Combined detection: english (rule: 0.50, llm: english)
2025-07-26 09:32:32,534 - agent.agent - INFO - [agent.py:480] - [Language] Detected language: english (confidence: 0.70) for message: 'hi'
2025-07-26 09:32:32,535 - agent.agent - INFO - [agent.py:484] - [Optimized] Detected intent: general_inquiry for message: 'hi' in 3.76s
2025-07-26 09:32:36,836 - agent.agent - INFO - [agent.py:520] - [Optimized] Total processing time: 8.06s, Language: english
2025-07-26 09:32:36,849 - services.whatsapp_service - INFO - [whatsapp_service.py:137] - Sending WhatsApp message to 94703284362: Hello! How can I assist you today? üòä...
2025-07-26 09:32:36,963 - agent.agent - ERROR - [agent.py:548] - [Optimized] Async logging error: (psycopg2.errors.NumericValueOutOfRange) integer out of range

[SQL: INSERT INTO chat_logs ("sellerId", "customerId", user_query, intent, entities, response, timestamp) VALUES (%(sellerId)s, %(customerId)s, %(user_query)s, %(intent)s, %(entities)s, %(response)s, %(timestamp)s) RETURNING chat_logs.id]
[parameters: {'sellerId': 762208246965801, 'customerId': '94703284362', 'user_query': 'hi', 'intent': 'general_inquiry', 'entities': 'fast_detected_lang_english', 'response': 'Hello! How can I assist you today? üòä', 'timestamp': datetime.datetime(2025, 7, 26, 4, 2, 36, 955792)}]
(Background on this error at: https://sqlalche.me/e/20/9h9h)
2025-07-26 09:32:38,362 - services.whatsapp_service - INFO - [whatsapp_service.py:143] - ‚úÖ Message sent successfully. Message ID: wamid.HBgLOTQ3MDMyODQzNjIVAgARGBIwMENFRjMyRjFEN0MxREU5NTYA
2025-07-26 09:32:38,364 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:57] - ‚úÖ Response sent to 94703284362: Hello! How can I assist you today? üòä...
2025-07-26 09:32:39,590 - services.whatsapp_service - INFO - [whatsapp_service.py:344] - ‚úÖ Message wamid.HBgLOTQ3MDMyODQzNjIVAgASGBQzRjA3QjZENEFBQzRGQkJEQ0ExMAA= marked as read
2025-07-26 09:32:40,207 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:104] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MDMyODQzNjIVAgARGBIwMENFRjMyRjFEN0MxREU5NTYA",
                "status": "sent",
                "timestamp": "1753502558",
                "recipient_id": "94703284362",
                "conversation": {
                  "id": "5188a7443ee849eddd36cbe4b82c1e08",
                  "expiration_timestamp": "1753502558",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 09:32:40,207 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 09:32:40,207 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:125] - üìù Webhook received but no message to process (might be status update)
2025-07-26 09:32:40,411 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:104] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MDMyODQzNjIVAgARGBIwMENFRjMyRjFEN0MxREU5NTYA",
                "status": "delivered",
                "timestamp": "1753502558",
                "recipient_id": "94703284362",
                "conversation": {
                  "id": "5188a7443ee849eddd36cbe4b82c1e08",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 09:32:40,412 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 09:32:40,412 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:125] - üìù Webhook received but no message to process (might be status update)
2025-07-26 09:32:53,625 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:104] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MDMyODQzNjIVAgARGBIwMENFRjMyRjFEN0MxREU5NTYA",
                "status": "read",
                "timestamp": "1753502572",
                "recipient_id": "94703284362"
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 09:32:53,625 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 09:32:53,625 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:125] - üìù Webhook received but no message to process (might be status update)
2025-07-26 09:33:02,020 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:104] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "contacts": [
              {
                "profile": {
                  "name": "Srinath"
                },
                "wa_id": "94703284362"
              }
            ],
            "messages": [
              {
                "from": "94703284362",
                "id": "wamid.HBgLOTQ3MDMyODQzNjIVAgASGBQzRjY4NEM0Q0Q2QzI1Mzg0QTBEMAA=",
                "timestamp": "1753502580",
                "text": {
                  "body": "what do you have to buy"
                },
                "type": "text"
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 09:33:02,021 - services.whatsapp_service - INFO - [whatsapp_service.py:284] - üì® Received WhatsApp message from 94703284362: what do you have to buy...
2025-07-26 09:33:02,021 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:123] - ‚úÖ Message queued for processing from 94703284362
2025-07-26 09:33:02,022 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:45] - ü§ñ Processing message from 94703284362: what do you have to buy...
2025-07-26 09:33:05,702 - agent.language_agent - INFO - [language_agent.py:211] - [LanguageAgent] Combined detection: english (rule: 0.50, llm: english)
2025-07-26 09:33:05,703 - agent.agent - INFO - [agent.py:480] - [Language] Detected language: english (confidence: 0.70) for message: 'what do you have to buy'
2025-07-26 09:33:05,703 - agent.agent - INFO - [agent.py:484] - [Optimized] Detected intent: place_order for message: 'what do you have to buy' in 3.68s
2025-07-26 09:33:16,868 - agent.agent - INFO - [agent.py:520] - [Optimized] Total processing time: 14.85s, Language: english
2025-07-26 09:33:16,868 - services.whatsapp_service - INFO - [whatsapp_service.py:137] - Sending WhatsApp message to 94703284362: It seems there are currently no products available...
2025-07-26 09:33:16,869 - agent.agent - ERROR - [agent.py:548] - [Optimized] Async logging error: (psycopg2.errors.NumericValueOutOfRange) integer out of range

[SQL: INSERT INTO chat_logs ("sellerId", "customerId", user_query, intent, entities, response, timestamp) VALUES (%(sellerId)s, %(customerId)s, %(user_query)s, %(intent)s, %(entities)s, %(response)s, %(timestamp)s) RETURNING chat_logs.id]
[parameters: {'sellerId': 762208246965801, 'customerId': '94703284362', 'user_query': 'what do you have to buy', 'intent': 'place_order', 'entities': 'fast_detected_lang_english', 'response': "It seems there are currently no products available for purchase. If you're looking for something specific, let me know, and I can check further or assist you in other ways! üòä", 'timestamp': datetime.datetime(2025, 7, 26, 4, 3, 16, 868151)}]
(Background on this error at: https://sqlalche.me/e/20/9h9h)
2025-07-26 09:33:18,509 - services.whatsapp_service - INFO - [whatsapp_service.py:143] - ‚úÖ Message sent successfully. Message ID: wamid.HBgLOTQ3MDMyODQzNjIVAgARGBIyNUM2OTA3RjA5NzZGQzgyMzgA
2025-07-26 09:33:18,510 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:57] - ‚úÖ Response sent to 94703284362: It seems there are currently no products available...
2025-07-26 09:33:20,535 - services.whatsapp_service - INFO - [whatsapp_service.py:344] - ‚úÖ Message wamid.HBgLOTQ3MDMyODQzNjIVAgASGBQzRjY4NEM0Q0Q2QzI1Mzg0QTBEMAA= marked as read
2025-07-26 09:33:21,781 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:104] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MDMyODQzNjIVAgARGBIyNUM2OTA3RjA5NzZGQzgyMzgA",
                "status": "read",
                "timestamp": "1753502598",
                "recipient_id": "94703284362"
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 09:33:21,782 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 09:33:21,782 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:125] - üìù Webhook received but no message to process (might be status update)
2025-07-26 09:33:21,783 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:104] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MDMyODQzNjIVAgARGBIyNUM2OTA3RjA5NzZGQzgyMzgA",
                "status": "delivered",
                "timestamp": "1753502598",
                "recipient_id": "94703284362",
                "conversation": {
                  "id": "895998b2c5b9ccbd45c146692b51125f",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 09:33:21,784 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 09:33:21,784 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:125] - üìù Webhook received but no message to process (might be status update)
2025-07-26 09:33:21,785 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:104] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MDMyODQzNjIVAgARGBIyNUM2OTA3RjA5NzZGQzgyMzgA",
                "status": "sent",
                "timestamp": "1753502598",
                "recipient_id": "94703284362",
                "conversation": {
                  "id": "895998b2c5b9ccbd45c146692b51125f",
                  "expiration_timestamp": "1753502598",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 09:33:21,785 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 09:33:21,786 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:125] - üìù Webhook received but no message to process (might be status update)
2025-07-26 09:33:21,786 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:104] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MDMyODQzNjIVAgARGBIyNUM2OTA3RjA5NzZGQzgyMzgA",
                "status": "delivered",
                "timestamp": "1753502598",
                "recipient_id": "94703284362",
                "conversation": {
                  "id": "895998b2c5b9ccbd45c146692b51125f",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 09:33:21,787 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 09:33:21,787 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:125] - üìù Webhook received but no message to process (might be status update)
2025-07-26 10:47:43,174 - main - INFO - [main.py:55] - üëã Business Chat Assistant is shutting down...
2025-07-26 10:47:47,509 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-26 10:48:10,464 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-26 10:48:11,159 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-26 10:48:11,213 - faiss - INFO - [__init__.py:186] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-26 10:49:14,452 - services.whatsapp_service - INFO - [whatsapp_service.py:52] - ‚ö†Ô∏è WhatsApp Service initialized without validation - call validate_config() before use
2025-07-26 10:49:14,457 - main - INFO - [main.py:29] - üöÄ Business Chat Assistant starting up...
2025-07-26 10:49:14,457 - main - INFO - [main.py:30] - ‚úÖ CORS middleware configured
2025-07-26 10:49:14,458 - main - INFO - [main.py:34] - ‚úÖ Chat routes registered
2025-07-26 10:49:14,461 - main - INFO - [main.py:38] - ‚úÖ WhatsApp routes registered
2025-07-26 10:49:14,462 - main - INFO - [main.py:49] - üéâ Business Chat Assistant with WhatsApp Integration is ready to serve requests!
2025-07-26 10:49:14,462 - main - INFO - [main.py:50] - üì± WhatsApp webhook endpoint: /whatsapp/webhook
2025-07-26 10:49:14,462 - main - INFO - [main.py:51] - üìä WhatsApp status endpoint: /whatsapp/status
2025-07-26 10:49:14,463 - main - INFO - [main.py:55] - üëã Business Chat Assistant is shutting down...
2025-07-26 10:49:15,943 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-26 10:49:19,014 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-26 10:49:19,101 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-26 10:49:19,107 - faiss - INFO - [__init__.py:186] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-26 10:49:26,773 - services.whatsapp_service - INFO - [whatsapp_service.py:52] - ‚ö†Ô∏è WhatsApp Service initialized without validation - call validate_config() before use
2025-07-26 10:49:26,780 - main - INFO - [main.py:29] - üöÄ Business Chat Assistant starting up...
2025-07-26 10:49:26,781 - main - INFO - [main.py:30] - ‚úÖ CORS middleware configured
2025-07-26 10:49:26,782 - main - INFO - [main.py:34] - ‚úÖ Chat routes registered
2025-07-26 10:49:26,785 - main - INFO - [main.py:38] - ‚úÖ WhatsApp routes registered
2025-07-26 10:49:26,787 - main - INFO - [main.py:49] - üéâ Business Chat Assistant with WhatsApp Integration is ready to serve requests!
2025-07-26 10:49:26,787 - main - INFO - [main.py:50] - üì± WhatsApp webhook endpoint: /whatsapp/webhook
2025-07-26 10:49:26,788 - main - INFO - [main.py:51] - üìä WhatsApp status endpoint: /whatsapp/status
2025-07-26 10:51:18,426 - main - INFO - [main.py:55] - üëã Business Chat Assistant is shutting down...
2025-07-26 10:51:19,880 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-26 10:51:22,853 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-26 10:51:22,965 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-26 10:51:22,971 - faiss - INFO - [__init__.py:186] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-26 10:51:30,596 - services.whatsapp_service - INFO - [whatsapp_service.py:52] - ‚ö†Ô∏è WhatsApp Service initialized without validation - call validate_config() before use
2025-07-26 10:51:30,602 - main - INFO - [main.py:29] - üöÄ Business Chat Assistant starting up...
2025-07-26 10:51:30,602 - main - INFO - [main.py:30] - ‚úÖ CORS middleware configured
2025-07-26 10:51:30,604 - main - INFO - [main.py:34] - ‚úÖ Chat routes registered
2025-07-26 10:51:30,605 - main - INFO - [main.py:38] - ‚úÖ WhatsApp routes registered
2025-07-26 10:51:30,606 - main - INFO - [main.py:49] - üéâ Business Chat Assistant with WhatsApp Integration is ready to serve requests!
2025-07-26 10:51:30,606 - main - INFO - [main.py:50] - üì± WhatsApp webhook endpoint: /whatsapp/webhook
2025-07-26 10:51:30,607 - main - INFO - [main.py:51] - üìä WhatsApp status endpoint: /whatsapp/status
2025-07-26 10:52:22,359 - main - INFO - [main.py:55] - üëã Business Chat Assistant is shutting down...
2025-07-26 10:52:23,783 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-26 10:52:26,639 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-26 10:52:26,728 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-26 10:52:26,733 - faiss - INFO - [__init__.py:186] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-26 10:52:34,163 - services.whatsapp_service - INFO - [whatsapp_service.py:52] - ‚ö†Ô∏è WhatsApp Service initialized without validation - call validate_config() before use
2025-07-26 10:52:34,167 - main - INFO - [main.py:29] - üöÄ Business Chat Assistant starting up...
2025-07-26 10:52:34,168 - main - INFO - [main.py:30] - ‚úÖ CORS middleware configured
2025-07-26 10:52:34,169 - main - INFO - [main.py:34] - ‚úÖ Chat routes registered
2025-07-26 10:52:34,171 - main - INFO - [main.py:38] - ‚úÖ WhatsApp routes registered
2025-07-26 10:52:34,173 - main - INFO - [main.py:49] - üéâ Business Chat Assistant with WhatsApp Integration is ready to serve requests!
2025-07-26 10:52:34,174 - main - INFO - [main.py:50] - üì± WhatsApp webhook endpoint: /whatsapp/webhook
2025-07-26 10:52:34,174 - main - INFO - [main.py:51] - üìä WhatsApp status endpoint: /whatsapp/status
2025-07-26 10:53:21,088 - main - INFO - [main.py:55] - üëã Business Chat Assistant is shutting down...
2025-07-26 10:53:22,586 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-26 10:53:25,492 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-26 10:53:25,595 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-26 10:53:25,602 - faiss - INFO - [__init__.py:186] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-26 10:53:34,007 - services.whatsapp_service - INFO - [whatsapp_service.py:52] - ‚ö†Ô∏è WhatsApp Service initialized without validation - call validate_config() before use
2025-07-26 10:53:34,012 - main - INFO - [main.py:29] - üöÄ Business Chat Assistant starting up...
2025-07-26 10:53:34,012 - main - INFO - [main.py:30] - ‚úÖ CORS middleware configured
2025-07-26 10:53:34,013 - main - INFO - [main.py:34] - ‚úÖ Chat routes registered
2025-07-26 10:53:34,016 - main - INFO - [main.py:38] - ‚úÖ WhatsApp routes registered
2025-07-26 10:53:34,017 - main - INFO - [main.py:49] - üéâ Business Chat Assistant with WhatsApp Integration is ready to serve requests!
2025-07-26 10:53:34,017 - main - INFO - [main.py:50] - üì± WhatsApp webhook endpoint: /whatsapp/webhook
2025-07-26 10:53:34,017 - main - INFO - [main.py:51] - üìä WhatsApp status endpoint: /whatsapp/status
2025-07-26 10:53:34,018 - main - INFO - [main.py:55] - üëã Business Chat Assistant is shutting down...
2025-07-26 10:53:35,480 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-26 10:53:38,523 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-26 10:53:38,613 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-26 10:53:38,619 - faiss - INFO - [__init__.py:186] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-26 10:53:46,825 - services.whatsapp_service - INFO - [whatsapp_service.py:52] - ‚ö†Ô∏è WhatsApp Service initialized without validation - call validate_config() before use
2025-07-26 10:53:46,831 - main - INFO - [main.py:29] - üöÄ Business Chat Assistant starting up...
2025-07-26 10:53:46,831 - main - INFO - [main.py:30] - ‚úÖ CORS middleware configured
2025-07-26 10:53:46,833 - main - INFO - [main.py:34] - ‚úÖ Chat routes registered
2025-07-26 10:53:46,835 - main - INFO - [main.py:38] - ‚úÖ WhatsApp routes registered
2025-07-26 10:53:46,836 - main - INFO - [main.py:49] - üéâ Business Chat Assistant with WhatsApp Integration is ready to serve requests!
2025-07-26 10:53:46,836 - main - INFO - [main.py:50] - üì± WhatsApp webhook endpoint: /whatsapp/webhook
2025-07-26 10:53:46,836 - main - INFO - [main.py:51] - üìä WhatsApp status endpoint: /whatsapp/status
2025-07-26 10:53:46,837 - main - INFO - [main.py:55] - üëã Business Chat Assistant is shutting down...
2025-07-26 10:53:48,369 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-26 10:53:51,363 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-26 10:53:51,455 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-26 10:53:51,461 - faiss - INFO - [__init__.py:186] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-26 10:53:59,696 - services.whatsapp_service - INFO - [whatsapp_service.py:52] - ‚ö†Ô∏è WhatsApp Service initialized without validation - call validate_config() before use
2025-07-26 10:53:59,702 - main - INFO - [main.py:29] - üöÄ Business Chat Assistant starting up...
2025-07-26 10:53:59,703 - main - INFO - [main.py:30] - ‚úÖ CORS middleware configured
2025-07-26 10:53:59,703 - main - INFO - [main.py:34] - ‚úÖ Chat routes registered
2025-07-26 10:53:59,705 - main - INFO - [main.py:38] - ‚úÖ WhatsApp routes registered
2025-07-26 10:53:59,707 - main - INFO - [main.py:49] - üéâ Business Chat Assistant with WhatsApp Integration is ready to serve requests!
2025-07-26 10:53:59,707 - main - INFO - [main.py:50] - üì± WhatsApp webhook endpoint: /whatsapp/webhook
2025-07-26 10:53:59,707 - main - INFO - [main.py:51] - üìä WhatsApp status endpoint: /whatsapp/status
2025-07-26 10:54:22,285 - main - INFO - [main.py:55] - üëã Business Chat Assistant is shutting down...
2025-07-26 10:54:23,834 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-26 10:54:26,819 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-26 10:54:26,917 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-26 10:54:26,921 - faiss - INFO - [__init__.py:186] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-26 10:54:34,816 - services.whatsapp_service - INFO - [whatsapp_service.py:52] - ‚ö†Ô∏è WhatsApp Service initialized without validation - call validate_config() before use
2025-07-26 10:54:34,821 - main - INFO - [main.py:29] - üöÄ Business Chat Assistant starting up...
2025-07-26 10:54:34,821 - main - INFO - [main.py:30] - ‚úÖ CORS middleware configured
2025-07-26 10:54:34,821 - main - INFO - [main.py:34] - ‚úÖ Chat routes registered
2025-07-26 10:54:34,824 - main - INFO - [main.py:38] - ‚úÖ WhatsApp routes registered
2025-07-26 10:54:34,825 - main - INFO - [main.py:49] - üéâ Business Chat Assistant with WhatsApp Integration is ready to serve requests!
2025-07-26 10:54:34,825 - main - INFO - [main.py:50] - üì± WhatsApp webhook endpoint: /whatsapp/webhook
2025-07-26 10:54:34,825 - main - INFO - [main.py:51] - üìä WhatsApp status endpoint: /whatsapp/status
2025-07-26 10:54:34,826 - main - INFO - [main.py:55] - üëã Business Chat Assistant is shutting down...
2025-07-26 10:54:36,201 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-26 10:54:39,213 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-26 10:54:39,308 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-26 10:54:39,315 - faiss - INFO - [__init__.py:186] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-26 10:54:47,123 - services.whatsapp_service - INFO - [whatsapp_service.py:52] - ‚ö†Ô∏è WhatsApp Service initialized without validation - call validate_config() before use
2025-07-26 10:54:47,128 - main - INFO - [main.py:29] - üöÄ Business Chat Assistant starting up...
2025-07-26 10:54:47,129 - main - INFO - [main.py:30] - ‚úÖ CORS middleware configured
2025-07-26 10:54:47,129 - main - INFO - [main.py:34] - ‚úÖ Chat routes registered
2025-07-26 10:54:47,132 - main - INFO - [main.py:38] - ‚úÖ WhatsApp routes registered
2025-07-26 10:54:47,133 - main - INFO - [main.py:49] - üéâ Business Chat Assistant with WhatsApp Integration is ready to serve requests!
2025-07-26 10:54:47,134 - main - INFO - [main.py:50] - üì± WhatsApp webhook endpoint: /whatsapp/webhook
2025-07-26 10:54:47,134 - main - INFO - [main.py:51] - üìä WhatsApp status endpoint: /whatsapp/status
2025-07-26 10:54:47,135 - main - INFO - [main.py:55] - üëã Business Chat Assistant is shutting down...
2025-07-26 10:54:48,527 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-26 10:54:51,494 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-26 10:54:51,583 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-26 10:54:51,588 - faiss - INFO - [__init__.py:186] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-26 10:54:59,589 - services.whatsapp_service - INFO - [whatsapp_service.py:52] - ‚ö†Ô∏è WhatsApp Service initialized without validation - call validate_config() before use
2025-07-26 10:54:59,595 - main - INFO - [main.py:29] - üöÄ Business Chat Assistant starting up...
2025-07-26 10:54:59,595 - main - INFO - [main.py:30] - ‚úÖ CORS middleware configured
2025-07-26 10:54:59,596 - main - INFO - [main.py:34] - ‚úÖ Chat routes registered
2025-07-26 10:54:59,598 - main - INFO - [main.py:38] - ‚úÖ WhatsApp routes registered
2025-07-26 10:54:59,600 - main - INFO - [main.py:49] - üéâ Business Chat Assistant with WhatsApp Integration is ready to serve requests!
2025-07-26 10:54:59,600 - main - INFO - [main.py:50] - üì± WhatsApp webhook endpoint: /whatsapp/webhook
2025-07-26 10:54:59,600 - main - INFO - [main.py:51] - üìä WhatsApp status endpoint: /whatsapp/status
2025-07-26 10:54:59,601 - main - INFO - [main.py:55] - üëã Business Chat Assistant is shutting down...
2025-07-26 10:55:01,031 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-26 10:55:04,154 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-26 10:55:04,253 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-26 10:55:04,259 - faiss - INFO - [__init__.py:186] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-26 10:55:12,841 - services.whatsapp_service - INFO - [whatsapp_service.py:52] - ‚ö†Ô∏è WhatsApp Service initialized without validation - call validate_config() before use
2025-07-26 10:55:12,846 - main - INFO - [main.py:29] - üöÄ Business Chat Assistant starting up...
2025-07-26 10:55:12,846 - main - INFO - [main.py:30] - ‚úÖ CORS middleware configured
2025-07-26 10:55:12,847 - main - INFO - [main.py:34] - ‚úÖ Chat routes registered
2025-07-26 10:55:12,849 - main - INFO - [main.py:38] - ‚úÖ WhatsApp routes registered
2025-07-26 10:55:12,849 - main - INFO - [main.py:49] - üéâ Business Chat Assistant with WhatsApp Integration is ready to serve requests!
2025-07-26 10:55:12,850 - main - INFO - [main.py:50] - üì± WhatsApp webhook endpoint: /whatsapp/webhook
2025-07-26 10:55:12,850 - main - INFO - [main.py:51] - üìä WhatsApp status endpoint: /whatsapp/status
2025-07-26 10:55:12,850 - main - INFO - [main.py:55] - üëã Business Chat Assistant is shutting down...
2025-07-26 10:55:14,277 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-26 10:55:17,324 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-26 10:55:17,436 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-26 10:55:17,441 - faiss - INFO - [__init__.py:186] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-26 10:55:25,584 - services.whatsapp_service - INFO - [whatsapp_service.py:52] - ‚ö†Ô∏è WhatsApp Service initialized without validation - call validate_config() before use
2025-07-26 10:55:25,590 - main - INFO - [main.py:29] - üöÄ Business Chat Assistant starting up...
2025-07-26 10:55:25,591 - main - INFO - [main.py:30] - ‚úÖ CORS middleware configured
2025-07-26 10:55:25,592 - main - INFO - [main.py:34] - ‚úÖ Chat routes registered
2025-07-26 10:55:25,593 - main - INFO - [main.py:38] - ‚úÖ WhatsApp routes registered
2025-07-26 10:55:25,595 - main - INFO - [main.py:49] - üéâ Business Chat Assistant with WhatsApp Integration is ready to serve requests!
2025-07-26 10:55:25,595 - main - INFO - [main.py:50] - üì± WhatsApp webhook endpoint: /whatsapp/webhook
2025-07-26 10:55:25,596 - main - INFO - [main.py:51] - üìä WhatsApp status endpoint: /whatsapp/status
2025-07-26 10:55:25,596 - main - INFO - [main.py:55] - üëã Business Chat Assistant is shutting down...
2025-07-26 10:55:27,031 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-26 10:55:30,001 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-26 10:55:30,089 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-26 10:55:30,093 - faiss - INFO - [__init__.py:186] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-26 10:55:38,240 - services.whatsapp_service - INFO - [whatsapp_service.py:52] - ‚ö†Ô∏è WhatsApp Service initialized without validation - call validate_config() before use
2025-07-26 10:55:38,245 - main - INFO - [main.py:29] - üöÄ Business Chat Assistant starting up...
2025-07-26 10:55:38,245 - main - INFO - [main.py:30] - ‚úÖ CORS middleware configured
2025-07-26 10:55:38,247 - main - INFO - [main.py:34] - ‚úÖ Chat routes registered
2025-07-26 10:55:38,249 - main - INFO - [main.py:38] - ‚úÖ WhatsApp routes registered
2025-07-26 10:55:38,250 - main - INFO - [main.py:49] - üéâ Business Chat Assistant with WhatsApp Integration is ready to serve requests!
2025-07-26 10:55:38,250 - main - INFO - [main.py:50] - üì± WhatsApp webhook endpoint: /whatsapp/webhook
2025-07-26 10:55:38,250 - main - INFO - [main.py:51] - üìä WhatsApp status endpoint: /whatsapp/status
2025-07-26 10:55:38,251 - main - INFO - [main.py:55] - üëã Business Chat Assistant is shutting down...
2025-07-26 10:55:39,667 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-26 10:55:42,553 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-26 10:55:42,640 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-26 10:55:42,646 - faiss - INFO - [__init__.py:186] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-26 10:55:50,162 - services.whatsapp_service - INFO - [whatsapp_service.py:52] - ‚ö†Ô∏è WhatsApp Service initialized without validation - call validate_config() before use
2025-07-26 10:55:50,166 - main - INFO - [main.py:29] - üöÄ Business Chat Assistant starting up...
2025-07-26 10:55:50,167 - main - INFO - [main.py:30] - ‚úÖ CORS middleware configured
2025-07-26 10:55:50,167 - main - INFO - [main.py:34] - ‚úÖ Chat routes registered
2025-07-26 10:55:50,169 - main - INFO - [main.py:38] - ‚úÖ WhatsApp routes registered
2025-07-26 10:55:50,171 - main - INFO - [main.py:49] - üéâ Business Chat Assistant with WhatsApp Integration is ready to serve requests!
2025-07-26 10:55:50,172 - main - INFO - [main.py:50] - üì± WhatsApp webhook endpoint: /whatsapp/webhook
2025-07-26 10:55:50,172 - main - INFO - [main.py:51] - üìä WhatsApp status endpoint: /whatsapp/status
2025-07-26 10:55:58,797 - main - INFO - [main.py:55] - üëã Business Chat Assistant is shutting down...
2025-07-26 10:56:00,885 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-26 10:56:04,159 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-26 10:56:04,249 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-26 10:56:04,253 - faiss - INFO - [__init__.py:186] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-26 10:56:11,885 - services.whatsapp_service - INFO - [whatsapp_service.py:52] - ‚ö†Ô∏è WhatsApp Service initialized without validation - call validate_config() before use
2025-07-26 10:56:11,890 - main - INFO - [main.py:29] - üöÄ Business Chat Assistant starting up...
2025-07-26 10:56:11,890 - main - INFO - [main.py:30] - ‚úÖ CORS middleware configured
2025-07-26 10:56:11,892 - main - INFO - [main.py:34] - ‚úÖ Chat routes registered
2025-07-26 10:56:11,894 - main - INFO - [main.py:38] - ‚úÖ WhatsApp routes registered
2025-07-26 10:56:11,895 - main - INFO - [main.py:49] - üéâ Business Chat Assistant with WhatsApp Integration is ready to serve requests!
2025-07-26 10:56:11,895 - main - INFO - [main.py:50] - üì± WhatsApp webhook endpoint: /whatsapp/webhook
2025-07-26 10:56:11,896 - main - INFO - [main.py:51] - üìä WhatsApp status endpoint: /whatsapp/status
2025-07-26 10:56:11,897 - main - INFO - [main.py:55] - üëã Business Chat Assistant is shutting down...
2025-07-26 10:56:13,273 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-26 10:56:16,103 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-26 10:56:16,189 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-26 10:56:16,195 - faiss - INFO - [__init__.py:186] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-26 10:56:23,693 - services.whatsapp_service - INFO - [whatsapp_service.py:52] - ‚ö†Ô∏è WhatsApp Service initialized without validation - call validate_config() before use
2025-07-26 10:56:23,699 - main - INFO - [main.py:29] - üöÄ Business Chat Assistant starting up...
2025-07-26 10:56:23,700 - main - INFO - [main.py:30] - ‚úÖ CORS middleware configured
2025-07-26 10:56:23,701 - main - INFO - [main.py:34] - ‚úÖ Chat routes registered
2025-07-26 10:56:23,703 - main - INFO - [main.py:38] - ‚úÖ WhatsApp routes registered
2025-07-26 10:56:23,704 - main - INFO - [main.py:49] - üéâ Business Chat Assistant with WhatsApp Integration is ready to serve requests!
2025-07-26 10:56:23,705 - main - INFO - [main.py:50] - üì± WhatsApp webhook endpoint: /whatsapp/webhook
2025-07-26 10:56:23,705 - main - INFO - [main.py:51] - üìä WhatsApp status endpoint: /whatsapp/status
2025-07-26 11:02:15,313 - main - INFO - [main.py:55] - üëã Business Chat Assistant is shutting down...
2025-07-26 11:02:16,889 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-26 11:02:19,747 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-26 11:02:19,834 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-26 11:02:19,838 - faiss - INFO - [__init__.py:186] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-26 11:02:27,412 - services.whatsapp_service - INFO - [whatsapp_service.py:52] - ‚ö†Ô∏è WhatsApp Service initialized without validation - call validate_config() before use
2025-07-26 11:02:27,420 - main - INFO - [main.py:29] - üöÄ Business Chat Assistant starting up...
2025-07-26 11:02:27,420 - main - INFO - [main.py:30] - ‚úÖ CORS middleware configured
2025-07-26 11:02:27,421 - main - INFO - [main.py:34] - ‚úÖ Chat routes registered
2025-07-26 11:02:27,424 - main - INFO - [main.py:38] - ‚úÖ WhatsApp routes registered
2025-07-26 11:02:27,425 - main - INFO - [main.py:49] - üéâ Business Chat Assistant with WhatsApp Integration is ready to serve requests!
2025-07-26 11:02:27,425 - main - INFO - [main.py:50] - üì± WhatsApp webhook endpoint: /whatsapp/webhook
2025-07-26 11:02:27,425 - main - INFO - [main.py:51] - üìä WhatsApp status endpoint: /whatsapp/status
2025-07-26 11:03:51,285 - main - INFO - [main.py:55] - üëã Business Chat Assistant is shutting down...
2025-07-26 11:03:52,864 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-26 11:03:55,856 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-26 11:03:55,947 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-26 11:03:55,952 - faiss - INFO - [__init__.py:186] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-26 11:04:03,797 - services.whatsapp_service - INFO - [whatsapp_service.py:52] - ‚ö†Ô∏è WhatsApp Service initialized without validation - call validate_config() before use
2025-07-26 11:04:03,802 - main - INFO - [main.py:29] - üöÄ Business Chat Assistant starting up...
2025-07-26 11:04:03,802 - main - INFO - [main.py:30] - ‚úÖ CORS middleware configured
2025-07-26 11:04:03,803 - main - INFO - [main.py:34] - ‚úÖ Chat routes registered
2025-07-26 11:04:03,804 - main - INFO - [main.py:38] - ‚úÖ WhatsApp routes registered
2025-07-26 11:04:03,805 - main - INFO - [main.py:49] - üéâ Business Chat Assistant with WhatsApp Integration is ready to serve requests!
2025-07-26 11:04:03,805 - main - INFO - [main.py:50] - üì± WhatsApp webhook endpoint: /whatsapp/webhook
2025-07-26 11:04:03,805 - main - INFO - [main.py:51] - üìä WhatsApp status endpoint: /whatsapp/status
2025-07-26 11:04:16,812 - main - INFO - [main.py:55] - üëã Business Chat Assistant is shutting down...
2025-07-26 11:04:18,263 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-26 11:04:21,182 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-26 11:04:21,270 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-26 11:04:21,277 - faiss - INFO - [__init__.py:186] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-26 11:04:28,841 - services.whatsapp_service - INFO - [whatsapp_service.py:52] - ‚ö†Ô∏è WhatsApp Service initialized without validation - call validate_config() before use
2025-07-26 11:04:28,846 - main - INFO - [main.py:29] - üöÄ Business Chat Assistant starting up...
2025-07-26 11:04:28,847 - main - INFO - [main.py:30] - ‚úÖ CORS middleware configured
2025-07-26 11:04:28,848 - main - INFO - [main.py:34] - ‚úÖ Chat routes registered
2025-07-26 11:04:28,852 - main - INFO - [main.py:38] - ‚úÖ WhatsApp routes registered
2025-07-26 11:04:28,854 - main - INFO - [main.py:49] - üéâ Business Chat Assistant with WhatsApp Integration is ready to serve requests!
2025-07-26 11:04:28,854 - main - INFO - [main.py:50] - üì± WhatsApp webhook endpoint: /whatsapp/webhook
2025-07-26 11:04:28,854 - main - INFO - [main.py:51] - üìä WhatsApp status endpoint: /whatsapp/status
2025-07-26 11:05:15,808 - main - INFO - [main.py:55] - üëã Business Chat Assistant is shutting down...
2025-07-26 11:05:17,296 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-26 11:05:20,220 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-26 11:05:20,302 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-26 11:05:20,307 - faiss - INFO - [__init__.py:186] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-26 11:05:27,930 - services.whatsapp_service - INFO - [whatsapp_service.py:52] - ‚ö†Ô∏è WhatsApp Service initialized without validation - call validate_config() before use
2025-07-26 11:05:27,936 - main - INFO - [main.py:29] - üöÄ Business Chat Assistant starting up...
2025-07-26 11:05:27,937 - main - INFO - [main.py:30] - ‚úÖ CORS middleware configured
2025-07-26 11:05:27,938 - main - INFO - [main.py:34] - ‚úÖ Chat routes registered
2025-07-26 11:05:27,940 - main - INFO - [main.py:38] - ‚úÖ WhatsApp routes registered
2025-07-26 11:05:27,941 - main - INFO - [main.py:49] - üéâ Business Chat Assistant with WhatsApp Integration is ready to serve requests!
2025-07-26 11:05:27,942 - main - INFO - [main.py:50] - üì± WhatsApp webhook endpoint: /whatsapp/webhook
2025-07-26 11:05:27,942 - main - INFO - [main.py:51] - üìä WhatsApp status endpoint: /whatsapp/status
2025-07-26 11:08:32,054 - main - INFO - [main.py:55] - üëã Business Chat Assistant is shutting down...
2025-07-26 11:08:33,415 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-26 11:08:36,240 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-26 11:08:36,326 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-26 11:08:36,333 - faiss - INFO - [__init__.py:186] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-26 11:08:44,298 - services.whatsapp_service - INFO - [whatsapp_service.py:52] - ‚ö†Ô∏è WhatsApp Service initialized without validation - call validate_config() before use
2025-07-26 11:08:44,303 - main - INFO - [main.py:29] - üöÄ Business Chat Assistant starting up...
2025-07-26 11:08:44,303 - main - INFO - [main.py:30] - ‚úÖ CORS middleware configured
2025-07-26 11:08:44,304 - main - INFO - [main.py:34] - ‚úÖ Chat routes registered
2025-07-26 11:08:44,305 - main - INFO - [main.py:38] - ‚úÖ WhatsApp routes registered
2025-07-26 11:08:44,307 - main - INFO - [main.py:49] - üéâ Business Chat Assistant with WhatsApp Integration is ready to serve requests!
2025-07-26 11:08:44,307 - main - INFO - [main.py:50] - üì± WhatsApp webhook endpoint: /whatsapp/webhook
2025-07-26 11:08:44,308 - main - INFO - [main.py:51] - üìä WhatsApp status endpoint: /whatsapp/status
2025-07-26 11:12:11,324 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "contacts": [
              {
                "profile": {
                  "name": "Nipul Viduranga"
                },
                "wa_id": "94713966820"
              }
            ],
            "messages": [
              {
                "from": "94713966820",
                "id": "wamid.HBgLOTQ3MTM5NjY4MjAVAgASGBQzRjA3MjA5MTI3NEFERjg3ODVEOAA=",
                "timestamp": "1753508529",
                "text": {
                  "body": "what are the products do yo have"
                },
                "type": "text"
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:12:11,325 - services.whatsapp_service - INFO - [whatsapp_service.py:284] - üì® Received WhatsApp message from 94713966820: what are the products do yo have...
2025-07-26 11:12:11,405 - routes.whatsapp_routes - ERROR - [whatsapp_routes.py:135] - ‚ùå Error handling webhook: (psycopg2.errors.UndefinedTable) relation "seller_profiles" does not exist
LINE 2: FROM seller_profiles 
             ^

[SQL: SELECT seller_profiles.id AS seller_profiles_id, seller_profiles.user_id AS seller_profiles_user_id, seller_profiles.shop_name AS seller_profiles_shop_name, seller_profiles.gst_number AS seller_profiles_gst_number, seller_profiles.whatsapp_number_id AS seller_profiles_whatsapp_number_id 
FROM seller_profiles 
WHERE seller_profiles.whatsapp_number_id = %(whatsapp_number_id_1)s 
 LIMIT %(param_1)s]
[parameters: {'whatsapp_number_id_1': '762208246965801', 'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-26 11:14:22,561 - main - INFO - [main.py:55] - üëã Business Chat Assistant is shutting down...
2025-07-26 11:14:24,117 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-26 11:14:27,013 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-26 11:14:27,101 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-26 11:14:27,107 - faiss - INFO - [__init__.py:186] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-26 11:14:34,850 - services.whatsapp_service - INFO - [whatsapp_service.py:52] - ‚ö†Ô∏è WhatsApp Service initialized without validation - call validate_config() before use
2025-07-26 11:14:34,855 - main - INFO - [main.py:29] - üöÄ Business Chat Assistant starting up...
2025-07-26 11:14:34,855 - main - INFO - [main.py:30] - ‚úÖ CORS middleware configured
2025-07-26 11:14:34,856 - main - INFO - [main.py:34] - ‚úÖ Chat routes registered
2025-07-26 11:14:34,858 - main - INFO - [main.py:38] - ‚úÖ WhatsApp routes registered
2025-07-26 11:14:34,860 - main - INFO - [main.py:49] - üéâ Business Chat Assistant with WhatsApp Integration is ready to serve requests!
2025-07-26 11:14:34,860 - main - INFO - [main.py:50] - üì± WhatsApp webhook endpoint: /whatsapp/webhook
2025-07-26 11:14:34,861 - main - INFO - [main.py:51] - üìä WhatsApp status endpoint: /whatsapp/status
2025-07-26 11:14:44,028 - main - INFO - [main.py:55] - üëã Business Chat Assistant is shutting down...
2025-07-26 11:14:45,439 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-26 11:14:48,240 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-26 11:14:48,329 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-26 11:14:48,334 - faiss - INFO - [__init__.py:186] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-26 11:14:55,839 - services.whatsapp_service - INFO - [whatsapp_service.py:52] - ‚ö†Ô∏è WhatsApp Service initialized without validation - call validate_config() before use
2025-07-26 11:14:55,844 - main - INFO - [main.py:29] - üöÄ Business Chat Assistant starting up...
2025-07-26 11:14:55,844 - main - INFO - [main.py:30] - ‚úÖ CORS middleware configured
2025-07-26 11:14:55,845 - main - INFO - [main.py:34] - ‚úÖ Chat routes registered
2025-07-26 11:14:55,847 - main - INFO - [main.py:38] - ‚úÖ WhatsApp routes registered
2025-07-26 11:14:55,848 - main - INFO - [main.py:49] - üéâ Business Chat Assistant with WhatsApp Integration is ready to serve requests!
2025-07-26 11:14:55,849 - main - INFO - [main.py:50] - üì± WhatsApp webhook endpoint: /whatsapp/webhook
2025-07-26 11:14:55,849 - main - INFO - [main.py:51] - üìä WhatsApp status endpoint: /whatsapp/status
2025-07-26 11:16:49,850 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "contacts": [
              {
                "profile": {
                  "name": "Nipul Viduranga"
                },
                "wa_id": "94713966820"
              }
            ],
            "messages": [
              {
                "from": "94713966820",
                "id": "wamid.HBgLOTQ3MTM5NjY4MjAVAgASGBQzRkNBNUNEQ0M4OEVBNzFDRTFENwA=",
                "timestamp": "1753508808",
                "text": {
                  "body": "what are the products do yo have"
                },
                "type": "text"
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:16:49,851 - services.whatsapp_service - INFO - [whatsapp_service.py:284] - üì® Received WhatsApp message from 94713966820: what are the products do yo have...
2025-07-26 11:16:49,910 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:124] - ‚úÖ Message queued for processing from 94713966820
2025-07-26 11:16:49,912 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:46] - ü§ñ Processing message from 94713966820: what are the products do yo have...
2025-07-26 11:16:49,912 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:30] - Creating new chatbot session for 94713966820
2025-07-26 11:16:54,257 - agent.language_agent - INFO - [language_agent.py:211] - [LanguageAgent] Combined detection: english (rule: 0.79, llm: english)
2025-07-26 11:16:54,257 - agent.agent - INFO - [agent.py:480] - [Language] Detected language: english (confidence: 0.95) for message: 'what are the products do yo have'
2025-07-26 11:16:54,258 - agent.agent - INFO - [agent.py:484] - [Optimized] Detected intent: product_info for message: 'what are the products do yo have' in 4.28s
2025-07-26 11:16:58,772 - agent.agent - ERROR - [agent.py:525] - [Optimized] Error: (psycopg2.errors.UndefinedColumn) column products.sellerId does not exist
LINE 1: SELECT products.id AS products_id, products."sellerId" AS "p...
                                           ^
HINT:  Perhaps you meant to reference the column "products.seller_id".

[SQL: SELECT products.id AS products_id, products."sellerId" AS "products_sellerId", products.name AS products_name, products.description AS products_description, products.price AS products_price, products.stock AS products_stock 
FROM products 
WHERE products."sellerId" = %(sellerId_1)s]
[parameters: {'sellerId_1': 5}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-26 11:16:58,772 - services.whatsapp_service - INFO - [whatsapp_service.py:137] - Sending WhatsApp message to 94713966820: I'm experiencing technical difficulties. Please tr...
2025-07-26 11:17:29,173 - services.whatsapp_service - ERROR - [whatsapp_service.py:152] - ‚ùå Failed to send WhatsApp message: HTTPSConnectionPool(host='graph.facebook.com', port=443): Read timed out. (read timeout=30)
2025-07-26 11:17:29,174 - routes.whatsapp_routes - ERROR - [whatsapp_routes.py:62] - ‚ùå Failed to send response to 94713966820: HTTPSConnectionPool(host='graph.facebook.com', port=443): Read timed out. (read timeout=30)
2025-07-26 11:18:59,641 - main - INFO - [main.py:55] - üëã Business Chat Assistant is shutting down...
2025-07-26 11:19:01,276 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-26 11:19:04,171 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-26 11:19:04,258 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-26 11:19:04,264 - faiss - INFO - [__init__.py:186] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-26 11:19:11,747 - services.whatsapp_service - INFO - [whatsapp_service.py:52] - ‚ö†Ô∏è WhatsApp Service initialized without validation - call validate_config() before use
2025-07-26 11:19:11,752 - main - INFO - [main.py:29] - üöÄ Business Chat Assistant starting up...
2025-07-26 11:19:11,753 - main - INFO - [main.py:30] - ‚úÖ CORS middleware configured
2025-07-26 11:19:11,754 - main - INFO - [main.py:34] - ‚úÖ Chat routes registered
2025-07-26 11:19:11,756 - main - INFO - [main.py:38] - ‚úÖ WhatsApp routes registered
2025-07-26 11:19:11,758 - main - INFO - [main.py:49] - üéâ Business Chat Assistant with WhatsApp Integration is ready to serve requests!
2025-07-26 11:19:11,758 - main - INFO - [main.py:50] - üì± WhatsApp webhook endpoint: /whatsapp/webhook
2025-07-26 11:19:11,758 - main - INFO - [main.py:51] - üìä WhatsApp status endpoint: /whatsapp/status
2025-07-26 11:21:03,080 - main - INFO - [main.py:55] - üëã Business Chat Assistant is shutting down...
2025-07-26 11:21:04,520 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-26 11:21:07,312 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-26 11:21:07,400 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-26 11:21:07,405 - faiss - INFO - [__init__.py:186] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-26 11:21:14,916 - services.whatsapp_service - INFO - [whatsapp_service.py:52] - ‚ö†Ô∏è WhatsApp Service initialized without validation - call validate_config() before use
2025-07-26 11:21:14,923 - main - INFO - [main.py:29] - üöÄ Business Chat Assistant starting up...
2025-07-26 11:21:14,923 - main - INFO - [main.py:30] - ‚úÖ CORS middleware configured
2025-07-26 11:21:14,924 - main - INFO - [main.py:34] - ‚úÖ Chat routes registered
2025-07-26 11:21:14,926 - main - INFO - [main.py:38] - ‚úÖ WhatsApp routes registered
2025-07-26 11:21:14,927 - main - INFO - [main.py:49] - üéâ Business Chat Assistant with WhatsApp Integration is ready to serve requests!
2025-07-26 11:21:14,928 - main - INFO - [main.py:50] - üì± WhatsApp webhook endpoint: /whatsapp/webhook
2025-07-26 11:21:14,928 - main - INFO - [main.py:51] - üìä WhatsApp status endpoint: /whatsapp/status
2025-07-26 11:24:43,741 - main - INFO - [main.py:55] - üëã Business Chat Assistant is shutting down...
2025-07-26 11:24:45,119 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-26 11:24:48,141 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-26 11:24:48,229 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-26 11:24:48,234 - faiss - INFO - [__init__.py:186] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-26 11:24:55,803 - services.whatsapp_service - INFO - [whatsapp_service.py:52] - ‚ö†Ô∏è WhatsApp Service initialized without validation - call validate_config() before use
2025-07-26 11:24:55,809 - main - INFO - [main.py:29] - üöÄ Business Chat Assistant starting up...
2025-07-26 11:24:55,809 - main - INFO - [main.py:30] - ‚úÖ CORS middleware configured
2025-07-26 11:24:55,810 - main - INFO - [main.py:34] - ‚úÖ Chat routes registered
2025-07-26 11:24:55,813 - main - INFO - [main.py:38] - ‚úÖ WhatsApp routes registered
2025-07-26 11:24:55,815 - main - INFO - [main.py:49] - üéâ Business Chat Assistant with WhatsApp Integration is ready to serve requests!
2025-07-26 11:24:55,815 - main - INFO - [main.py:50] - üì± WhatsApp webhook endpoint: /whatsapp/webhook
2025-07-26 11:24:55,816 - main - INFO - [main.py:51] - üìä WhatsApp status endpoint: /whatsapp/status
2025-07-26 11:30:49,012 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "contacts": [
              {
                "profile": {
                  "name": "Nipul Viduranga"
                },
                "wa_id": "94713966820"
              }
            ],
            "messages": [
              {
                "from": "94713966820",
                "id": "wamid.HBgLOTQ3MTM5NjY4MjAVAgASGCA2OTVENzEwOTNDOEJGMUZCRTdBOEJDQjRDNkY3OEZCQQA=",
                "timestamp": "1753509647",
                "text": {
                  "body": "What are the products do you have"
                },
                "type": "text"
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:30:49,013 - services.whatsapp_service - INFO - [whatsapp_service.py:284] - üì® Received WhatsApp message from 94713966820: What are the products do you have...
2025-07-26 11:30:49,072 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:124] - ‚úÖ Message queued for processing from 94713966820
2025-07-26 11:30:49,073 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:46] - ü§ñ Processing message from 94713966820: What are the products do you have...
2025-07-26 11:30:49,073 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:30] - Creating new chatbot session for 94713966820
2025-07-26 11:30:53,521 - agent.language_agent - INFO - [language_agent.py:211] - [LanguageAgent] Combined detection: english (rule: 0.79, llm: english)
2025-07-26 11:30:53,522 - agent.agent - INFO - [agent.py:480] - [Language] Detected language: english (confidence: 0.95) for message: 'What are the products do you have'
2025-07-26 11:30:53,522 - agent.agent - INFO - [agent.py:484] - [Optimized] Detected intent: product_info for message: 'What are the products do you have' in 4.39s
2025-07-26 11:31:10,527 - agent.agent - INFO - [agent.py:520] - [Optimized] Total processing time: 21.39s, Language: english
2025-07-26 11:31:10,527 - services.whatsapp_service - INFO - [whatsapp_service.py:137] - Sending WhatsApp message to 94713966820: Here are the products we have available:

1. **Sun...
2025-07-26 11:31:10,529 - agent.agent - ERROR - [agent.py:548] - [Optimized] Async logging error: (psycopg2.errors.UndefinedColumn) column "seller_id" of relation "chat_logs" does not exist
LINE 1: INSERT INTO chat_logs (seller_id, customer_id, user_query, i...
                               ^

[SQL: INSERT INTO chat_logs (seller_id, customer_id, user_query, intent, entities, response, timestamp) VALUES (%(seller_id)s, %(customer_id)s, %(user_query)s, %(intent)s, %(entities)s, %(response)s, %(timestamp)s) RETURNING chat_logs.id]
[parameters: {'seller_id': 5, 'customer_id': '94713966820', 'user_query': 'What are the products do you have', 'intent': 'product_info', 'entities': 'fast_detected_lang_english', 'response': "Here are the products we have available:\n\n1. **Sunflower Oil 1L** - Price: $780.0, Stock: 150  \n2. **Organic Eggs (12 pack)** - Price: $520.0, Sto ... (311 characters truncated) ... rice: $400.0, Stock: 70  \n9. **Green Tea Bags** - Price: $250.0, Stock: 200  \n\nLet me know if you'd like more details about any of these products!", 'timestamp': datetime.datetime(2025, 7, 26, 6, 1, 10, 416236)}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-26 11:31:30,486 - services.whatsapp_service - ERROR - [whatsapp_service.py:152] - ‚ùå Failed to send WhatsApp message: ('Connection aborted.', ConnectionResetError(10054, 'An existing connection was forcibly closed by the remote host', None, 10054, None))
2025-07-26 11:31:30,487 - routes.whatsapp_routes - ERROR - [whatsapp_routes.py:62] - ‚ùå Failed to send response to 94713966820: ('Connection aborted.', ConnectionResetError(10054, 'An existing connection was forcibly closed by the remote host', None, 10054, None))
2025-07-26 11:32:41,629 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "contacts": [
              {
                "profile": {
                  "name": "Nipul Viduranga"
                },
                "wa_id": "94713966820"
              }
            ],
            "messages": [
              {
                "from": "94713966820",
                "id": "wamid.HBgLOTQ3MTM5NjY4MjAVAgASGCA3N0Y4OTc2RTFERTM0OTMyQzY0MTkyQjU2QkQyOTcxRQA=",
                "timestamp": "1753509759",
                "text": {
                  "body": "What are the products do you have"
                },
                "type": "text"
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:32:41,629 - services.whatsapp_service - INFO - [whatsapp_service.py:284] - üì® Received WhatsApp message from 94713966820: What are the products do you have...
2025-07-26 11:32:41,631 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:124] - ‚úÖ Message queued for processing from 94713966820
2025-07-26 11:32:41,631 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:46] - ü§ñ Processing message from 94713966820: What are the products do you have...
2025-07-26 11:32:41,632 - agent.agent - INFO - [agent.py:480] - [Language] Detected language: english (confidence: 0.95) for message: 'What are the products do you have'
2025-07-26 11:32:41,633 - agent.agent - INFO - [agent.py:484] - [Optimized] Detected intent: product_info for message: 'What are the products do you have' in 0.00s
2025-07-26 11:32:53,376 - agent.agent - INFO - [agent.py:520] - [Optimized] Total processing time: 11.74s, Language: english
2025-07-26 11:32:53,377 - services.whatsapp_service - INFO - [whatsapp_service.py:137] - Sending WhatsApp message to 94713966820: Here are the products we currently offer:

1. **Su...
2025-07-26 11:33:13,303 - services.whatsapp_service - ERROR - [whatsapp_service.py:152] - ‚ùå Failed to send WhatsApp message: ('Connection aborted.', ConnectionResetError(10054, 'An existing connection was forcibly closed by the remote host', None, 10054, None))
2025-07-26 11:33:13,304 - routes.whatsapp_routes - ERROR - [whatsapp_routes.py:62] - ‚ùå Failed to send response to 94713966820: ('Connection aborted.', ConnectionResetError(10054, 'An existing connection was forcibly closed by the remote host', None, 10054, None))
2025-07-26 11:33:45,415 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "contacts": [
              {
                "profile": {
                  "name": "Nipul Viduranga"
                },
                "wa_id": "94713966820"
              }
            ],
            "messages": [
              {
                "from": "94713966820",
                "id": "wamid.HBgLOTQ3MTM5NjY4MjAVAgASGCA0Nzc3M0I3OUVEM0IzMDNENEMxNzM3RjZGMUZGODI5QwA=",
                "timestamp": "1753509823",
                "text": {
                  "body": "What are the products do you have"
                },
                "type": "text"
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:33:45,416 - services.whatsapp_service - INFO - [whatsapp_service.py:284] - üì® Received WhatsApp message from 94713966820: What are the products do you have...
2025-07-26 11:33:45,418 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:124] - ‚úÖ Message queued for processing from 94713966820
2025-07-26 11:33:45,419 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:46] - ü§ñ Processing message from 94713966820: What are the products do you have...
2025-07-26 11:33:45,419 - agent.agent - INFO - [agent.py:480] - [Language] Detected language: english (confidence: 0.95) for message: 'What are the products do you have'
2025-07-26 11:33:45,419 - agent.agent - INFO - [agent.py:484] - [Optimized] Detected intent: product_info for message: 'What are the products do you have' in 0.00s
2025-07-26 11:34:07,127 - agent.agent - INFO - [agent.py:520] - [Optimized] Total processing time: 21.71s, Language: english
2025-07-26 11:34:07,128 - services.whatsapp_service - INFO - [whatsapp_service.py:137] - Sending WhatsApp message to 94713966820: Here‚Äôs the list of products we currently offer:  
...
2025-07-26 11:34:08,472 - services.whatsapp_service - ERROR - [whatsapp_service.py:152] - ‚ùå Failed to send WhatsApp message: 401 Client Error: Unauthorized for url: https://graph.facebook.com/v22.0/762208246965801/messages
2025-07-26 11:34:08,472 - routes.whatsapp_routes - ERROR - [whatsapp_routes.py:62] - ‚ùå Failed to send response to 94713966820: 401 Client Error: Unauthorized for url: https://graph.facebook.com/v22.0/762208246965801/messages
2025-07-26 11:35:11,635 - main - INFO - [main.py:55] - üëã Business Chat Assistant is shutting down...
2025-07-26 11:36:23,281 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-26 11:36:23,378 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-26 11:36:23,397 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-26 11:36:23,403 - faiss - INFO - [__init__.py:186] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-26 11:36:30,306 - vector_store.vector_store - INFO - [vector_store.py:38] - [FastVectorStore] Loading embeddings...
2025-07-26 11:36:32,352 - vector_store.vector_store - INFO - [vector_store.py:48] - [FastVectorStore] Loaded 53744 Bitext documents
2025-07-26 11:36:32,455 - vector_store.vector_store - INFO - [vector_store.py:79] - [FastVectorStore] Built FAISS index with 53744 vectors
2025-07-26 11:36:32,456 - vector_store.vector_store - INFO - [vector_store.py:82] - [FastVectorStore] Loading embedding model all-MiniLM-L6-v2...
2025-07-26 11:36:32,458 - sentence_transformers.SentenceTransformer - INFO - [SentenceTransformer.py:219] - Use pytorch device_name: cpu
2025-07-26 11:36:32,458 - sentence_transformers.SentenceTransformer - INFO - [SentenceTransformer.py:227] - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-07-26 11:36:46,902 - vector_store.vector_store - INFO - [vector_store.py:85] - [FastVectorStore] Embedding model all-MiniLM-L6-v2 loaded
2025-07-26 11:36:46,903 - vector_store.vector_store - INFO - [vector_store.py:92] - [FastVectorStore] Embeddings and model loaded in 16.60s
2025-07-26 11:36:47,182 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-26 11:36:50,286 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-26 11:36:50,382 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-26 11:36:50,388 - faiss - INFO - [__init__.py:186] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-26 11:36:57,992 - services.whatsapp_service - INFO - [whatsapp_service.py:52] - ‚ö†Ô∏è WhatsApp Service initialized without validation - call validate_config() before use
2025-07-26 11:36:57,997 - main - INFO - [main.py:29] - üöÄ Business Chat Assistant starting up...
2025-07-26 11:36:57,998 - main - INFO - [main.py:30] - ‚úÖ CORS middleware configured
2025-07-26 11:36:57,998 - main - INFO - [main.py:34] - ‚úÖ Chat routes registered
2025-07-26 11:36:58,000 - main - INFO - [main.py:38] - ‚úÖ WhatsApp routes registered
2025-07-26 11:36:58,001 - main - INFO - [main.py:49] - üéâ Business Chat Assistant with WhatsApp Integration is ready to serve requests!
2025-07-26 11:36:58,002 - main - INFO - [main.py:50] - üì± WhatsApp webhook endpoint: /whatsapp/webhook
2025-07-26 11:36:58,002 - main - INFO - [main.py:51] - üìä WhatsApp status endpoint: /whatsapp/status
2025-07-26 11:37:21,793 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "contacts": [
              {
                "profile": {
                  "name": "Nipul Viduranga"
                },
                "wa_id": "94713966820"
              }
            ],
            "messages": [
              {
                "from": "94713966820",
                "id": "wamid.HBgLOTQ3MTM5NjY4MjAVAgASGCA1MTU0NzI0MEJFNEFGNzhBNDQ2RjU1MjNBNUY4QzkyNgA=",
                "timestamp": "1753510040",
                "text": {
                  "body": "What are the products do you have"
                },
                "type": "text"
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:37:21,793 - services.whatsapp_service - INFO - [whatsapp_service.py:284] - üì® Received WhatsApp message from 94713966820: What are the products do you have...
2025-07-26 11:37:21,849 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:124] - ‚úÖ Message queued for processing from 94713966820
2025-07-26 11:37:21,851 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:46] - ü§ñ Processing message from 94713966820: What are the products do you have...
2025-07-26 11:37:21,851 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:30] - Creating new chatbot session for 94713966820
2025-07-26 11:37:25,987 - agent.language_agent - INFO - [language_agent.py:211] - [LanguageAgent] Combined detection: english (rule: 0.79, llm: english)
2025-07-26 11:37:25,987 - agent.agent - INFO - [agent.py:480] - [Language] Detected language: english (confidence: 0.95) for message: 'What are the products do you have'
2025-07-26 11:37:25,988 - agent.agent - INFO - [agent.py:484] - [Optimized] Detected intent: product_info for message: 'What are the products do you have' in 4.07s
2025-07-26 11:37:42,034 - agent.agent - INFO - [agent.py:520] - [Optimized] Total processing time: 20.12s, Language: english
2025-07-26 11:37:42,034 - services.whatsapp_service - INFO - [whatsapp_service.py:137] - Sending WhatsApp message to 94713966820: Here are the products we have available:

1. **Sun...
2025-07-26 11:37:43,185 - services.whatsapp_service - INFO - [whatsapp_service.py:143] - ‚úÖ Message sent successfully. Message ID: wamid.HBgLOTQ3MTM5NjY4MjAVAgARGBI4NzkzNTU4MkQwRjNEMjgwRjYA
2025-07-26 11:37:43,185 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:58] - ‚úÖ Response sent to 94713966820: Here are the products we have available:

1. **Sun...
2025-07-26 11:37:44,006 - services.whatsapp_service - INFO - [whatsapp_service.py:344] - ‚úÖ Message wamid.HBgLOTQ3MTM5NjY4MjAVAgASGCA1MTU0NzI0MEJFNEFGNzhBNDQ2RjU1MjNBNUY4QzkyNgA= marked as read
2025-07-26 11:37:45,133 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MTM5NjY4MjAVAgARGBI4NzkzNTU4MkQwRjNEMjgwRjYA",
                "status": "sent",
                "timestamp": "1753510063",
                "recipient_id": "94713966820",
                "conversation": {
                  "id": "58d20ff6d37eb44743a8aa15f6995142",
                  "expiration_timestamp": "1753510063",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:37:45,134 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 11:37:45,134 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 11:37:45,335 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MTM5NjY4MjAVAgARGBI4NzkzNTU4MkQwRjNEMjgwRjYA",
                "status": "delivered",
                "timestamp": "1753510064",
                "recipient_id": "94713966820",
                "conversation": {
                  "id": "58d20ff6d37eb44743a8aa15f6995142",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:37:45,336 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 11:37:45,337 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 11:37:45,855 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MTM5NjY4MjAVAgARGBI4NzkzNTU4MkQwRjNEMjgwRjYA",
                "status": "read",
                "timestamp": "1753510064",
                "recipient_id": "94713966820",
                "conversation": {
                  "id": "58d20ff6d37eb44743a8aa15f6995142",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:37:45,856 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 11:37:45,856 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 11:38:01,105 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "contacts": [
              {
                "profile": {
                  "name": "Nipul Viduranga"
                },
                "wa_id": "94713966820"
              }
            ],
            "messages": [
              {
                "from": "94713966820",
                "id": "wamid.HBgLOTQ3MTM5NjY4MjAVAgASGCA3Qzg2NUMzQTU3ODM2NjY5MDA0NUZFMjI1NjFDQUE2QQA=",
                "timestamp": "1753510079",
                "text": {
                  "body": "Can I buy sunflower oil"
                },
                "type": "text"
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:38:01,106 - services.whatsapp_service - INFO - [whatsapp_service.py:284] - üì® Received WhatsApp message from 94713966820: Can I buy sunflower oil...
2025-07-26 11:38:01,107 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:124] - ‚úÖ Message queued for processing from 94713966820
2025-07-26 11:38:01,108 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:46] - ü§ñ Processing message from 94713966820: Can I buy sunflower oil...
2025-07-26 11:38:04,687 - agent.language_agent - INFO - [language_agent.py:211] - [LanguageAgent] Combined detection: english (rule: 0.70, llm: english)
2025-07-26 11:38:04,688 - agent.agent - INFO - [agent.py:480] - [Language] Detected language: english (confidence: 0.90) for message: 'Can I buy sunflower oil'
2025-07-26 11:38:04,688 - agent.agent - INFO - [agent.py:484] - [Optimized] Detected intent: place_order for message: 'Can I buy sunflower oil' in 3.58s
2025-07-26 11:38:18,014 - agent.agent - INFO - [agent.py:520] - [Optimized] Total processing time: 16.91s, Language: english
2025-07-26 11:38:18,014 - services.whatsapp_service - INFO - [whatsapp_service.py:137] - Sending WhatsApp message to 94713966820: To place your order for sunflower oil, I need your...
2025-07-26 11:38:19,330 - services.whatsapp_service - INFO - [whatsapp_service.py:143] - ‚úÖ Message sent successfully. Message ID: wamid.HBgLOTQ3MTM5NjY4MjAVAgARGBI2N0NFOTI5MEJDRjlBRTlDRTkA
2025-07-26 11:38:19,331 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:58] - ‚úÖ Response sent to 94713966820: To place your order for sunflower oil, I need your...
2025-07-26 11:38:20,559 - services.whatsapp_service - INFO - [whatsapp_service.py:344] - ‚úÖ Message wamid.HBgLOTQ3MTM5NjY4MjAVAgASGCA3Qzg2NUMzQTU3ODM2NjY5MDA0NUZFMjI1NjFDQUE2QQA= marked as read
2025-07-26 11:38:21,222 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MTM5NjY4MjAVAgARGBI2N0NFOTI5MEJDRjlBRTlDRTkA",
                "status": "sent",
                "timestamp": "1753510099",
                "recipient_id": "94713966820",
                "conversation": {
                  "id": "99613c2a0d95d289623ac3a1d2f09ba5",
                  "expiration_timestamp": "1753510099",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:38:21,223 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 11:38:21,223 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 11:38:21,687 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MTM5NjY4MjAVAgARGBI2N0NFOTI5MEJDRjlBRTlDRTkA",
                "status": "read",
                "timestamp": "1753510100",
                "recipient_id": "94713966820",
                "conversation": {
                  "id": "99613c2a0d95d289623ac3a1d2f09ba5",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:38:21,688 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 11:38:21,688 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 11:38:21,892 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MTM5NjY4MjAVAgARGBI2N0NFOTI5MEJDRjlBRTlDRTkA",
                "status": "delivered",
                "timestamp": "1753510100",
                "recipient_id": "94713966820",
                "conversation": {
                  "id": "99613c2a0d95d289623ac3a1d2f09ba5",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:38:21,892 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 11:38:21,892 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 11:41:07,264 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "contacts": [
              {
                "profile": {
                  "name": "Nipul Viduranga"
                },
                "wa_id": "94713966820"
              }
            ],
            "messages": [
              {
                "from": "94713966820",
                "id": "wamid.HBgLOTQ3MTM5NjY4MjAVAgASGCA2OUZDMDg3MDU2NzQ5MzkyNjEzRkQ3MjkyQkNBQjRDNgA=",
                "timestamp": "1753510265",
                "text": {
                  "body": "Name : Nipul viduranga \nEmail : nipulviduranga@gmail.com \nAddress: Neluwa,Galle\nNumber: 0713966820"
                },
                "type": "text"
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:41:07,264 - services.whatsapp_service - INFO - [whatsapp_service.py:284] - üì® Received WhatsApp message from 94713966820: Name : Nipul viduranga 
Email : nipulviduranga@gma...
2025-07-26 11:41:07,266 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:124] - ‚úÖ Message queued for processing from 94713966820
2025-07-26 11:41:07,267 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:46] - ü§ñ Processing message from 94713966820: Name : Nipul viduranga 
Email : nipulviduranga@gma...
2025-07-26 11:41:13,330 - agent.language_agent - INFO - [language_agent.py:211] - [LanguageAgent] Combined detection: english (rule: 0.50, llm: english)
2025-07-26 11:41:13,330 - agent.agent - INFO - [agent.py:480] - [Language] Detected language: english (confidence: 0.70) for message: 'Name : Nipul viduranga 
Email : nipulviduranga@gmail.com 
Address: Neluwa,Galle
Number: 0713966820'
2025-07-26 11:41:13,330 - agent.agent - INFO - [agent.py:484] - [Optimized] Detected intent: general_inquiry for message: 'Name : Nipul viduranga 
Email : nipulviduranga@gmail.com 
Address: Neluwa,Galle
Number: 0713966820' in 6.06s
2025-07-26 11:41:29,075 - agent.agent - INFO - [agent.py:520] - [Optimized] Total processing time: 21.81s, Language: english
2025-07-26 11:41:29,075 - services.whatsapp_service - INFO - [whatsapp_service.py:137] - Sending WhatsApp message to 94713966820: Great, your account has been created! Now, how man...
2025-07-26 11:41:30,817 - services.whatsapp_service - INFO - [whatsapp_service.py:143] - ‚úÖ Message sent successfully. Message ID: wamid.HBgLOTQ3MTM5NjY4MjAVAgARGBJBNEM2NEQzOEI4MDczNUI0QkEA
2025-07-26 11:41:30,818 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:58] - ‚úÖ Response sent to 94713966820: Great, your account has been created! Now, how man...
2025-07-26 11:41:31,633 - services.whatsapp_service - INFO - [whatsapp_service.py:344] - ‚úÖ Message wamid.HBgLOTQ3MTM5NjY4MjAVAgASGCA2OUZDMDg3MDU2NzQ5MzkyNjEzRkQ3MjkyQkNBQjRDNgA= marked as read
2025-07-26 11:41:32,249 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MTM5NjY4MjAVAgARGBJBNEM2NEQzOEI4MDczNUI0QkEA",
                "status": "sent",
                "timestamp": "1753510290",
                "recipient_id": "94713966820",
                "conversation": {
                  "id": "38ce40734b09f076051eb60747ec1a20",
                  "expiration_timestamp": "1753510290",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:41:32,250 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 11:41:32,250 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 11:41:32,775 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MTM5NjY4MjAVAgARGBJBNEM2NEQzOEI4MDczNUI0QkEA",
                "status": "delivered",
                "timestamp": "1753510291",
                "recipient_id": "94713966820",
                "conversation": {
                  "id": "38ce40734b09f076051eb60747ec1a20",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:41:32,776 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 11:41:32,776 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 11:41:32,801 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MTM5NjY4MjAVAgARGBJBNEM2NEQzOEI4MDczNUI0QkEA",
                "status": "read",
                "timestamp": "1753510291",
                "recipient_id": "94713966820",
                "conversation": {
                  "id": "38ce40734b09f076051eb60747ec1a20",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:41:32,802 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 11:41:32,802 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 11:41:45,560 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "contacts": [
              {
                "profile": {
                  "name": "Nipul Viduranga"
                },
                "wa_id": "94713966820"
              }
            ],
            "messages": [
              {
                "from": "94713966820",
                "id": "wamid.HBgLOTQ3MTM5NjY4MjAVAgASGCBBNzRDNjUxMTY1MTEyMjVDNTNGN0E0QjA1M0U3Q0M4QgA=",
                "timestamp": "1753510303",
                "text": {
                  "body": "1"
                },
                "type": "text"
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:41:45,561 - services.whatsapp_service - INFO - [whatsapp_service.py:284] - üì® Received WhatsApp message from 94713966820: 1...
2025-07-26 11:41:45,563 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:124] - ‚úÖ Message queued for processing from 94713966820
2025-07-26 11:41:45,564 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:46] - ü§ñ Processing message from 94713966820: 1...
2025-07-26 11:41:49,348 - agent.language_agent - INFO - [language_agent.py:211] - [LanguageAgent] Combined detection: english (rule: 0.50, llm: english)
2025-07-26 11:41:49,349 - agent.agent - INFO - [agent.py:480] - [Language] Detected language: english (confidence: 0.70) for message: '1'
2025-07-26 11:41:49,349 - agent.agent - INFO - [agent.py:484] - [Optimized] Detected intent: general_inquiry for message: '1' in 3.78s
2025-07-26 11:42:03,751 - agent.agent - INFO - [agent.py:520] - [Optimized] Total processing time: 18.19s, Language: english
2025-07-26 11:42:03,752 - services.whatsapp_service - INFO - [whatsapp_service.py:137] - Sending WhatsApp message to 94713966820: Your order has been placed successfully!  

**Orde...
2025-07-26 11:42:05,321 - services.whatsapp_service - INFO - [whatsapp_service.py:143] - ‚úÖ Message sent successfully. Message ID: wamid.HBgLOTQ3MTM5NjY4MjAVAgARGBI4Q0VGQkI4NDA3NDQyQTYzNjgA
2025-07-26 11:42:05,321 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:58] - ‚úÖ Response sent to 94713966820: Your order has been placed successfully!  

**Orde...
2025-07-26 11:42:06,346 - services.whatsapp_service - INFO - [whatsapp_service.py:344] - ‚úÖ Message wamid.HBgLOTQ3MTM5NjY4MjAVAgASGCBBNzRDNjUxMTY1MTEyMjVDNTNGN0E0QjA1M0U3Q0M4QgA= marked as read
2025-07-26 11:42:07,273 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MTM5NjY4MjAVAgARGBI4Q0VGQkI4NDA3NDQyQTYzNjgA",
                "status": "delivered",
                "timestamp": "1753510325",
                "recipient_id": "94713966820",
                "conversation": {
                  "id": "d9e54394bbce95da0178f0326bd3949d",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:42:07,274 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 11:42:07,274 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 11:42:07,371 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MTM5NjY4MjAVAgARGBI4Q0VGQkI4NDA3NDQyQTYzNjgA",
                "status": "read",
                "timestamp": "1753510326",
                "recipient_id": "94713966820",
                "conversation": {
                  "id": "d9e54394bbce95da0178f0326bd3949d",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:42:07,372 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 11:42:07,372 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 11:42:07,883 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MTM5NjY4MjAVAgARGBI4Q0VGQkI4NDA3NDQyQTYzNjgA",
                "status": "sent",
                "timestamp": "1753510325",
                "recipient_id": "94713966820",
                "conversation": {
                  "id": "d9e54394bbce95da0178f0326bd3949d",
                  "expiration_timestamp": "1753510325",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:42:07,884 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 11:42:07,884 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 11:47:57,367 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "contacts": [
              {
                "profile": {
                  "name": "Srinath"
                },
                "wa_id": "94703284362"
              }
            ],
            "messages": [
              {
                "from": "94703284362",
                "id": "wamid.HBgLOTQ3MDMyODQzNjIVAgASGBQzRkNGNURDMjU2QTA5MkUwMjBBOAA=",
                "timestamp": "1753510674",
                "text": {
                  "body": "hi"
                },
                "type": "text"
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:47:57,368 - services.whatsapp_service - INFO - [whatsapp_service.py:284] - üì® Received WhatsApp message from 94703284362: hi...
2025-07-26 11:47:57,369 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:124] - ‚úÖ Message queued for processing from 94703284362
2025-07-26 11:47:57,371 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:46] - ü§ñ Processing message from 94703284362: hi...
2025-07-26 11:47:57,371 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:30] - Creating new chatbot session for 94703284362
2025-07-26 11:48:01,637 - agent.language_agent - INFO - [language_agent.py:211] - [LanguageAgent] Combined detection: english (rule: 0.50, llm: english)
2025-07-26 11:48:01,637 - agent.agent - INFO - [agent.py:480] - [Language] Detected language: english (confidence: 0.70) for message: 'hi'
2025-07-26 11:48:01,637 - agent.agent - INFO - [agent.py:484] - [Optimized] Detected intent: general_inquiry for message: 'hi' in 4.20s
2025-07-26 11:48:05,953 - agent.agent - INFO - [agent.py:520] - [Optimized] Total processing time: 8.52s, Language: english
2025-07-26 11:48:05,954 - services.whatsapp_service - INFO - [whatsapp_service.py:137] - Sending WhatsApp message to 94703284362: Hello! How can I assist you today? üòä...
2025-07-26 11:48:06,956 - services.whatsapp_service - INFO - [whatsapp_service.py:143] - ‚úÖ Message sent successfully. Message ID: wamid.HBgLOTQ3MDMyODQzNjIVAgARGBJGRTI1M0ZGMEMxNEI3Nzk5QUUA
2025-07-26 11:48:06,956 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:58] - ‚úÖ Response sent to 94703284362: Hello! How can I assist you today? üòä...
2025-07-26 11:48:08,034 - services.whatsapp_service - INFO - [whatsapp_service.py:344] - ‚úÖ Message wamid.HBgLOTQ3MDMyODQzNjIVAgASGBQzRkNGNURDMjU2QTA5MkUwMjBBOAA= marked as read
2025-07-26 11:48:09,201 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MDMyODQzNjIVAgARGBJGRTI1M0ZGMEMxNEI3Nzk5QUUA",
                "status": "read",
                "timestamp": "1753510687",
                "recipient_id": "94703284362"
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:48:09,202 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 11:48:09,202 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 11:48:09,768 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MDMyODQzNjIVAgARGBJGRTI1M0ZGMEMxNEI3Nzk5QUUA",
                "status": "delivered",
                "timestamp": "1753510687",
                "recipient_id": "94703284362",
                "conversation": {
                  "id": "fa84d6cec3418ad661326154543ce13f",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:48:09,769 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 11:48:09,769 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 11:48:09,770 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MDMyODQzNjIVAgARGBJGRTI1M0ZGMEMxNEI3Nzk5QUUA",
                "status": "read",
                "timestamp": "1753510687",
                "recipient_id": "94703284362",
                "conversation": {
                  "id": "fa84d6cec3418ad661326154543ce13f",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:48:09,771 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 11:48:09,771 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 11:48:16,519 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MDMyODQzNjIVAgARGBJGRTI1M0ZGMEMxNEI3Nzk5QUUA",
                "status": "sent",
                "timestamp": "1753510687",
                "recipient_id": "94703284362",
                "conversation": {
                  "id": "fa84d6cec3418ad661326154543ce13f",
                  "expiration_timestamp": "1753510687",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:48:16,520 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 11:48:16,520 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 11:48:39,866 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "contacts": [
              {
                "profile": {
                  "name": "Srinath"
                },
                "wa_id": "94703284362"
              }
            ],
            "messages": [
              {
                "from": "94703284362",
                "id": "wamid.HBgLOTQ3MDMyODQzNjIVAgASGBQzRkIwMzE3Q0Q4M0EyNzYzQjBGMQA=",
                "timestamp": "1753510718",
                "text": {
                  "body": "what do you have to buy for me"
                },
                "type": "text"
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:48:39,866 - services.whatsapp_service - INFO - [whatsapp_service.py:284] - üì® Received WhatsApp message from 94703284362: what do you have to buy for me...
2025-07-26 11:48:39,868 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:124] - ‚úÖ Message queued for processing from 94703284362
2025-07-26 11:48:39,869 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:46] - ü§ñ Processing message from 94703284362: what do you have to buy for me...
2025-07-26 11:48:43,751 - agent.language_agent - INFO - [language_agent.py:211] - [LanguageAgent] Combined detection: english (rule: 0.62, llm: english)
2025-07-26 11:48:43,751 - agent.agent - INFO - [agent.py:480] - [Language] Detected language: english (confidence: 0.82) for message: 'what do you have to buy for me'
2025-07-26 11:48:43,752 - agent.agent - INFO - [agent.py:484] - [Optimized] Detected intent: place_order for message: 'what do you have to buy for me' in 3.88s
2025-07-26 11:48:58,704 - agent.agent - INFO - [agent.py:520] - [Optimized] Total processing time: 18.83s, Language: english
2025-07-26 11:48:58,704 - services.whatsapp_service - INFO - [whatsapp_service.py:137] - Sending WhatsApp message to 94703284362: Here are the products available for purchase:

1. ...
2025-07-26 11:49:00,338 - services.whatsapp_service - INFO - [whatsapp_service.py:143] - ‚úÖ Message sent successfully. Message ID: wamid.HBgLOTQ3MDMyODQzNjIVAgARGBI4QUZCQjlCN0U5NTI5OUM3OUUA
2025-07-26 11:49:00,339 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:58] - ‚úÖ Response sent to 94703284362: Here are the products available for purchase:

1. ...
2025-07-26 11:49:01,363 - services.whatsapp_service - INFO - [whatsapp_service.py:344] - ‚úÖ Message wamid.HBgLOTQ3MDMyODQzNjIVAgASGBQzRkIwMzE3Q0Q4M0EyNzYzQjBGMQA= marked as read
2025-07-26 11:49:02,003 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MDMyODQzNjIVAgARGBI4QUZCQjlCN0U5NTI5OUM3OUUA",
                "status": "sent",
                "timestamp": "1753510740",
                "recipient_id": "94703284362",
                "conversation": {
                  "id": "702d0f96973f02c9325a2ef4da2c93ac",
                  "expiration_timestamp": "1753510740",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:49:02,003 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 11:49:02,003 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 11:49:02,288 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MDMyODQzNjIVAgARGBI4QUZCQjlCN0U5NTI5OUM3OUUA",
                "status": "delivered",
                "timestamp": "1753510740",
                "recipient_id": "94703284362",
                "conversation": {
                  "id": "702d0f96973f02c9325a2ef4da2c93ac",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:49:02,288 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 11:49:02,289 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 11:49:02,290 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MDMyODQzNjIVAgARGBI4QUZCQjlCN0U5NTI5OUM3OUUA",
                "status": "read",
                "timestamp": "1753510740",
                "recipient_id": "94703284362"
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:49:02,290 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 11:49:02,291 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 11:49:02,901 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MDMyODQzNjIVAgARGBI4QUZCQjlCN0U5NTI5OUM3OUUA",
                "status": "delivered",
                "timestamp": "1753510740",
                "recipient_id": "94703284362",
                "conversation": {
                  "id": "702d0f96973f02c9325a2ef4da2c93ac",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:49:02,901 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 11:49:02,901 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 11:50:00,755 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "contacts": [
              {
                "profile": {
                  "name": "Dilshan Liyanage"
                },
                "wa_id": "94701461095"
              }
            ],
            "messages": [
              {
                "from": "94701461095",
                "id": "wamid.HBgLOTQ3MDE0NjEwOTUVAgASGBYzRUIwODU4QzU1QjVEMDhERUYyRUQxAA==",
                "timestamp": "1753510798",
                "text": {
                  "body": "hi"
                },
                "type": "text"
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:50:00,756 - services.whatsapp_service - INFO - [whatsapp_service.py:284] - üì® Received WhatsApp message from 94701461095: hi...
2025-07-26 11:50:00,757 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:124] - ‚úÖ Message queued for processing from 94701461095
2025-07-26 11:50:00,758 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:46] - ü§ñ Processing message from 94701461095: hi...
2025-07-26 11:50:00,758 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:30] - Creating new chatbot session for 94701461095
2025-07-26 11:50:00,817 - agent.agent - INFO - [agent.py:480] - [Language] Detected language: english (confidence: 0.70) for message: 'hi'
2025-07-26 11:50:00,818 - agent.agent - INFO - [agent.py:484] - [Optimized] Detected intent: general_inquiry for message: 'hi' in 0.00s
2025-07-26 11:50:04,646 - agent.agent - INFO - [agent.py:520] - [Optimized] Total processing time: 3.83s, Language: english
2025-07-26 11:50:04,647 - services.whatsapp_service - INFO - [whatsapp_service.py:137] - Sending WhatsApp message to 94701461095: Hello! How can I assist you today? üòä...
2025-07-26 11:50:06,180 - services.whatsapp_service - INFO - [whatsapp_service.py:143] - ‚úÖ Message sent successfully. Message ID: wamid.HBgLOTQ3MDE0NjEwOTUVAgARGBIwOEI0MEQ3RkYzOUY3RDUyREYA
2025-07-26 11:50:06,181 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:58] - ‚úÖ Response sent to 94701461095: Hello! How can I assist you today? üòä...
2025-07-26 11:50:07,103 - services.whatsapp_service - INFO - [whatsapp_service.py:344] - ‚úÖ Message wamid.HBgLOTQ3MDE0NjEwOTUVAgASGBYzRUIwODU4QzU1QjVEMDhERUYyRUQxAA== marked as read
2025-07-26 11:50:08,946 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MDE0NjEwOTUVAgARGBIwOEI0MEQ3RkYzOUY3RDUyREYA",
                "status": "sent",
                "timestamp": "1753510806",
                "recipient_id": "94701461095",
                "conversation": {
                  "id": "2bf7c851caaa0adeaf0d7ae422d7abc8",
                  "expiration_timestamp": "1753510806",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:50:08,948 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 11:50:08,948 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 11:50:08,950 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MDE0NjEwOTUVAgARGBIwOEI0MEQ3RkYzOUY3RDUyREYA",
                "status": "read",
                "timestamp": "1753510807",
                "recipient_id": "94701461095"
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:50:08,950 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 11:50:08,951 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 11:50:08,952 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MDE0NjEwOTUVAgARGBIwOEI0MEQ3RkYzOUY3RDUyREYA",
                "status": "delivered",
                "timestamp": "1753510807",
                "recipient_id": "94701461095",
                "conversation": {
                  "id": "2bf7c851caaa0adeaf0d7ae422d7abc8",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:50:08,953 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 11:50:08,953 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 11:50:08,955 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MDE0NjEwOTUVAgARGBIwOEI0MEQ3RkYzOUY3RDUyREYA",
                "status": "delivered",
                "timestamp": "1753510806",
                "recipient_id": "94701461095",
                "conversation": {
                  "id": "2bf7c851caaa0adeaf0d7ae422d7abc8",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:50:08,955 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 11:50:08,955 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 11:50:31,761 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "contacts": [
              {
                "profile": {
                  "name": "Srinath"
                },
                "wa_id": "94703284362"
              }
            ],
            "messages": [
              {
                "from": "94703284362",
                "id": "wamid.HBgLOTQ3MDMyODQzNjIVAgASGBQzRjM5NUI2RjY3MTUyREM0NDEwRAA=",
                "timestamp": "1753510830",
                "text": {
                  "body": "i want to buy egg pack"
                },
                "type": "text"
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:50:31,762 - services.whatsapp_service - INFO - [whatsapp_service.py:284] - üì® Received WhatsApp message from 94703284362: i want to buy egg pack...
2025-07-26 11:50:31,764 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:124] - ‚úÖ Message queued for processing from 94703284362
2025-07-26 11:50:31,765 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:46] - ü§ñ Processing message from 94703284362: i want to buy egg pack...
2025-07-26 11:50:35,804 - agent.language_agent - INFO - [language_agent.py:211] - [LanguageAgent] Combined detection: english (rule: 0.50, llm: english)
2025-07-26 11:50:35,804 - agent.agent - INFO - [agent.py:480] - [Language] Detected language: english (confidence: 0.70) for message: 'i want to buy egg pack'
2025-07-26 11:50:35,804 - agent.agent - INFO - [agent.py:484] - [Optimized] Detected intent: place_order for message: 'i want to buy egg pack' in 4.04s
2025-07-26 11:50:48,064 - agent.agent - INFO - [agent.py:520] - [Optimized] Total processing time: 16.30s, Language: english
2025-07-26 11:50:48,064 - services.whatsapp_service - INFO - [whatsapp_service.py:137] - Sending WhatsApp message to 94703284362: To place your order for the **Organic Eggs (12 pac...
2025-07-26 11:50:49,290 - services.whatsapp_service - INFO - [whatsapp_service.py:143] - ‚úÖ Message sent successfully. Message ID: wamid.HBgLOTQ3MDMyODQzNjIVAgARGBJCN0UzMkREMDQ4MERDMDdFRDcA
2025-07-26 11:50:49,291 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:58] - ‚úÖ Response sent to 94703284362: To place your order for the **Organic Eggs (12 pac...
2025-07-26 11:50:50,324 - services.whatsapp_service - INFO - [whatsapp_service.py:344] - ‚úÖ Message wamid.HBgLOTQ3MDMyODQzNjIVAgASGBQzRjM5NUI2RjY3MTUyREM0NDEwRAA= marked as read
2025-07-26 11:50:51,568 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MDMyODQzNjIVAgARGBJCN0UzMkREMDQ4MERDMDdFRDcA",
                "status": "sent",
                "timestamp": "1753510849",
                "recipient_id": "94703284362",
                "conversation": {
                  "id": "1301e31ffd462217a43950676972777d",
                  "expiration_timestamp": "1753510849",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:50:51,569 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 11:50:51,569 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 11:50:52,364 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MDMyODQzNjIVAgARGBJCN0UzMkREMDQ4MERDMDdFRDcA",
                "status": "delivered",
                "timestamp": "1753510851",
                "recipient_id": "94703284362",
                "conversation": {
                  "id": "1301e31ffd462217a43950676972777d",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:50:52,365 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 11:50:52,365 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 11:50:52,466 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MDMyODQzNjIVAgARGBJCN0UzMkREMDQ4MERDMDdFRDcA",
                "status": "delivered",
                "timestamp": "1753510851",
                "recipient_id": "94703284362",
                "conversation": {
                  "id": "1301e31ffd462217a43950676972777d",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:50:52,467 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 11:50:52,467 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 11:51:00,081 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MDMyODQzNjIVAgARGBJCN0UzMkREMDQ4MERDMDdFRDcA",
                "status": "read",
                "timestamp": "1753510858",
                "recipient_id": "94703284362"
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:51:00,082 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 11:51:00,082 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 11:51:17,860 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "contacts": [
              {
                "profile": {
                  "name": "Dilshan Liyanage"
                },
                "wa_id": "94701461095"
              }
            ],
            "messages": [
              {
                "from": "94701461095",
                "id": "wamid.HBgLOTQ3MDE0NjEwOTUVAgASGBYzRUIwOERBREJEOTFFNDIxQzRDMkUwAA==",
                "timestamp": "1753510876",
                "text": {
                  "body": "what kind of products do you have"
                },
                "type": "text"
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:51:17,861 - services.whatsapp_service - INFO - [whatsapp_service.py:284] - üì® Received WhatsApp message from 94701461095: what kind of products do you have...
2025-07-26 11:51:17,862 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:124] - ‚úÖ Message queued for processing from 94701461095
2025-07-26 11:51:17,863 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:46] - ü§ñ Processing message from 94701461095: what kind of products do you have...
2025-07-26 11:51:22,276 - agent.language_agent - INFO - [language_agent.py:211] - [LanguageAgent] Combined detection: english (rule: 0.64, llm: english)
2025-07-26 11:51:22,277 - agent.agent - INFO - [agent.py:480] - [Language] Detected language: english (confidence: 0.84) for message: 'what kind of products do you have'
2025-07-26 11:51:22,277 - agent.agent - INFO - [agent.py:484] - [Optimized] Detected intent: product_info for message: 'what kind of products do you have' in 4.41s
2025-07-26 11:51:37,785 - agent.agent - INFO - [agent.py:520] - [Optimized] Total processing time: 19.92s, Language: english
2025-07-26 11:51:37,785 - services.whatsapp_service - INFO - [whatsapp_service.py:137] - Sending WhatsApp message to 94701461095: Here are the products we currently offer:

1. **Or...
2025-07-26 11:51:38,892 - services.whatsapp_service - INFO - [whatsapp_service.py:143] - ‚úÖ Message sent successfully. Message ID: wamid.HBgLOTQ3MDE0NjEwOTUVAgARGBI4QjBDREU4MUIzMUJGNzNEQzQA
2025-07-26 11:51:38,893 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:58] - ‚úÖ Response sent to 94701461095: Here are the products we currently offer:

1. **Or...
2025-07-26 11:51:39,542 - services.whatsapp_service - INFO - [whatsapp_service.py:344] - ‚úÖ Message wamid.HBgLOTQ3MDE0NjEwOTUVAgASGBYzRUIwOERBREJEOTFFNDIxQzRDMkUwAA== marked as read
2025-07-26 11:51:40,798 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MDE0NjEwOTUVAgARGBI4QjBDREU4MUIzMUJGNzNEQzQA",
                "status": "sent",
                "timestamp": "1753510899",
                "recipient_id": "94701461095",
                "conversation": {
                  "id": "9c165acda2d0162edd9b947caef36670",
                  "expiration_timestamp": "1753510899",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:51:40,799 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 11:51:40,799 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 11:51:40,884 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MDE0NjEwOTUVAgARGBI4QjBDREU4MUIzMUJGNzNEQzQA",
                "status": "delivered",
                "timestamp": "1753510899",
                "recipient_id": "94701461095",
                "conversation": {
                  "id": "9c165acda2d0162edd9b947caef36670",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:51:40,886 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 11:51:40,886 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 11:51:40,984 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MDE0NjEwOTUVAgARGBI4QjBDREU4MUIzMUJGNzNEQzQA",
                "status": "delivered",
                "timestamp": "1753510899",
                "recipient_id": "94701461095",
                "conversation": {
                  "id": "9c165acda2d0162edd9b947caef36670",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:51:40,985 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 11:51:40,985 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 11:51:41,671 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MDE0NjEwOTUVAgARGBI4QjBDREU4MUIzMUJGNzNEQzQA",
                "status": "read",
                "timestamp": "1753510899",
                "recipient_id": "94701461095"
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:51:41,673 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 11:51:41,673 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 11:53:07,939 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "contacts": [
              {
                "profile": {
                  "name": "Dilshan Liyanage"
                },
                "wa_id": "94701461095"
              }
            ],
            "messages": [
              {
                "from": "94701461095",
                "id": "wamid.HBgLOTQ3MDE0NjEwOTUVAgASGBYzRUIwMDE3Qzk2ODJFQkZBQ0EyMjNBAA==",
                "timestamp": "1753510986",
                "text": {
                  "body": "Any discounts today ?"
                },
                "type": "text"
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:53:07,940 - services.whatsapp_service - INFO - [whatsapp_service.py:284] - üì® Received WhatsApp message from 94701461095: Any discounts today ?...
2025-07-26 11:53:07,941 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:124] - ‚úÖ Message queued for processing from 94701461095
2025-07-26 11:53:07,941 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:46] - ü§ñ Processing message from 94701461095: Any discounts today ?...
2025-07-26 11:53:12,244 - agent.language_agent - INFO - [language_agent.py:211] - [LanguageAgent] Combined detection: english (rule: 0.50, llm: english)
2025-07-26 11:53:12,245 - agent.agent - INFO - [agent.py:480] - [Language] Detected language: english (confidence: 0.70) for message: 'Any discounts today ?'
2025-07-26 11:53:12,245 - agent.agent - INFO - [agent.py:484] - [Optimized] Detected intent: general_inquiry for message: 'Any discounts today ?' in 4.30s
2025-07-26 11:53:19,305 - agent.agent - INFO - [agent.py:520] - [Optimized] Total processing time: 11.36s, Language: english
2025-07-26 11:53:19,306 - services.whatsapp_service - INFO - [whatsapp_service.py:137] - Sending WhatsApp message to 94701461095: Currently, we don't have any ongoing discounts, bu...
2025-07-26 11:53:20,633 - services.whatsapp_service - INFO - [whatsapp_service.py:143] - ‚úÖ Message sent successfully. Message ID: wamid.HBgLOTQ3MDE0NjEwOTUVAgARGBJEOEIxQzJGRkUzQUUyNTk4NTAA
2025-07-26 11:53:20,633 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:58] - ‚úÖ Response sent to 94701461095: Currently, we don't have any ongoing discounts, bu...
2025-07-26 11:53:21,719 - services.whatsapp_service - INFO - [whatsapp_service.py:344] - ‚úÖ Message wamid.HBgLOTQ3MDE0NjEwOTUVAgASGBYzRUIwMDE3Qzk2ODJFQkZBQ0EyMjNBAA== marked as read
2025-07-26 11:53:22,696 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MDE0NjEwOTUVAgARGBJEOEIxQzJGRkUzQUUyNTk4NTAA",
                "status": "sent",
                "timestamp": "1753511001",
                "recipient_id": "94701461095",
                "conversation": {
                  "id": "e5dd1664327fbc8740b0ca552cf258dc",
                  "expiration_timestamp": "1753511001",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:53:22,697 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 11:53:22,697 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 11:53:22,786 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MDE0NjEwOTUVAgARGBJEOEIxQzJGRkUzQUUyNTk4NTAA",
                "status": "delivered",
                "timestamp": "1753511001",
                "recipient_id": "94701461095",
                "conversation": {
                  "id": "e5dd1664327fbc8740b0ca552cf258dc",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:53:22,787 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 11:53:22,787 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 11:53:23,098 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MDE0NjEwOTUVAgARGBJEOEIxQzJGRkUzQUUyNTk4NTAA",
                "status": "read",
                "timestamp": "1753511001",
                "recipient_id": "94701461095"
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:53:23,099 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 11:53:23,099 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 11:53:23,194 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MDE0NjEwOTUVAgARGBJEOEIxQzJGRkUzQUUyNTk4NTAA",
                "status": "delivered",
                "timestamp": "1753511001",
                "recipient_id": "94701461095",
                "conversation": {
                  "id": "e5dd1664327fbc8740b0ca552cf258dc",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:53:23,195 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 11:53:23,195 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 11:53:36,029 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "contacts": [
              {
                "profile": {
                  "name": "Dilshan Liyanage"
                },
                "wa_id": "94701461095"
              }
            ],
            "messages": [
              {
                "from": "94701461095",
                "id": "wamid.HBgLOTQ3MDE0NjEwOTUVAgASGBYzRUIwOUU5M0QyOTFCNUFDQjA4NkU1AA==",
                "timestamp": "1753511014",
                "text": {
                  "body": "no need"
                },
                "type": "text"
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:53:36,029 - services.whatsapp_service - INFO - [whatsapp_service.py:284] - üì® Received WhatsApp message from 94701461095: no need...
2025-07-26 11:53:36,030 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:124] - ‚úÖ Message queued for processing from 94701461095
2025-07-26 11:53:36,031 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:46] - ü§ñ Processing message from 94701461095: no need...
2025-07-26 11:53:41,022 - agent.language_agent - INFO - [language_agent.py:211] - [LanguageAgent] Combined detection: english (rule: 0.50, llm: english)
2025-07-26 11:53:41,022 - agent.agent - INFO - [agent.py:480] - [Language] Detected language: english (confidence: 0.70) for message: 'no need'
2025-07-26 11:53:41,023 - agent.agent - INFO - [agent.py:484] - [Optimized] Detected intent: general_inquiry for message: 'no need' in 4.99s
2025-07-26 11:53:45,928 - agent.agent - INFO - [agent.py:520] - [Optimized] Total processing time: 9.90s, Language: english
2025-07-26 11:53:45,929 - services.whatsapp_service - INFO - [whatsapp_service.py:137] - Sending WhatsApp message to 94701461095: Alright, no problem! If you change your mind or ne...
2025-07-26 11:53:47,222 - services.whatsapp_service - INFO - [whatsapp_service.py:143] - ‚úÖ Message sent successfully. Message ID: wamid.HBgLOTQ3MDE0NjEwOTUVAgARGBJENThGNjMwRjU1MDMyQjgyMjAA
2025-07-26 11:53:47,300 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:58] - ‚úÖ Response sent to 94701461095: Alright, no problem! If you change your mind or ne...
2025-07-26 11:53:48,691 - services.whatsapp_service - INFO - [whatsapp_service.py:344] - ‚úÖ Message wamid.HBgLOTQ3MDE0NjEwOTUVAgASGBYzRUIwOUU5M0QyOTFCNUFDQjA4NkU1AA== marked as read
2025-07-26 11:53:49,427 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "contacts": [
              {
                "profile": {
                  "name": "Dilshan Liyanage"
                },
                "wa_id": "94701461095"
              }
            ],
            "messages": [
              {
                "from": "94701461095",
                "id": "wamid.HBgLOTQ3MDE0NjEwOTUVAgASGBYzRUIwRTNBNDE2RDkyM0U5QTYyQkJGAA==",
                "timestamp": "1753511028",
                "text": {
                  "body": "What are the best-selling items?"
                },
                "type": "text"
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:53:49,428 - services.whatsapp_service - INFO - [whatsapp_service.py:284] - üì® Received WhatsApp message from 94701461095: What are the best-selling items?...
2025-07-26 11:53:49,429 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:124] - ‚úÖ Message queued for processing from 94701461095
2025-07-26 11:53:49,431 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:46] - ü§ñ Processing message from 94701461095: What are the best-selling items?...
2025-07-26 11:53:52,786 - agent.language_agent - INFO - [language_agent.py:211] - [LanguageAgent] Combined detection: english (rule: 0.70, llm: english)
2025-07-26 11:53:52,787 - agent.agent - INFO - [agent.py:480] - [Language] Detected language: english (confidence: 0.90) for message: 'What are the best-selling items?'
2025-07-26 11:53:52,787 - agent.agent - INFO - [agent.py:484] - [Optimized] Detected intent: general_inquiry for message: 'What are the best-selling items?' in 3.36s
2025-07-26 11:54:01,541 - agent.agent - INFO - [agent.py:520] - [Optimized] Total processing time: 12.11s, Language: english
2025-07-26 11:54:01,541 - services.whatsapp_service - INFO - [whatsapp_service.py:137] - Sending WhatsApp message to 94701461095: Here are our current best-selling items based on p...
2025-07-26 11:54:02,425 - services.whatsapp_service - INFO - [whatsapp_service.py:143] - ‚úÖ Message sent successfully. Message ID: wamid.HBgLOTQ3MDE0NjEwOTUVAgARGBI4OEI4MEM3NzZBOEQ4QjNFODAA
2025-07-26 11:54:02,425 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:58] - ‚úÖ Response sent to 94701461095: Here are our current best-selling items based on p...
2025-07-26 11:54:03,404 - services.whatsapp_service - INFO - [whatsapp_service.py:344] - ‚úÖ Message wamid.HBgLOTQ3MDE0NjEwOTUVAgASGBYzRUIwRTNBNDE2RDkyM0U5QTYyQkJGAA== marked as read
2025-07-26 11:54:03,407 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MDE0NjEwOTUVAgARGBJENThGNjMwRjU1MDMyQjgyMjAA",
                "status": "sent",
                "timestamp": "1753511027",
                "recipient_id": "94701461095",
                "conversation": {
                  "id": "1452e562561e56c97b13e286da0e94eb",
                  "expiration_timestamp": "1753511027",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:54:03,408 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 11:54:03,408 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 11:54:03,411 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MDE0NjEwOTUVAgARGBJENThGNjMwRjU1MDMyQjgyMjAA",
                "status": "delivered",
                "timestamp": "1753511028",
                "recipient_id": "94701461095",
                "conversation": {
                  "id": "1452e562561e56c97b13e286da0e94eb",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:54:03,412 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 11:54:03,412 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 11:54:04,247 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MDE0NjEwOTUVAgARGBJENThGNjMwRjU1MDMyQjgyMjAA",
                "status": "read",
                "timestamp": "1753511028",
                "recipient_id": "94701461095"
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:54:04,247 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 11:54:04,247 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 11:54:04,683 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MDE0NjEwOTUVAgARGBI4OEI4MEM3NzZBOEQ4QjNFODAA",
                "status": "delivered",
                "timestamp": "1753511043",
                "recipient_id": "94701461095",
                "conversation": {
                  "id": "cc30d2273a4066d2ddfcc9435eee25fa",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:54:04,683 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 11:54:04,683 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 11:54:04,849 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MDE0NjEwOTUVAgARGBI4OEI4MEM3NzZBOEQ4QjNFODAA",
                "status": "read",
                "timestamp": "1753511043",
                "recipient_id": "94701461095"
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:54:04,850 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 11:54:04,850 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 11:54:04,883 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MDE0NjEwOTUVAgARGBI4OEI4MEM3NzZBOEQ4QjNFODAA",
                "status": "sent",
                "timestamp": "1753511043",
                "recipient_id": "94701461095",
                "conversation": {
                  "id": "cc30d2273a4066d2ddfcc9435eee25fa",
                  "expiration_timestamp": "1753511043",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:54:04,883 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 11:54:04,883 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 11:54:11,118 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "contacts": [
              {
                "profile": {
                  "name": "Srinath"
                },
                "wa_id": "94703284362"
              }
            ],
            "messages": [
              {
                "from": "94703284362",
                "id": "wamid.HBgLOTQ3MDMyODQzNjIVAgASGBQzRkZCOUZBREVGMEJFMjRFMTI2RQA=",
                "timestamp": "1753511049",
                "text": {
                  "body": "Srinath Priyankara srinathpriyankara@gmail.com Galle 0703284362"
                },
                "type": "text"
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:54:11,118 - services.whatsapp_service - INFO - [whatsapp_service.py:284] - üì® Received WhatsApp message from 94703284362: Srinath Priyankara srinathpriyankara@gmail.com Gal...
2025-07-26 11:54:11,120 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:124] - ‚úÖ Message queued for processing from 94703284362
2025-07-26 11:54:11,120 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:46] - ü§ñ Processing message from 94703284362: Srinath Priyankara srinathpriyankara@gmail.com Gal...
2025-07-26 11:54:14,496 - agent.language_agent - INFO - [language_agent.py:211] - [LanguageAgent] Combined detection: english (rule: 0.50, llm: english)
2025-07-26 11:54:14,496 - agent.agent - INFO - [agent.py:480] - [Language] Detected language: english (confidence: 0.70) for message: 'Srinath Priyankara srinathpriyankara@gmail.com Galle 0703284362'
2025-07-26 11:54:14,496 - agent.agent - INFO - [agent.py:484] - [Optimized] Detected intent: general_inquiry for message: 'Srinath Priyankara srinathpriyankara@gmail.com Galle 0703284362' in 3.38s
2025-07-26 11:54:32,211 - agent.agent - INFO - [agent.py:520] - [Optimized] Total processing time: 21.09s, Language: english
2025-07-26 11:54:32,211 - services.whatsapp_service - INFO - [whatsapp_service.py:137] - Sending WhatsApp message to 94703284362: Your order for **Organic Eggs (12 pack)** has been...
2025-07-26 11:54:33,853 - services.whatsapp_service - INFO - [whatsapp_service.py:143] - ‚úÖ Message sent successfully. Message ID: wamid.HBgLOTQ3MDMyODQzNjIVAgARGBJFRjAzQzc1MEQzODkxOUFBQjMA
2025-07-26 11:54:33,854 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:58] - ‚úÖ Response sent to 94703284362: Your order for **Organic Eggs (12 pack)** has been...
2025-07-26 11:54:34,986 - services.whatsapp_service - INFO - [whatsapp_service.py:344] - ‚úÖ Message wamid.HBgLOTQ3MDMyODQzNjIVAgASGBQzRkZCOUZBREVGMEJFMjRFMTI2RQA= marked as read
2025-07-26 11:54:35,591 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MDMyODQzNjIVAgARGBJFRjAzQzc1MEQzODkxOUFBQjMA",
                "status": "delivered",
                "timestamp": "1753511074",
                "recipient_id": "94703284362",
                "conversation": {
                  "id": "e62786545ff912d072e514620525415a",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:54:35,592 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 11:54:35,592 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 11:54:35,593 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MDMyODQzNjIVAgARGBJFRjAzQzc1MEQzODkxOUFBQjMA",
                "status": "delivered",
                "timestamp": "1753511074",
                "recipient_id": "94703284362",
                "conversation": {
                  "id": "e62786545ff912d072e514620525415a",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:54:35,594 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 11:54:35,594 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 11:54:35,695 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MDMyODQzNjIVAgARGBJFRjAzQzc1MEQzODkxOUFBQjMA",
                "status": "sent",
                "timestamp": "1753511073",
                "recipient_id": "94703284362",
                "conversation": {
                  "id": "e62786545ff912d072e514620525415a",
                  "expiration_timestamp": "1753511073",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:54:35,695 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 11:54:35,696 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 11:54:35,697 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MDMyODQzNjIVAgARGBJFRjAzQzc1MEQzODkxOUFBQjMA",
                "status": "read",
                "timestamp": "1753511074",
                "recipient_id": "94703284362"
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:54:35,697 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 11:54:35,697 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 11:55:11,185 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "contacts": [
              {
                "profile": {
                  "name": "Dilshan Liyanage"
                },
                "wa_id": "94701461095"
              }
            ],
            "messages": [
              {
                "from": "94701461095",
                "id": "wamid.HBgLOTQ3MDE0NjEwOTUVAgASGBYzRUIwQTc1OTE2MjkxQTI2NzczREMyAA==",
                "timestamp": "1753511109",
                "text": {
                  "body": "How much stock is left for whole wheat bread"
                },
                "type": "text"
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:55:11,186 - services.whatsapp_service - INFO - [whatsapp_service.py:284] - üì® Received WhatsApp message from 94701461095: How much stock is left for whole wheat bread...
2025-07-26 11:55:11,187 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:124] - ‚úÖ Message queued for processing from 94701461095
2025-07-26 11:55:11,188 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:46] - ü§ñ Processing message from 94701461095: How much stock is left for whole wheat bread...
2025-07-26 11:55:14,586 - agent.language_agent - INFO - [language_agent.py:211] - [LanguageAgent] Combined detection: english (rule: 0.61, llm: english)
2025-07-26 11:55:14,587 - agent.agent - INFO - [agent.py:480] - [Language] Detected language: english (confidence: 0.81) for message: 'How much stock is left for whole wheat bread'
2025-07-26 11:55:14,587 - agent.agent - INFO - [agent.py:484] - [Optimized] Detected intent: product_info for message: 'How much stock is left for whole wheat bread' in 3.40s
2025-07-26 11:55:24,923 - agent.agent - INFO - [agent.py:520] - [Optimized] Total processing time: 13.73s, Language: english
2025-07-26 11:55:24,924 - services.whatsapp_service - INFO - [whatsapp_service.py:137] - Sending WhatsApp message to 94701461095: The current stock for **Whole Wheat Bread** is **1...
2025-07-26 11:55:26,294 - services.whatsapp_service - INFO - [whatsapp_service.py:143] - ‚úÖ Message sent successfully. Message ID: wamid.HBgLOTQ3MDE0NjEwOTUVAgARGBJFNTM0MDAxRTREMkVFOUVCMzgA
2025-07-26 11:55:26,295 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:58] - ‚úÖ Response sent to 94701461095: The current stock for **Whole Wheat Bread** is **1...
2025-07-26 11:55:27,173 - services.whatsapp_service - INFO - [whatsapp_service.py:344] - ‚úÖ Message wamid.HBgLOTQ3MDE0NjEwOTUVAgASGBYzRUIwQTc1OTE2MjkxQTI2NzczREMyAA== marked as read
2025-07-26 11:55:28,241 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MDE0NjEwOTUVAgARGBJFNTM0MDAxRTREMkVFOUVCMzgA",
                "status": "sent",
                "timestamp": "1753511126",
                "recipient_id": "94701461095",
                "conversation": {
                  "id": "195999a7a065b46373ef1d4844dcd27c",
                  "expiration_timestamp": "1753511126",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:55:28,241 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 11:55:28,241 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 11:55:29,095 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MDE0NjEwOTUVAgARGBJFNTM0MDAxRTREMkVFOUVCMzgA",
                "status": "delivered",
                "timestamp": "1753511127",
                "recipient_id": "94701461095",
                "conversation": {
                  "id": "195999a7a065b46373ef1d4844dcd27c",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:55:29,096 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 11:55:29,096 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 11:55:33,679 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MDE0NjEwOTUVAgARGBJFNTM0MDAxRTREMkVFOUVCMzgA",
                "status": "read",
                "timestamp": "1753511132",
                "recipient_id": "94701461095"
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:55:33,680 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 11:55:33,680 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 11:55:56,667 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "contacts": [
              {
                "profile": {
                  "name": "Dilshan Liyanage"
                },
                "wa_id": "94701461095"
              }
            ],
            "messages": [
              {
                "from": "94701461095",
                "id": "wamid.HBgLOTQ3MDE0NjEwOTUVAgASGBYzRUIwMDkyN0Y0QTMzRDVDQTE2RTU2AA==",
                "timestamp": "1753511155",
                "text": {
                  "body": "Can you tell me the total for whole wheat bread"
                },
                "type": "text"
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:55:56,668 - services.whatsapp_service - INFO - [whatsapp_service.py:284] - üì® Received WhatsApp message from 94701461095: Can you tell me the total for whole wheat bread...
2025-07-26 11:55:56,670 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:124] - ‚úÖ Message queued for processing from 94701461095
2025-07-26 11:55:56,671 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:46] - ü§ñ Processing message from 94701461095: Can you tell me the total for whole wheat bread...
2025-07-26 11:56:00,416 - agent.language_agent - INFO - [language_agent.py:211] - [LanguageAgent] Combined detection: english (rule: 0.80, llm: english)
2025-07-26 11:56:00,417 - agent.agent - INFO - [agent.py:480] - [Language] Detected language: english (confidence: 0.95) for message: 'Can you tell me the total for whole wheat bread'
2025-07-26 11:56:00,417 - agent.agent - INFO - [agent.py:484] - [Optimized] Detected intent: general_inquiry for message: 'Can you tell me the total for whole wheat bread' in 3.75s
2025-07-26 11:56:05,621 - agent.agent - INFO - [agent.py:520] - [Optimized] Total processing time: 8.95s, Language: english
2025-07-26 11:56:05,621 - services.whatsapp_service - INFO - [whatsapp_service.py:137] - Sending WhatsApp message to 94701461095: The total price for **Whole Wheat Bread** is **LKR...
2025-07-26 11:56:06,555 - services.whatsapp_service - INFO - [whatsapp_service.py:143] - ‚úÖ Message sent successfully. Message ID: wamid.HBgLOTQ3MDE0NjEwOTUVAgARGBIzNTE4OTA0QTlFRTY4QjU3NTIA
2025-07-26 11:56:06,555 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:58] - ‚úÖ Response sent to 94701461095: The total price for **Whole Wheat Bread** is **LKR...
2025-07-26 11:56:07,458 - services.whatsapp_service - INFO - [whatsapp_service.py:344] - ‚úÖ Message wamid.HBgLOTQ3MDE0NjEwOTUVAgASGBYzRUIwMDkyN0Y0QTMzRDVDQTE2RTU2AA== marked as read
2025-07-26 11:56:08,072 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "contacts": [
              {
                "profile": {
                  "name": "Dilshan Liyanage"
                },
                "wa_id": "94701461095"
              }
            ],
            "messages": [
              {
                "from": "94701461095",
                "id": "wamid.HBgLOTQ3MDE0NjEwOTUVAgASGBYzRUIwMzNBRjgxQTg2MEMyNERFOEEwAA==",
                "timestamp": "1753511163",
                "text": {
                  "body": "for 2 items"
                },
                "type": "text"
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:56:08,072 - services.whatsapp_service - INFO - [whatsapp_service.py:284] - üì® Received WhatsApp message from 94701461095: for 2 items...
2025-07-26 11:56:08,073 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:124] - ‚úÖ Message queued for processing from 94701461095
2025-07-26 11:56:08,074 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:46] - ü§ñ Processing message from 94701461095: for 2 items...
2025-07-26 11:56:12,084 - agent.language_agent - INFO - [language_agent.py:211] - [LanguageAgent] Combined detection: english (rule: 0.80, llm: english)
2025-07-26 11:56:12,084 - agent.agent - INFO - [agent.py:480] - [Language] Detected language: english (confidence: 0.95) for message: 'for 2 items'
2025-07-26 11:56:12,084 - agent.agent - INFO - [agent.py:484] - [Optimized] Detected intent: general_inquiry for message: 'for 2 items' in 4.01s
2025-07-26 11:56:17,686 - agent.agent - INFO - [agent.py:520] - [Optimized] Total processing time: 9.61s, Language: english
2025-07-26 11:56:17,686 - services.whatsapp_service - INFO - [whatsapp_service.py:137] - Sending WhatsApp message to 94701461095: The total price for **2 units of Whole Wheat Bread...
2025-07-26 11:56:18,553 - services.whatsapp_service - INFO - [whatsapp_service.py:143] - ‚úÖ Message sent successfully. Message ID: wamid.HBgLOTQ3MDE0NjEwOTUVAgARGBJGOUVGMkJEMUQ0MkI1NUI2RjAA
2025-07-26 11:56:18,554 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:58] - ‚úÖ Response sent to 94701461095: The total price for **2 units of Whole Wheat Bread...
2025-07-26 11:56:19,265 - services.whatsapp_service - INFO - [whatsapp_service.py:344] - ‚úÖ Message wamid.HBgLOTQ3MDE0NjEwOTUVAgASGBYzRUIwMzNBRjgxQTg2MEMyNERFOEEwAA== marked as read
2025-07-26 11:56:19,268 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "contacts": [
              {
                "profile": {
                  "name": "Srinath"
                },
                "wa_id": "94703284362"
              }
            ],
            "messages": [
              {
                "from": "94703284362",
                "id": "wamid.HBgLOTQ3MDMyODQzNjIVAgASGBQzRkZERDYwMjVDQURGRDg3MTUxOAA=",
                "timestamp": "1753511162",
                "text": {
                  "body": "i want to add tea bags for this same order"
                },
                "type": "text"
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:56:19,269 - services.whatsapp_service - INFO - [whatsapp_service.py:284] - üì® Received WhatsApp message from 94703284362: i want to add tea bags for this same order...
2025-07-26 11:56:19,271 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:124] - ‚úÖ Message queued for processing from 94703284362
2025-07-26 11:56:19,271 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:46] - ü§ñ Processing message from 94703284362: i want to add tea bags for this same order...
2025-07-26 11:56:23,217 - agent.language_agent - INFO - [language_agent.py:211] - [LanguageAgent] Combined detection: singlish (rule: 0.70, llm: english)
2025-07-26 11:56:23,217 - agent.agent - INFO - [agent.py:480] - [Language] Detected language: english (confidence: 0.60) for message: 'i want to add tea bags for this same order'
2025-07-26 11:56:23,217 - agent.agent - INFO - [agent.py:484] - [Optimized] Detected intent: order_tracking for message: 'i want to add tea bags for this same order' in 3.95s
2025-07-26 11:56:34,308 - agent.agent - INFO - [agent.py:520] - [Optimized] Total processing time: 15.04s, Language: english
2025-07-26 11:56:34,308 - services.whatsapp_service - INFO - [whatsapp_service.py:137] - Sending WhatsApp message to 94703284362: Your **Green Tea Bags** have been added to your or...
2025-07-26 11:56:35,332 - services.whatsapp_service - INFO - [whatsapp_service.py:143] - ‚úÖ Message sent successfully. Message ID: wamid.HBgLOTQ3MDMyODQzNjIVAgARGBI3MTgxM0I3MTkzMkMzMzlEMTYA
2025-07-26 11:56:35,332 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:58] - ‚úÖ Response sent to 94703284362: Your **Green Tea Bags** have been added to your or...
2025-07-26 11:56:36,276 - services.whatsapp_service - INFO - [whatsapp_service.py:344] - ‚úÖ Message wamid.HBgLOTQ3MDMyODQzNjIVAgASGBQzRkZERDYwMjVDQURGRDg3MTUxOAA= marked as read
2025-07-26 11:56:36,277 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MDE0NjEwOTUVAgARGBIzNTE4OTA0QTlFRTY4QjU3NTIA",
                "status": "sent",
                "timestamp": "1753511167",
                "recipient_id": "94701461095",
                "conversation": {
                  "id": "5eb57cbc006eb20a857d2199253b5391",
                  "expiration_timestamp": "1753511167",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:56:36,277 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 11:56:36,278 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 11:56:36,280 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MDE0NjEwOTUVAgARGBIzNTE4OTA0QTlFRTY4QjU3NTIA",
                "status": "delivered",
                "timestamp": "1753511168",
                "recipient_id": "94701461095",
                "conversation": {
                  "id": "5eb57cbc006eb20a857d2199253b5391",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:56:36,281 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 11:56:36,282 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 11:56:36,922 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MDE0NjEwOTUVAgARGBJGOUVGMkJEMUQ0MkI1NUI2RjAA",
                "status": "delivered",
                "timestamp": "1753511179",
                "recipient_id": "94701461095",
                "conversation": {
                  "id": "d84f688f3c83af129d88d73dedf3327e",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:56:36,922 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 11:56:36,922 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 11:56:36,983 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MDE0NjEwOTUVAgARGBIzNTE4OTA0QTlFRTY4QjU3NTIA",
                "status": "read",
                "timestamp": "1753511193",
                "recipient_id": "94701461095"
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:56:36,983 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 11:56:36,983 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 11:56:37,080 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MDE0NjEwOTUVAgARGBIzNTE4OTA0QTlFRTY4QjU3NTIA",
                "status": "sent",
                "timestamp": "1753511167",
                "recipient_id": "94701461095",
                "conversation": {
                  "id": "5eb57cbc006eb20a857d2199253b5391",
                  "expiration_timestamp": "1753511167",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:56:37,081 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 11:56:37,081 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 11:56:37,083 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MDE0NjEwOTUVAgARGBJGOUVGMkJEMUQ0MkI1NUI2RjAA",
                "status": "read",
                "timestamp": "1753511193",
                "recipient_id": "94701461095"
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:56:37,083 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 11:56:37,083 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 11:56:37,085 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MDE0NjEwOTUVAgARGBJGOUVGMkJEMUQ0MkI1NUI2RjAA",
                "status": "sent",
                "timestamp": "1753511179",
                "recipient_id": "94701461095",
                "conversation": {
                  "id": "d84f688f3c83af129d88d73dedf3327e",
                  "expiration_timestamp": "1753511179",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:56:37,085 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 11:56:37,086 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 11:56:37,123 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MDMyODQzNjIVAgARGBI3MTgxM0I3MTkzMkMzMzlEMTYA",
                "status": "sent",
                "timestamp": "1753511195",
                "recipient_id": "94703284362",
                "conversation": {
                  "id": "b482698d5923596c9c2d627d245ba45a",
                  "expiration_timestamp": "1753511195",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:56:37,123 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 11:56:37,123 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 11:56:37,522 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MDMyODQzNjIVAgARGBI3MTgxM0I3MTkzMkMzMzlEMTYA",
                "status": "delivered",
                "timestamp": "1753511196",
                "recipient_id": "94703284362",
                "conversation": {
                  "id": "b482698d5923596c9c2d627d245ba45a",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:56:37,523 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 11:56:37,523 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 11:56:37,631 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MDMyODQzNjIVAgARGBI3MTgxM0I3MTkzMkMzMzlEMTYA",
                "status": "read",
                "timestamp": "1753511196",
                "recipient_id": "94703284362"
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:56:37,631 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 11:56:37,631 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 11:57:04,067 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "contacts": [
              {
                "profile": {
                  "name": "Dilshan Liyanage"
                },
                "wa_id": "94701461095"
              }
            ],
            "messages": [
              {
                "from": "94701461095",
                "id": "wamid.HBgLOTQ3MDE0NjEwOTUVAgASGBYzRUIwNTIwMThCMzIzNDZCQ0ZDNUVBAA==",
                "timestamp": "1753511222",
                "text": {
                  "body": "I want to buy 2 bags of rice."
                },
                "type": "text"
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:57:04,068 - services.whatsapp_service - INFO - [whatsapp_service.py:284] - üì® Received WhatsApp message from 94701461095: I want to buy 2 bags of rice....
2025-07-26 11:57:04,069 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:124] - ‚úÖ Message queued for processing from 94701461095
2025-07-26 11:57:04,070 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:46] - ü§ñ Processing message from 94701461095: I want to buy 2 bags of rice....
2025-07-26 11:57:07,650 - agent.language_agent - INFO - [language_agent.py:211] - [LanguageAgent] Combined detection: english (rule: 0.50, llm: english)
2025-07-26 11:57:07,650 - agent.agent - INFO - [agent.py:480] - [Language] Detected language: english (confidence: 0.70) for message: 'I want to buy 2 bags of rice.'
2025-07-26 11:57:07,650 - agent.agent - INFO - [agent.py:484] - [Optimized] Detected intent: place_order for message: 'I want to buy 2 bags of rice.' in 3.58s
2025-07-26 11:57:17,483 - agent.agent - INFO - [agent.py:520] - [Optimized] Total processing time: 13.41s, Language: english
2025-07-26 11:57:17,484 - services.whatsapp_service - INFO - [whatsapp_service.py:137] - Sending WhatsApp message to 94701461095: It seems we currently don't have rice listed in ou...
2025-07-26 11:57:18,810 - services.whatsapp_service - INFO - [whatsapp_service.py:143] - ‚úÖ Message sent successfully. Message ID: wamid.HBgLOTQ3MDE0NjEwOTUVAgARGBI5MUVGODAwQTNEMjk0RDg5MTcA
2025-07-26 11:57:18,811 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:58] - ‚úÖ Response sent to 94701461095: It seems we currently don't have rice listed in ou...
2025-07-26 11:57:19,834 - services.whatsapp_service - INFO - [whatsapp_service.py:344] - ‚úÖ Message wamid.HBgLOTQ3MDE0NjEwOTUVAgASGBYzRUIwNTIwMThCMzIzNDZCQ0ZDNUVBAA== marked as read
2025-07-26 11:57:20,451 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "contacts": [
              {
                "profile": {
                  "name": "Srinath"
                },
                "wa_id": "94703284362"
              }
            ],
            "messages": [
              {
                "from": "94703284362",
                "id": "wamid.HBgLOTQ3MDMyODQzNjIVAgASGBQzRkIxRURGQzMzRkFCQzlENjVCQgA=",
                "timestamp": "1753511231",
                "text": {
                  "body": "no thanks"
                },
                "type": "text"
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:57:20,452 - services.whatsapp_service - INFO - [whatsapp_service.py:284] - üì® Received WhatsApp message from 94703284362: no thanks...
2025-07-26 11:57:20,454 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:124] - ‚úÖ Message queued for processing from 94703284362
2025-07-26 11:57:20,456 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:46] - ü§ñ Processing message from 94703284362: no thanks...
2025-07-26 11:57:24,543 - agent.language_agent - INFO - [language_agent.py:211] - [LanguageAgent] Combined detection: english (rule: 0.80, llm: english)
2025-07-26 11:57:24,543 - agent.agent - INFO - [agent.py:480] - [Language] Detected language: english (confidence: 0.95) for message: 'no thanks'
2025-07-26 11:57:24,544 - agent.agent - INFO - [agent.py:484] - [Optimized] Detected intent: general_inquiry for message: 'no thanks' in 4.09s
2025-07-26 11:57:29,477 - agent.agent - INFO - [agent.py:520] - [Optimized] Total processing time: 9.02s, Language: english
2025-07-26 11:57:29,479 - services.whatsapp_service - INFO - [whatsapp_service.py:137] - Sending WhatsApp message to 94703284362: You're welcome! If you need anything else in the f...
2025-07-26 11:57:30,587 - services.whatsapp_service - INFO - [whatsapp_service.py:143] - ‚úÖ Message sent successfully. Message ID: wamid.HBgLOTQ3MDMyODQzNjIVAgARGBJCOTU3NzUxNDY0NUZBMzc3NDMA
2025-07-26 11:57:30,587 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:58] - ‚úÖ Response sent to 94703284362: You're welcome! If you need anything else in the f...
2025-07-26 11:57:31,541 - services.whatsapp_service - INFO - [whatsapp_service.py:344] - ‚úÖ Message wamid.HBgLOTQ3MDMyODQzNjIVAgASGBQzRkIxRURGQzMzRkFCQzlENjVCQgA= marked as read
2025-07-26 11:57:31,545 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MDE0NjEwOTUVAgARGBI5MUVGODAwQTNEMjk0RDg5MTcA",
                "status": "sent",
                "timestamp": "1753511239",
                "recipient_id": "94701461095",
                "conversation": {
                  "id": "2e72656a8d54ebabf1caa0901e6bb462",
                  "expiration_timestamp": "1753511239",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:57:31,547 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 11:57:31,547 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 11:57:31,549 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MDE0NjEwOTUVAgARGBI5MUVGODAwQTNEMjk0RDg5MTcA",
                "status": "delivered",
                "timestamp": "1753511239",
                "recipient_id": "94701461095",
                "conversation": {
                  "id": "2e72656a8d54ebabf1caa0901e6bb462",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:57:31,550 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 11:57:31,550 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 11:57:32,473 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MDE0NjEwOTUVAgARGBI5MUVGODAwQTNEMjk0RDg5MTcA",
                "status": "read",
                "timestamp": "1753511239",
                "recipient_id": "94701461095"
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:57:32,474 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 11:57:32,475 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 11:57:32,476 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MDMyODQzNjIVAgARGBJCOTU3NzUxNDY0NUZBMzc3NDMA",
                "status": "delivered",
                "timestamp": "1753511251",
                "recipient_id": "94703284362",
                "conversation": {
                  "id": "4be6644035de903e415c81eaa7dcffe6",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:57:32,478 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 11:57:32,478 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 11:57:32,479 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MDMyODQzNjIVAgARGBJCOTU3NzUxNDY0NUZBMzc3NDMA",
                "status": "sent",
                "timestamp": "1753511250",
                "recipient_id": "94703284362",
                "conversation": {
                  "id": "4be6644035de903e415c81eaa7dcffe6",
                  "expiration_timestamp": "1753511250",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:57:32,481 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 11:57:32,482 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 11:57:34,782 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MDMyODQzNjIVAgARGBJCOTU3NzUxNDY0NUZBMzc3NDMA",
                "status": "read",
                "timestamp": "1753511253",
                "recipient_id": "94703284362"
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:57:34,783 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 11:57:34,783 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 11:57:52,092 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "contacts": [
              {
                "profile": {
                  "name": "Dilshan Liyanage"
                },
                "wa_id": "94701461095"
              }
            ],
            "messages": [
              {
                "from": "94701461095",
                "id": "wamid.HBgLOTQ3MDE0NjEwOTUVAgASGBYzRUIwRTg1RjJGOTlCNDhCRTY3Q0Q4AA==",
                "timestamp": "1753511270",
                "text": {
                  "body": "ok I want to buy 2 sunflower oil"
                },
                "type": "text"
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:57:52,092 - services.whatsapp_service - INFO - [whatsapp_service.py:284] - üì® Received WhatsApp message from 94701461095: ok I want to buy 2 sunflower oil...
2025-07-26 11:57:52,093 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:124] - ‚úÖ Message queued for processing from 94701461095
2025-07-26 11:57:52,094 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:46] - ü§ñ Processing message from 94701461095: ok I want to buy 2 sunflower oil...
2025-07-26 11:57:56,391 - agent.language_agent - INFO - [language_agent.py:211] - [LanguageAgent] Combined detection: english (rule: 0.50, llm: english)
2025-07-26 11:57:56,391 - agent.agent - INFO - [agent.py:480] - [Language] Detected language: english (confidence: 0.70) for message: 'ok I want to buy 2 sunflower oil'
2025-07-26 11:57:56,391 - agent.agent - INFO - [agent.py:484] - [Optimized] Detected intent: place_order for message: 'ok I want to buy 2 sunflower oil' in 4.30s
2025-07-26 11:58:07,816 - agent.agent - INFO - [agent.py:520] - [Optimized] Total processing time: 15.72s, Language: english
2025-07-26 11:58:07,816 - services.whatsapp_service - INFO - [whatsapp_service.py:137] - Sending WhatsApp message to 94701461095: The **Sunflower Oil 1L** is available for **LKR 78...
2025-07-26 11:58:08,975 - services.whatsapp_service - INFO - [whatsapp_service.py:143] - ‚úÖ Message sent successfully. Message ID: wamid.HBgLOTQ3MDE0NjEwOTUVAgARGBJBN0FFQkJERUY2QkNCODQ3NDkA
2025-07-26 11:58:08,976 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:58] - ‚úÖ Response sent to 94701461095: The **Sunflower Oil 1L** is available for **LKR 78...
2025-07-26 11:58:09,805 - services.whatsapp_service - INFO - [whatsapp_service.py:344] - ‚úÖ Message wamid.HBgLOTQ3MDE0NjEwOTUVAgASGBYzRUIwRTg1RjJGOTlCNDhCRTY3Q0Q4AA== marked as read
2025-07-26 11:58:10,968 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MDE0NjEwOTUVAgARGBJBN0FFQkJERUY2QkNCODQ3NDkA",
                "status": "sent",
                "timestamp": "1753511289",
                "recipient_id": "94701461095",
                "conversation": {
                  "id": "a334848ffa35faeb53942030748c9af1",
                  "expiration_timestamp": "1753511289",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:58:10,969 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 11:58:10,969 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 11:58:11,547 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MDE0NjEwOTUVAgARGBJBN0FFQkJERUY2QkNCODQ3NDkA",
                "status": "delivered",
                "timestamp": "1753511290",
                "recipient_id": "94701461095",
                "conversation": {
                  "id": "a334848ffa35faeb53942030748c9af1",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:58:11,548 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 11:58:11,548 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 11:58:11,672 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MDE0NjEwOTUVAgARGBJBN0FFQkJERUY2QkNCODQ3NDkA",
                "status": "read",
                "timestamp": "1753511290",
                "recipient_id": "94701461095"
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:58:11,673 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 11:58:11,673 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 11:58:11,856 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MDE0NjEwOTUVAgARGBJBN0FFQkJERUY2QkNCODQ3NDkA",
                "status": "delivered",
                "timestamp": "1753511289",
                "recipient_id": "94701461095",
                "conversation": {
                  "id": "a334848ffa35faeb53942030748c9af1",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:58:11,857 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 11:58:11,857 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 11:59:01,006 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "contacts": [
              {
                "profile": {
                  "name": "Dilshan Liyanage"
                },
                "wa_id": "94701461095"
              }
            ],
            "messages": [
              {
                "from": "94701461095",
                "id": "wamid.HBgLOTQ3MDE0NjEwOTUVAgASGBYzRUIwQUU0RTY1RDZDQjM2N0ZEMkJFAA==",
                "timestamp": "1753511339",
                "text": {
                  "body": "Add organic egg pack to my order"
                },
                "type": "text"
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:59:01,006 - services.whatsapp_service - INFO - [whatsapp_service.py:284] - üì® Received WhatsApp message from 94701461095: Add organic egg pack to my order...
2025-07-26 11:59:01,008 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:124] - ‚úÖ Message queued for processing from 94701461095
2025-07-26 11:59:01,010 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:46] - ü§ñ Processing message from 94701461095: Add organic egg pack to my order...
2025-07-26 11:59:04,593 - agent.language_agent - INFO - [language_agent.py:211] - [LanguageAgent] Combined detection: singlish (rule: 0.70, llm: english)
2025-07-26 11:59:04,594 - agent.agent - INFO - [agent.py:480] - [Language] Detected language: english (confidence: 0.60) for message: 'Add organic egg pack to my order'
2025-07-26 11:59:04,594 - agent.agent - INFO - [agent.py:484] - [Optimized] Detected intent: order_tracking for message: 'Add organic egg pack to my order' in 3.58s
2025-07-26 11:59:13,195 - agent.agent - INFO - [agent.py:520] - [Optimized] Total processing time: 12.19s, Language: english
2025-07-26 11:59:13,195 - services.whatsapp_service - INFO - [whatsapp_service.py:137] - Sending WhatsApp message to 94701461095: Before adding the **Organic Egg Pack** to your ord...
2025-07-26 11:59:14,858 - services.whatsapp_service - INFO - [whatsapp_service.py:143] - ‚úÖ Message sent successfully. Message ID: wamid.HBgLOTQ3MDE0NjEwOTUVAgARGBIwOEEwNDdEODI5RDlCMjZENzUA
2025-07-26 11:59:14,859 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:58] - ‚úÖ Response sent to 94701461095: Before adding the **Organic Egg Pack** to your ord...
2025-07-26 11:59:15,742 - services.whatsapp_service - INFO - [whatsapp_service.py:344] - ‚úÖ Message wamid.HBgLOTQ3MDE0NjEwOTUVAgASGBYzRUIwQUU0RTY1RDZDQjM2N0ZEMkJFAA== marked as read
2025-07-26 11:59:16,385 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MDE0NjEwOTUVAgARGBIwOEEwNDdEODI5RDlCMjZENzUA",
                "status": "sent",
                "timestamp": "1753511355",
                "recipient_id": "94701461095",
                "conversation": {
                  "id": "63b9850f93c335eb4c4b0f037805582a",
                  "expiration_timestamp": "1753511355",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:59:16,386 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 11:59:16,386 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 11:59:16,721 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MDE0NjEwOTUVAgARGBIwOEEwNDdEODI5RDlCMjZENzUA",
                "status": "delivered",
                "timestamp": "1753511355",
                "recipient_id": "94701461095",
                "conversation": {
                  "id": "63b9850f93c335eb4c4b0f037805582a",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:59:16,722 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 11:59:16,722 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 11:59:16,791 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MDE0NjEwOTUVAgARGBIwOEEwNDdEODI5RDlCMjZENzUA",
                "status": "read",
                "timestamp": "1753511355",
                "recipient_id": "94701461095"
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:59:16,792 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 11:59:16,793 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 11:59:32,851 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "contacts": [
              {
                "profile": {
                  "name": "Dilshan Liyanage"
                },
                "wa_id": "94701461095"
              }
            ],
            "messages": [
              {
                "from": "94701461095",
                "id": "wamid.HBgLOTQ3MDE0NjEwOTUVAgASGBYzRUIwNEJCRkRCMDNEMEMxRDk3NzEwAA==",
                "timestamp": "1753511371",
                "text": {
                  "body": "confirm my order"
                },
                "type": "text"
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:59:32,852 - services.whatsapp_service - INFO - [whatsapp_service.py:284] - üì® Received WhatsApp message from 94701461095: confirm my order...
2025-07-26 11:59:32,853 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:124] - ‚úÖ Message queued for processing from 94701461095
2025-07-26 11:59:32,854 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:46] - ü§ñ Processing message from 94701461095: confirm my order...
2025-07-26 11:59:32,854 - agent.language_agent - INFO - [language_agent.py:191] - [LanguageAgent] Rule-based detection: singlish (confidence: 0.90)
2025-07-26 11:59:32,855 - agent.agent - INFO - [agent.py:480] - [Language] Detected language: singlish (confidence: 0.90) for message: 'confirm my order'
2025-07-26 11:59:32,855 - agent.agent - INFO - [agent.py:484] - [Optimized] Detected intent: order_tracking for message: 'confirm my order' in 0.00s
2025-07-26 11:59:46,267 - agent.agent - INFO - [agent.py:520] - [Optimized] Total processing time: 13.41s, Language: singlish
2025-07-26 11:59:46,268 - services.whatsapp_service - INFO - [whatsapp_service.py:137] - Sending WhatsApp message to 94701461095: To confirm your order, I‚Äôll need your details sinc...
2025-07-26 11:59:48,208 - services.whatsapp_service - INFO - [whatsapp_service.py:143] - ‚úÖ Message sent successfully. Message ID: wamid.HBgLOTQ3MDE0NjEwOTUVAgARGBJFQUVDODEwM0UxMjE2RjQxNkMA
2025-07-26 11:59:48,209 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:58] - ‚úÖ Response sent to 94701461095: To confirm your order, I‚Äôll need your details sinc...
2025-07-26 11:59:48,936 - services.whatsapp_service - INFO - [whatsapp_service.py:344] - ‚úÖ Message wamid.HBgLOTQ3MDE0NjEwOTUVAgASGBYzRUIwNEJCRkRCMDNEMEMxRDk3NzEwAA== marked as read
2025-07-26 11:59:50,257 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MDE0NjEwOTUVAgARGBJFQUVDODEwM0UxMjE2RjQxNkMA",
                "status": "sent",
                "timestamp": "1753511388",
                "recipient_id": "94701461095",
                "conversation": {
                  "id": "7b394d8d1fb63e096daeee9acb172186",
                  "expiration_timestamp": "1753511388",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:59:50,258 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 11:59:50,258 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 11:59:50,668 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MDE0NjEwOTUVAgARGBJFQUVDODEwM0UxMjE2RjQxNkMA",
                "status": "read",
                "timestamp": "1753511389",
                "recipient_id": "94701461095"
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:59:50,669 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 11:59:50,669 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 11:59:50,671 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MDE0NjEwOTUVAgARGBJFQUVDODEwM0UxMjE2RjQxNkMA",
                "status": "delivered",
                "timestamp": "1753511389",
                "recipient_id": "94701461095",
                "conversation": {
                  "id": "7b394d8d1fb63e096daeee9acb172186",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 11:59:50,672 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 11:59:50,672 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 12:00:48,114 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "contacts": [
              {
                "profile": {
                  "name": "Dilshan Liyanage"
                },
                "wa_id": "94701461095"
              }
            ],
            "messages": [
              {
                "from": "94701461095",
                "id": "wamid.HBgLOTQ3MDE0NjEwOTUVAgASGBYzRUIwQkRCQTA4MEE2Qzg4OTc4RUQzAA==",
                "timestamp": "1753511446",
                "text": {
                  "body": "dila vira,dilvira@gmail.com,neluwa,galle,0705555555"
                },
                "type": "text"
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 12:00:48,115 - services.whatsapp_service - INFO - [whatsapp_service.py:284] - üì® Received WhatsApp message from 94701461095: dila vira,dilvira@gmail.com,neluwa,galle,070555555...
2025-07-26 12:00:48,117 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:124] - ‚úÖ Message queued for processing from 94701461095
2025-07-26 12:00:48,118 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:46] - ü§ñ Processing message from 94701461095: dila vira,dilvira@gmail.com,neluwa,galle,070555555...
2025-07-26 12:00:52,003 - agent.language_agent - INFO - [language_agent.py:211] - [LanguageAgent] Combined detection: english (rule: 0.50, llm: english)
2025-07-26 12:00:52,004 - agent.agent - INFO - [agent.py:480] - [Language] Detected language: english (confidence: 0.70) for message: 'dila vira,dilvira@gmail.com,neluwa,galle,0705555555'
2025-07-26 12:00:52,004 - agent.agent - INFO - [agent.py:484] - [Optimized] Detected intent: general_inquiry for message: 'dila vira,dilvira@gmail.com,neluwa,galle,0705555555' in 3.89s
2025-07-26 12:01:11,828 - agent.agent - INFO - [agent.py:520] - [Optimized] Total processing time: 23.71s, Language: english
2025-07-26 12:01:11,828 - services.whatsapp_service - INFO - [whatsapp_service.py:137] - Sending WhatsApp message to 94701461095: It seems the **Organic Egg Pack** is currently una...
2025-07-26 12:01:13,101 - services.whatsapp_service - INFO - [whatsapp_service.py:143] - ‚úÖ Message sent successfully. Message ID: wamid.HBgLOTQ3MDE0NjEwOTUVAgARGBJGNDQ0MzcwNDRGNEY5QTEzMEEA
2025-07-26 12:01:13,101 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:58] - ‚úÖ Response sent to 94701461095: It seems the **Organic Egg Pack** is currently una...
2025-07-26 12:01:13,813 - services.whatsapp_service - INFO - [whatsapp_service.py:344] - ‚úÖ Message wamid.HBgLOTQ3MDE0NjEwOTUVAgASGBYzRUIwQkRCQTA4MEE2Qzg4OTc4RUQzAA== marked as read
2025-07-26 12:01:15,059 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MDE0NjEwOTUVAgARGBJGNDQ0MzcwNDRGNEY5QTEzMEEA",
                "status": "delivered",
                "timestamp": "1753511473",
                "recipient_id": "94701461095",
                "conversation": {
                  "id": "af884cef964072c302741a5f1d4bdc11",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 12:01:15,060 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 12:01:15,060 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 12:01:15,372 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MDE0NjEwOTUVAgARGBJGNDQ0MzcwNDRGNEY5QTEzMEEA",
                "status": "read",
                "timestamp": "1753511473",
                "recipient_id": "94701461095"
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 12:01:15,373 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 12:01:15,373 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 12:01:15,658 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MDE0NjEwOTUVAgARGBJGNDQ0MzcwNDRGNEY5QTEzMEEA",
                "status": "sent",
                "timestamp": "1753511473",
                "recipient_id": "94701461095",
                "conversation": {
                  "id": "af884cef964072c302741a5f1d4bdc11",
                  "expiration_timestamp": "1753511473",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 12:01:15,658 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 12:01:15,659 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 12:01:52,316 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "contacts": [
              {
                "profile": {
                  "name": "Dilshan Liyanage"
                },
                "wa_id": "94701461095"
              }
            ],
            "messages": [
              {
                "from": "94701461095",
                "id": "wamid.HBgLOTQ3MDE0NjEwOTUVAgASGBYzRUIwRDYzQzJEMDJGMzQzOTRBRDMwAA==",
                "timestamp": "1753511510",
                "text": {
                  "body": "How much stock is left for organic egg pack"
                },
                "type": "text"
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 12:01:52,317 - services.whatsapp_service - INFO - [whatsapp_service.py:284] - üì® Received WhatsApp message from 94701461095: How much stock is left for organic egg pack...
2025-07-26 12:01:52,318 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:124] - ‚úÖ Message queued for processing from 94701461095
2025-07-26 12:01:52,319 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:46] - ü§ñ Processing message from 94701461095: How much stock is left for organic egg pack...
2025-07-26 12:01:56,309 - agent.language_agent - INFO - [language_agent.py:211] - [LanguageAgent] Combined detection: english (rule: 0.61, llm: english)
2025-07-26 12:01:56,309 - agent.agent - INFO - [agent.py:480] - [Language] Detected language: english (confidence: 0.81) for message: 'How much stock is left for organic egg pack'
2025-07-26 12:01:56,309 - agent.agent - INFO - [agent.py:484] - [Optimized] Detected intent: product_info for message: 'How much stock is left for organic egg pack' in 3.99s
2025-07-26 12:02:36,285 - agent.agent - INFO - [agent.py:520] - [Optimized] Total processing time: 43.97s, Language: english
2025-07-26 12:02:36,285 - services.whatsapp_service - INFO - [whatsapp_service.py:137] - Sending WhatsApp message to 94701461095: ...
2025-07-26 12:02:36,813 - services.whatsapp_service - ERROR - [whatsapp_service.py:152] - ‚ùå Failed to send WhatsApp message: 400 Client Error: Bad Request for url: https://graph.facebook.com/v22.0/762208246965801/messages
2025-07-26 12:02:36,814 - routes.whatsapp_routes - ERROR - [whatsapp_routes.py:62] - ‚ùå Failed to send response to 94701461095: 400 Client Error: Bad Request for url: https://graph.facebook.com/v22.0/762208246965801/messages
2025-07-26 12:04:27,448 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "contacts": [
              {
                "profile": {
                  "name": "Nipul Viduranga"
                },
                "wa_id": "94713966820"
              }
            ],
            "messages": [
              {
                "from": "94713966820",
                "id": "wamid.HBgLOTQ3MTM5NjY4MjAVAgASGCBEMkI0NDhDMENGQUY3Qzc0Mzg3QTZBOTY0REFFMDgyNQA=",
                "timestamp": "1753511665",
                "text": {
                  "body": "Hi"
                },
                "type": "text"
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 12:04:27,449 - services.whatsapp_service - INFO - [whatsapp_service.py:284] - üì® Received WhatsApp message from 94713966820: Hi...
2025-07-26 12:04:27,450 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:124] - ‚úÖ Message queued for processing from 94713966820
2025-07-26 12:04:27,451 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:46] - ü§ñ Processing message from 94713966820: Hi...
2025-07-26 12:04:30,622 - agent.language_agent - INFO - [language_agent.py:211] - [LanguageAgent] Combined detection: english (rule: 0.50, llm: english)
2025-07-26 12:04:30,623 - agent.agent - INFO - [agent.py:480] - [Language] Detected language: english (confidence: 0.70) for message: 'Hi'
2025-07-26 12:04:30,623 - agent.agent - INFO - [agent.py:484] - [Optimized] Detected intent: general_inquiry for message: 'Hi' in 3.17s
2025-07-26 12:04:37,290 - agent.agent - INFO - [agent.py:520] - [Optimized] Total processing time: 9.84s, Language: english
2025-07-26 12:04:37,291 - services.whatsapp_service - INFO - [whatsapp_service.py:137] - Sending WhatsApp message to 94713966820: Hi there! How can I assist you today?  

(‡∑Ñ‡∑è‡∂∫‡∑í! ‡∂Ö‡∂Ø...
2025-07-26 12:04:38,726 - services.whatsapp_service - INFO - [whatsapp_service.py:143] - ‚úÖ Message sent successfully. Message ID: wamid.HBgLOTQ3MTM5NjY4MjAVAgARGBJEMTk2MDYzMUU1QjI3RTFCNDgA
2025-07-26 12:04:38,727 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:58] - ‚úÖ Response sent to 94713966820: Hi there! How can I assist you today?  

(‡∑Ñ‡∑è‡∂∫‡∑í! ‡∂Ö‡∂Ø...
2025-07-26 12:04:39,751 - services.whatsapp_service - INFO - [whatsapp_service.py:344] - ‚úÖ Message wamid.HBgLOTQ3MTM5NjY4MjAVAgASGCBEMkI0NDhDMENGQUY3Qzc0Mzg3QTZBOTY0REFFMDgyNQA= marked as read
2025-07-26 12:04:40,863 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MTM5NjY4MjAVAgARGBJEMTk2MDYzMUU1QjI3RTFCNDgA",
                "status": "sent",
                "timestamp": "1753511679",
                "recipient_id": "94713966820",
                "conversation": {
                  "id": "6aeeb5c1d9fa073aed1b86a50d3fc6fb",
                  "expiration_timestamp": "1753511679",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 12:04:40,864 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 12:04:40,864 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 12:04:41,116 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MTM5NjY4MjAVAgARGBJEMTk2MDYzMUU1QjI3RTFCNDgA",
                "status": "delivered",
                "timestamp": "1753511679",
                "recipient_id": "94713966820",
                "conversation": {
                  "id": "6aeeb5c1d9fa073aed1b86a50d3fc6fb",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 12:04:41,117 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 12:04:41,117 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 12:04:41,272 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MTM5NjY4MjAVAgARGBJEMTk2MDYzMUU1QjI3RTFCNDgA",
                "status": "delivered",
                "timestamp": "1753511679",
                "recipient_id": "94713966820",
                "conversation": {
                  "id": "6aeeb5c1d9fa073aed1b86a50d3fc6fb",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 12:04:41,273 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 12:04:41,274 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 12:04:41,784 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MTM5NjY4MjAVAgARGBJEMTk2MDYzMUU1QjI3RTFCNDgA",
                "status": "read",
                "timestamp": "1753511680",
                "recipient_id": "94713966820",
                "conversation": {
                  "id": "6aeeb5c1d9fa073aed1b86a50d3fc6fb",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 12:04:41,785 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 12:04:41,785 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 12:04:53,151 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "contacts": [
              {
                "profile": {
                  "name": "Dilshan Liyanage"
                },
                "wa_id": "94701461095"
              }
            ],
            "messages": [
              {
                "from": "94701461095",
                "id": "wamid.HBgLOTQ3MDE0NjEwOTUVAgASGBYzRUIwNzI4MzlFMjQ4NzhCQkMxNkMyAA==",
                "timestamp": "1753511691",
                "text": {
                  "body": "I\u2019m ready to check out."
                },
                "type": "text"
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 12:04:53,151 - services.whatsapp_service - INFO - [whatsapp_service.py:284] - üì® Received WhatsApp message from 94701461095: I‚Äôm ready to check out....
2025-07-26 12:04:53,152 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:124] - ‚úÖ Message queued for processing from 94701461095
2025-07-26 12:04:53,154 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:46] - ü§ñ Processing message from 94701461095: I‚Äôm ready to check out....
2025-07-26 12:04:58,252 - agent.language_agent - INFO - [language_agent.py:211] - [LanguageAgent] Combined detection: english (rule: 0.50, llm: english)
2025-07-26 12:04:58,252 - agent.agent - INFO - [agent.py:480] - [Language] Detected language: english (confidence: 0.70) for message: 'I‚Äôm ready to check out.'
2025-07-26 12:04:58,252 - agent.agent - INFO - [agent.py:484] - [Optimized] Detected intent: general_inquiry for message: 'I‚Äôm ready to check out.' in 5.10s
2025-07-26 12:05:09,080 - agent.agent - INFO - [agent.py:520] - [Optimized] Total processing time: 15.93s, Language: english
2025-07-26 12:05:09,080 - services.whatsapp_service - INFO - [whatsapp_service.py:137] - Sending WhatsApp message to 94701461095: It seems the **Organic Egg Pack** is currently out...
2025-07-26 12:05:10,651 - services.whatsapp_service - INFO - [whatsapp_service.py:143] - ‚úÖ Message sent successfully. Message ID: wamid.HBgLOTQ3MDE0NjEwOTUVAgARGBJEQ0ExNkNDMjdEQzhBRDI4NkUA
2025-07-26 12:05:10,653 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:58] - ‚úÖ Response sent to 94701461095: It seems the **Organic Egg Pack** is currently out...
2025-07-26 12:05:11,785 - services.whatsapp_service - INFO - [whatsapp_service.py:344] - ‚úÖ Message wamid.HBgLOTQ3MDE0NjEwOTUVAgASGBYzRUIwNzI4MzlFMjQ4NzhCQkMxNkMyAA== marked as read
2025-07-26 12:05:12,607 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MDE0NjEwOTUVAgARGBJEQ0ExNkNDMjdEQzhBRDI4NkUA",
                "status": "sent",
                "timestamp": "1753511711",
                "recipient_id": "94701461095",
                "conversation": {
                  "id": "43c9329432f582b633a7737f1acf6af3",
                  "expiration_timestamp": "1753511711",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 12:05:12,608 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 12:05:12,608 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 12:05:13,132 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MDE0NjEwOTUVAgARGBJEQ0ExNkNDMjdEQzhBRDI4NkUA",
                "status": "delivered",
                "timestamp": "1753511711",
                "recipient_id": "94701461095",
                "conversation": {
                  "id": "43c9329432f582b633a7737f1acf6af3",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 12:05:13,132 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 12:05:13,132 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 12:05:15,678 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MDE0NjEwOTUVAgARGBJEQ0ExNkNDMjdEQzhBRDI4NkUA",
                "status": "read",
                "timestamp": "1753511714",
                "recipient_id": "94701461095"
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 12:05:15,679 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 12:05:15,679 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 12:06:01,054 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "contacts": [
              {
                "profile": {
                  "name": "Dilshan Liyanage"
                },
                "wa_id": "94701461095"
              }
            ],
            "messages": [
              {
                "from": "94701461095",
                "id": "wamid.HBgLOTQ3MDE0NjEwOTUVAgASGBYzRUIwREE5RDI3QUQ2NTlGM0RFNkEyAA==",
                "timestamp": "1753511759",
                "text": {
                  "body": "no process with this items"
                },
                "type": "text"
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 12:06:01,055 - services.whatsapp_service - INFO - [whatsapp_service.py:284] - üì® Received WhatsApp message from 94701461095: no process with this items...
2025-07-26 12:06:01,056 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:124] - ‚úÖ Message queued for processing from 94701461095
2025-07-26 12:06:01,057 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:46] - ü§ñ Processing message from 94701461095: no process with this items...
2025-07-26 12:06:04,725 - agent.language_agent - INFO - [language_agent.py:211] - [LanguageAgent] Combined detection: english (rule: 0.70, llm: english)
2025-07-26 12:06:04,725 - agent.agent - INFO - [agent.py:480] - [Language] Detected language: english (confidence: 0.90) for message: 'no process with this items'
2025-07-26 12:06:04,726 - agent.agent - INFO - [agent.py:484] - [Optimized] Detected intent: general_inquiry for message: 'no process with this items' in 3.67s
2025-07-26 12:06:09,982 - agent.agent - INFO - [agent.py:520] - [Optimized] Total processing time: 8.92s, Language: english
2025-07-26 12:06:09,982 - services.whatsapp_service - INFO - [whatsapp_service.py:137] - Sending WhatsApp message to 94701461095: Understood! Your order will not be processed with ...
2025-07-26 12:06:11,012 - services.whatsapp_service - INFO - [whatsapp_service.py:143] - ‚úÖ Message sent successfully. Message ID: wamid.HBgLOTQ3MDE0NjEwOTUVAgARGBJGNEFDRjcwOTY4NDI0RjVCNTMA
2025-07-26 12:06:11,013 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:58] - ‚úÖ Response sent to 94701461095: Understood! Your order will not be processed with ...
2025-07-26 12:06:11,852 - services.whatsapp_service - INFO - [whatsapp_service.py:344] - ‚úÖ Message wamid.HBgLOTQ3MDE0NjEwOTUVAgASGBYzRUIwREE5RDI3QUQ2NTlGM0RFNkEyAA== marked as read
2025-07-26 12:06:12,909 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MDE0NjEwOTUVAgARGBJGNEFDRjcwOTY4NDI0RjVCNTMA",
                "status": "sent",
                "timestamp": "1753511771",
                "recipient_id": "94701461095",
                "conversation": {
                  "id": "5b741079ac4c8a3f0126437be27972f4",
                  "expiration_timestamp": "1753511771",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 12:06:12,910 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 12:06:12,910 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 12:06:13,091 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MDE0NjEwOTUVAgARGBJGNEFDRjcwOTY4NDI0RjVCNTMA",
                "status": "read",
                "timestamp": "1753511772",
                "recipient_id": "94701461095"
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 12:06:13,091 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 12:06:13,092 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 12:06:13,152 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MDE0NjEwOTUVAgARGBJGNEFDRjcwOTY4NDI0RjVCNTMA",
                "status": "delivered",
                "timestamp": "1753511771",
                "recipient_id": "94701461095",
                "conversation": {
                  "id": "5b741079ac4c8a3f0126437be27972f4",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 12:06:13,153 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 12:06:13,153 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 12:06:13,212 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MDE0NjEwOTUVAgARGBJGNEFDRjcwOTY4NDI0RjVCNTMA",
                "status": "delivered",
                "timestamp": "1753511772",
                "recipient_id": "94701461095",
                "conversation": {
                  "id": "5b741079ac4c8a3f0126437be27972f4",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 12:06:13,213 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 12:06:13,213 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 12:06:38,108 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "contacts": [
              {
                "profile": {
                  "name": "Dilshan Liyanage"
                },
                "wa_id": "94701461095"
              }
            ],
            "messages": [
              {
                "from": "94701461095",
                "id": "wamid.HBgLOTQ3MDE0NjEwOTUVAgASGBYzRUIwMzZDOEQ5MUZBNkUxQUE2NDEyAA==",
                "timestamp": "1753511796",
                "text": {
                  "body": "i want to to checkout"
                },
                "type": "text"
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 12:06:38,109 - services.whatsapp_service - INFO - [whatsapp_service.py:284] - üì® Received WhatsApp message from 94701461095: i want to to checkout...
2025-07-26 12:06:38,110 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:124] - ‚úÖ Message queued for processing from 94701461095
2025-07-26 12:06:38,111 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:46] - ü§ñ Processing message from 94701461095: i want to to checkout...
2025-07-26 12:06:41,337 - agent.language_agent - INFO - [language_agent.py:211] - [LanguageAgent] Combined detection: english (rule: 0.50, llm: english)
2025-07-26 12:06:41,337 - agent.agent - INFO - [agent.py:480] - [Language] Detected language: english (confidence: 0.70) for message: 'i want to to checkout'
2025-07-26 12:06:41,337 - agent.agent - INFO - [agent.py:484] - [Optimized] Detected intent: place_order for message: 'i want to to checkout' in 3.23s
2025-07-26 12:07:21,426 - agent.agent - INFO - [agent.py:520] - [Optimized] Total processing time: 43.31s, Language: english
2025-07-26 12:07:21,426 - services.whatsapp_service - INFO - [whatsapp_service.py:137] - Sending WhatsApp message to 94701461095: ...
2025-07-26 12:07:22,640 - services.whatsapp_service - ERROR - [whatsapp_service.py:152] - ‚ùå Failed to send WhatsApp message: 400 Client Error: Bad Request for url: https://graph.facebook.com/v22.0/762208246965801/messages
2025-07-26 12:07:22,641 - routes.whatsapp_routes - ERROR - [whatsapp_routes.py:62] - ‚ùå Failed to send response to 94701461095: 400 Client Error: Bad Request for url: https://graph.facebook.com/v22.0/762208246965801/messages
2025-07-26 12:07:53,677 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "contacts": [
              {
                "profile": {
                  "name": "Dilshan Liyanage"
                },
                "wa_id": "94701461095"
              }
            ],
            "messages": [
              {
                "from": "94701461095",
                "id": "wamid.HBgLOTQ3MDE0NjEwOTUVAgASGBYzRUIwMzI4MTBCMzZFNUFERTg0QTQ0AA==",
                "timestamp": "1753511872",
                "text": {
                  "body": "i want to buy 2 sunflower oil bottles"
                },
                "type": "text"
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 12:07:53,678 - services.whatsapp_service - INFO - [whatsapp_service.py:284] - üì® Received WhatsApp message from 94701461095: i want to buy 2 sunflower oil bottles...
2025-07-26 12:07:53,679 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:124] - ‚úÖ Message queued for processing from 94701461095
2025-07-26 12:07:53,679 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:46] - ü§ñ Processing message from 94701461095: i want to buy 2 sunflower oil bottles...
2025-07-26 12:07:58,493 - agent.language_agent - INFO - [language_agent.py:211] - [LanguageAgent] Combined detection: english (rule: 0.50, llm: english)
2025-07-26 12:07:58,494 - agent.agent - INFO - [agent.py:480] - [Language] Detected language: english (confidence: 0.70) for message: 'i want to buy 2 sunflower oil bottles'
2025-07-26 12:07:58,494 - agent.agent - INFO - [agent.py:484] - [Optimized] Detected intent: place_order for message: 'i want to buy 2 sunflower oil bottles' in 4.81s
2025-07-26 12:08:12,678 - agent.agent - INFO - [agent.py:520] - [Optimized] Total processing time: 19.00s, Language: english
2025-07-26 12:08:12,678 - services.whatsapp_service - INFO - [whatsapp_service.py:137] - Sending WhatsApp message to 94701461095: Agent stopped due to max iterations....
2025-07-26 12:08:13,853 - services.whatsapp_service - INFO - [whatsapp_service.py:143] - ‚úÖ Message sent successfully. Message ID: wamid.HBgLOTQ3MDE0NjEwOTUVAgARGBI0MzE3NTFDMDk2RjZFREI1NkIA
2025-07-26 12:08:13,854 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:58] - ‚úÖ Response sent to 94701461095: Agent stopped due to max iterations....
2025-07-26 12:08:15,805 - services.whatsapp_service - INFO - [whatsapp_service.py:344] - ‚úÖ Message wamid.HBgLOTQ3MDE0NjEwOTUVAgASGBYzRUIwMzI4MTBCMzZFNUFERTg0QTQ0AA== marked as read
2025-07-26 12:08:16,614 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MDE0NjEwOTUVAgARGBI0MzE3NTFDMDk2RjZFREI1NkIA",
                "status": "delivered",
                "timestamp": "1753511894",
                "recipient_id": "94701461095",
                "conversation": {
                  "id": "f1c8cdc3c87799c299f02b651a707c59",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 12:08:16,616 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 12:08:16,616 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 12:08:16,616 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MDE0NjEwOTUVAgARGBI0MzE3NTFDMDk2RjZFREI1NkIA",
                "status": "sent",
                "timestamp": "1753511894",
                "recipient_id": "94701461095",
                "conversation": {
                  "id": "f1c8cdc3c87799c299f02b651a707c59",
                  "expiration_timestamp": "1753511894",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 12:08:16,617 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 12:08:16,617 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 12:08:16,688 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MDE0NjEwOTUVAgARGBI0MzE3NTFDMDk2RjZFREI1NkIA",
                "status": "read",
                "timestamp": "1753511894",
                "recipient_id": "94701461095"
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 12:08:16,689 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 12:08:16,689 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 12:09:25,869 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "contacts": [
              {
                "profile": {
                  "name": "Dilshan Liyanage"
                },
                "wa_id": "94701461095"
              }
            ],
            "messages": [
              {
                "from": "94701461095",
                "id": "wamid.HBgLOTQ3MDE0NjEwOTUVAgASGBYzRUIwRUYzRDhDMTIxRDMzQUVDRjc1AA==",
                "timestamp": "1753511964",
                "text": {
                  "body": "i want to buy 2 sunflower oil bottles"
                },
                "type": "text"
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 12:09:25,870 - services.whatsapp_service - INFO - [whatsapp_service.py:284] - üì® Received WhatsApp message from 94701461095: i want to buy 2 sunflower oil bottles...
2025-07-26 12:09:25,871 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:124] - ‚úÖ Message queued for processing from 94701461095
2025-07-26 12:09:25,872 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:46] - ü§ñ Processing message from 94701461095: i want to buy 2 sunflower oil bottles...
2025-07-26 12:09:25,872 - agent.agent - INFO - [agent.py:480] - [Language] Detected language: english (confidence: 0.70) for message: 'i want to buy 2 sunflower oil bottles'
2025-07-26 12:09:25,872 - agent.agent - INFO - [agent.py:484] - [Optimized] Detected intent: place_order for message: 'i want to buy 2 sunflower oil bottles' in 0.00s
2025-07-26 12:09:39,772 - agent.agent - INFO - [agent.py:520] - [Optimized] Total processing time: 13.90s, Language: english
2025-07-26 12:09:39,773 - services.whatsapp_service - INFO - [whatsapp_service.py:137] - Sending WhatsApp message to 94701461095: Agent stopped due to max iterations....
2025-07-26 12:09:41,060 - services.whatsapp_service - INFO - [whatsapp_service.py:143] - ‚úÖ Message sent successfully. Message ID: wamid.HBgLOTQ3MDE0NjEwOTUVAgARGBJBQjYxOEFCQUEyNDE3NDlGQjcA
2025-07-26 12:09:41,061 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:58] - ‚úÖ Response sent to 94701461095: Agent stopped due to max iterations....
2025-07-26 12:09:42,729 - services.whatsapp_service - INFO - [whatsapp_service.py:344] - ‚úÖ Message wamid.HBgLOTQ3MDE0NjEwOTUVAgASGBYzRUIwRUYzRDhDMTIxRDMzQUVDRjc1AA== marked as read
2025-07-26 12:09:43,387 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MDE0NjEwOTUVAgARGBJBQjYxOEFCQUEyNDE3NDlGQjcA",
                "status": "sent",
                "timestamp": "1753511981",
                "recipient_id": "94701461095",
                "conversation": {
                  "id": "61617f4c0c821af5cb4245f07ad56657",
                  "expiration_timestamp": "1753511981",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 12:09:43,388 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 12:09:43,389 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 12:09:43,961 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MDE0NjEwOTUVAgARGBJBQjYxOEFCQUEyNDE3NDlGQjcA",
                "status": "delivered",
                "timestamp": "1753511981",
                "recipient_id": "94701461095",
                "conversation": {
                  "id": "61617f4c0c821af5cb4245f07ad56657",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 12:09:43,962 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 12:09:43,962 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 12:09:52,656 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MDE0NjEwOTUVAgARGBJBQjYxOEFCQUEyNDE3NDlGQjcA",
                "status": "read",
                "timestamp": "1753511990",
                "recipient_id": "94701461095"
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 12:09:52,656 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 12:09:52,657 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 12:10:01,977 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "contacts": [
              {
                "profile": {
                  "name": "Dilshan Liyanage"
                },
                "wa_id": "94701461095"
              }
            ],
            "messages": [
              {
                "from": "94701461095",
                "id": "wamid.HBgLOTQ3MDE0NjEwOTUVAgASGBYzRUIwNjlGMDc4MzVFMkM5OTI2MTM4AA==",
                "timestamp": "1753512000",
                "text": {
                  "body": "why"
                },
                "type": "text"
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 12:10:01,978 - services.whatsapp_service - INFO - [whatsapp_service.py:284] - üì® Received WhatsApp message from 94701461095: why...
2025-07-26 12:10:01,980 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:124] - ‚úÖ Message queued for processing from 94701461095
2025-07-26 12:10:01,981 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:46] - ü§ñ Processing message from 94701461095: why...
2025-07-26 12:10:06,418 - agent.language_agent - INFO - [language_agent.py:211] - [LanguageAgent] Combined detection: english (rule: 0.50, llm: english)
2025-07-26 12:10:06,418 - agent.agent - INFO - [agent.py:480] - [Language] Detected language: english (confidence: 0.70) for message: 'why'
2025-07-26 12:10:06,418 - agent.agent - INFO - [agent.py:484] - [Optimized] Detected intent: general_inquiry for message: 'why' in 4.44s
2025-07-26 12:10:26,613 - agent.agent - INFO - [agent.py:520] - [Optimized] Total processing time: 24.63s, Language: english
2025-07-26 12:10:26,614 - services.whatsapp_service - INFO - [whatsapp_service.py:137] - Sending WhatsApp message to 94701461095: Agent stopped due to max iterations....
2025-07-26 12:10:27,886 - services.whatsapp_service - INFO - [whatsapp_service.py:143] - ‚úÖ Message sent successfully. Message ID: wamid.HBgLOTQ3MDE0NjEwOTUVAgARGBJCNTM1QzE5NzExREM3QjQ5NjEA
2025-07-26 12:10:27,887 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:58] - ‚úÖ Response sent to 94701461095: Agent stopped due to max iterations....
2025-07-26 12:10:28,911 - services.whatsapp_service - INFO - [whatsapp_service.py:344] - ‚úÖ Message wamid.HBgLOTQ3MDE0NjEwOTUVAgASGBYzRUIwNjlGMDc4MzVFMkM5OTI2MTM4AA== marked as read
2025-07-26 12:10:29,630 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MDE0NjEwOTUVAgARGBJCNTM1QzE5NzExREM3QjQ5NjEA",
                "status": "sent",
                "timestamp": "1753512028",
                "recipient_id": "94701461095",
                "conversation": {
                  "id": "6d8a367e1d8a2e6b96d98b8b2a39e164",
                  "expiration_timestamp": "1753512028",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 12:10:29,631 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 12:10:29,631 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 12:10:30,047 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MDE0NjEwOTUVAgARGBJCNTM1QzE5NzExREM3QjQ5NjEA",
                "status": "delivered",
                "timestamp": "1753512028",
                "recipient_id": "94701461095",
                "conversation": {
                  "id": "6d8a367e1d8a2e6b96d98b8b2a39e164",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 12:10:30,047 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 12:10:30,047 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 12:10:30,188 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MDE0NjEwOTUVAgARGBJCNTM1QzE5NzExREM3QjQ5NjEA",
                "status": "read",
                "timestamp": "1753512029",
                "recipient_id": "94701461095"
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 12:10:30,190 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 12:10:30,190 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 12:10:30,248 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "statuses": [
              {
                "id": "wamid.HBgLOTQ3MDE0NjEwOTUVAgARGBJCNTM1QzE5NzExREM3QjQ5NjEA",
                "status": "delivered",
                "timestamp": "1753512028",
                "recipient_id": "94701461095",
                "conversation": {
                  "id": "6d8a367e1d8a2e6b96d98b8b2a39e164",
                  "origin": {
                    "type": "service"
                  }
                },
                "pricing": {
                  "billable": false,
                  "pricing_model": "PMP",
                  "category": "service",
                  "type": "free_customer_service"
                }
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 12:10:30,249 - services.whatsapp_service - INFO - [whatsapp_service.py:255] - No messages found in webhook - might be status update
2025-07-26 12:10:30,249 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:126] - üìù Webhook received but no message to process (might be status update)
2025-07-26 14:46:24,468 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:105] - üì® Received webhook data: {
  "object": "whatsapp_business_account",
  "entry": [
    {
      "id": "1471168067581781",
      "changes": [
        {
          "value": {
            "messaging_product": "whatsapp",
            "metadata": {
              "display_phone_number": "94721302992",
              "phone_number_id": "762208246965801"
            },
            "contacts": [
              {
                "profile": {
                  "name": "Nipul Viduranga"
                },
                "wa_id": "94713966820"
              }
            ],
            "messages": [
              {
                "from": "94713966820",
                "id": "wamid.HBgLOTQ3MTM5NjY4MjAVAgASGCA5NDc4ODg5RTQyRkQ4MDM1MDUzNTk4RTZFQzIxRjdCOAA=",
                "timestamp": "1753486070",
                "text": {
                  "body": "Hi"
                },
                "type": "text"
              }
            ]
          },
          "field": "messages"
        }
      ]
    }
  ]
}...
2025-07-26 14:46:24,469 - services.whatsapp_service - INFO - [whatsapp_service.py:284] - üì® Received WhatsApp message from 94713966820: Hi...
2025-07-26 14:46:24,471 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:124] - ‚úÖ Message queued for processing from 94713966820
2025-07-26 14:46:24,472 - routes.whatsapp_routes - INFO - [whatsapp_routes.py:46] - ü§ñ Processing message from 94713966820: Hi...
2025-07-26 14:46:24,472 - agent.agent - INFO - [agent.py:480] - [Language] Detected language: english (confidence: 0.70) for message: 'Hi'
2025-07-26 14:46:24,472 - agent.agent - INFO - [agent.py:484] - [Optimized] Detected intent: general_inquiry for message: 'Hi' in 0.00s
2025-07-26 14:46:31,409 - agent.agent - INFO - [agent.py:520] - [Optimized] Total processing time: 6.94s, Language: english
2025-07-26 14:46:31,409 - services.whatsapp_service - INFO - [whatsapp_service.py:137] - Sending WhatsApp message to 94713966820: Hi there! How can I assist you today?  

(‡∑Ñ‡∑è‡∂∫‡∑í! ‡∂î‡∂∂...
2025-07-26 14:46:32,196 - services.whatsapp_service - ERROR - [whatsapp_service.py:152] - ‚ùå Failed to send WhatsApp message: 401 Client Error: Unauthorized for url: https://graph.facebook.com/v22.0/762208246965801/messages
2025-07-26 14:46:32,196 - routes.whatsapp_routes - ERROR - [whatsapp_routes.py:62] - ‚ùå Failed to send response to 94713966820: 401 Client Error: Unauthorized for url: https://graph.facebook.com/v22.0/762208246965801/messages
2025-07-26 14:50:30,529 - main - INFO - [main.py:55] - üëã Business Chat Assistant is shutting down...
2025-07-26 14:50:36,018 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-26 14:50:44,574 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-26 14:50:44,803 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-26 14:50:44,847 - faiss - INFO - [__init__.py:186] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-26 14:51:06,180 - services.whatsapp_service - INFO - [whatsapp_service.py:52] - ‚ö†Ô∏è WhatsApp Service initialized without validation - call validate_config() before use
2025-07-26 14:51:06,185 - main - INFO - [main.py:29] - üöÄ Business Chat Assistant starting up...
2025-07-26 14:51:06,185 - main - INFO - [main.py:30] - ‚úÖ CORS middleware configured
2025-07-26 14:51:06,186 - main - INFO - [main.py:34] - ‚úÖ Chat routes registered
2025-07-26 14:51:06,188 - main - INFO - [main.py:38] - ‚úÖ WhatsApp routes registered
2025-07-26 14:51:06,189 - main - INFO - [main.py:49] - üéâ Business Chat Assistant with WhatsApp Integration is ready to serve requests!
2025-07-26 14:51:06,190 - main - INFO - [main.py:50] - üì± WhatsApp webhook endpoint: /whatsapp/webhook
2025-07-26 14:51:06,190 - main - INFO - [main.py:51] - üìä WhatsApp status endpoint: /whatsapp/status
2025-07-26 14:51:06,190 - main - INFO - [main.py:55] - üëã Business Chat Assistant is shutting down...
2025-07-26 14:51:07,653 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-26 14:51:11,207 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-26 14:51:11,297 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-26 14:51:11,302 - faiss - INFO - [__init__.py:186] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-26 14:51:19,514 - services.whatsapp_service - INFO - [whatsapp_service.py:52] - ‚ö†Ô∏è WhatsApp Service initialized without validation - call validate_config() before use
2025-07-26 14:51:19,520 - main - INFO - [main.py:29] - üöÄ Business Chat Assistant starting up...
2025-07-26 14:51:19,521 - main - INFO - [main.py:30] - ‚úÖ CORS middleware configured
2025-07-26 14:51:19,521 - main - INFO - [main.py:34] - ‚úÖ Chat routes registered
2025-07-26 14:51:19,523 - main - INFO - [main.py:38] - ‚úÖ WhatsApp routes registered
2025-07-26 14:51:19,524 - main - INFO - [main.py:49] - üéâ Business Chat Assistant with WhatsApp Integration is ready to serve requests!
2025-07-26 14:51:19,525 - main - INFO - [main.py:50] - üì± WhatsApp webhook endpoint: /whatsapp/webhook
2025-07-26 14:51:19,525 - main - INFO - [main.py:51] - üìä WhatsApp status endpoint: /whatsapp/status
2025-07-26 14:51:31,577 - main - INFO - [main.py:55] - üëã Business Chat Assistant is shutting down...
2025-07-26 14:51:33,363 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-26 14:51:38,325 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-26 14:51:38,481 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-26 14:51:38,491 - faiss - INFO - [__init__.py:186] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-26 14:51:49,153 - services.whatsapp_service - INFO - [whatsapp_service.py:52] - ‚ö†Ô∏è WhatsApp Service initialized without validation - call validate_config() before use
2025-07-26 14:51:49,158 - main - INFO - [main.py:29] - üöÄ Business Chat Assistant starting up...
2025-07-26 14:51:49,159 - main - INFO - [main.py:30] - ‚úÖ CORS middleware configured
2025-07-26 14:51:49,159 - main - INFO - [main.py:34] - ‚úÖ Chat routes registered
2025-07-26 14:51:49,161 - main - INFO - [main.py:38] - ‚úÖ WhatsApp routes registered
2025-07-26 14:51:49,162 - main - INFO - [main.py:49] - üéâ Business Chat Assistant with WhatsApp Integration is ready to serve requests!
2025-07-26 14:51:49,162 - main - INFO - [main.py:50] - üì± WhatsApp webhook endpoint: /whatsapp/webhook
2025-07-26 14:51:49,163 - main - INFO - [main.py:51] - üìä WhatsApp status endpoint: /whatsapp/status
2025-07-26 14:52:24,586 - main - INFO - [main.py:55] - üëã Business Chat Assistant is shutting down...
2025-07-26 14:52:26,132 - utils.logger - INFO - [logger.py:59] - Global logging configured - Level: INFO, Debug Mode: False
2025-07-26 14:52:29,076 - faiss.loader - INFO - [loader.py:125] - Loading faiss with AVX2 support.
2025-07-26 14:52:29,166 - faiss.loader - INFO - [loader.py:127] - Successfully loaded faiss with AVX2 support.
2025-07-26 14:52:29,171 - faiss - INFO - [__init__.py:186] - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
2025-07-26 14:52:36,757 - services.whatsapp_service - INFO - [whatsapp_service.py:52] - ‚ö†Ô∏è WhatsApp Service initialized without validation - call validate_config() before use
2025-07-26 14:52:36,762 - main - INFO - [main.py:29] - üöÄ Business Chat Assistant starting up...
2025-07-26 14:52:36,763 - main - INFO - [main.py:30] - ‚úÖ CORS middleware configured
2025-07-26 14:52:36,763 - main - INFO - [main.py:34] - ‚úÖ Chat routes registered
2025-07-26 14:52:36,766 - main - INFO - [main.py:38] - ‚úÖ WhatsApp routes registered
2025-07-26 14:52:36,767 - main - INFO - [main.py:49] - üéâ Business Chat Assistant with WhatsApp Integration is ready to serve requests!
2025-07-26 14:52:36,768 - main - INFO - [main.py:50] - üì± WhatsApp webhook endpoint: /whatsapp/webhook
2025-07-26 14:52:36,768 - main - INFO - [main.py:51] - üìä WhatsApp status endpoint: /whatsapp/status
